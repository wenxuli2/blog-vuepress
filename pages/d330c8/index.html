<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>security | Xuli&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7df12f51.css" as="style"><link rel="preload" href="/assets/js/app.ae1014d0.js" as="script"><link rel="preload" href="/assets/js/2.0929aa91.js" as="script"><link rel="preload" href="/assets/js/253.10424c86.js" as="script"><link rel="prefetch" href="/assets/js/10.4bdb89ee.js"><link rel="prefetch" href="/assets/js/100.151c3012.js"><link rel="prefetch" href="/assets/js/101.f7532c5e.js"><link rel="prefetch" href="/assets/js/102.1089249a.js"><link rel="prefetch" href="/assets/js/103.638f4733.js"><link rel="prefetch" href="/assets/js/104.1d534122.js"><link rel="prefetch" href="/assets/js/105.06c0bbf9.js"><link rel="prefetch" href="/assets/js/106.92ca4115.js"><link rel="prefetch" href="/assets/js/107.85e42729.js"><link rel="prefetch" href="/assets/js/108.27a6c668.js"><link rel="prefetch" href="/assets/js/109.62c5a10a.js"><link rel="prefetch" href="/assets/js/11.d404b72f.js"><link rel="prefetch" href="/assets/js/110.d11e0109.js"><link rel="prefetch" href="/assets/js/111.1e0c098b.js"><link rel="prefetch" href="/assets/js/112.e254dac0.js"><link rel="prefetch" href="/assets/js/113.67716f81.js"><link rel="prefetch" href="/assets/js/114.f29df292.js"><link rel="prefetch" href="/assets/js/115.4a832c3d.js"><link rel="prefetch" href="/assets/js/116.7e342fac.js"><link rel="prefetch" href="/assets/js/117.0b07f2f8.js"><link rel="prefetch" href="/assets/js/118.db361661.js"><link rel="prefetch" href="/assets/js/119.4feef380.js"><link rel="prefetch" href="/assets/js/12.23c73db0.js"><link rel="prefetch" href="/assets/js/120.4f7f4ee2.js"><link rel="prefetch" href="/assets/js/121.df13004f.js"><link rel="prefetch" href="/assets/js/122.6d767a40.js"><link rel="prefetch" href="/assets/js/123.0350480a.js"><link rel="prefetch" href="/assets/js/124.3d686ac4.js"><link rel="prefetch" href="/assets/js/125.2baee703.js"><link rel="prefetch" href="/assets/js/126.60932da0.js"><link rel="prefetch" href="/assets/js/127.e3d31902.js"><link rel="prefetch" href="/assets/js/128.5f3529e4.js"><link rel="prefetch" href="/assets/js/129.98d9f85c.js"><link rel="prefetch" href="/assets/js/13.ff50593c.js"><link rel="prefetch" href="/assets/js/130.ee0f2916.js"><link rel="prefetch" href="/assets/js/131.e61bb4aa.js"><link rel="prefetch" href="/assets/js/132.acdc1343.js"><link rel="prefetch" href="/assets/js/133.c9e76739.js"><link rel="prefetch" href="/assets/js/134.cbcd2964.js"><link rel="prefetch" href="/assets/js/135.4122a226.js"><link rel="prefetch" href="/assets/js/136.9372f9a6.js"><link rel="prefetch" href="/assets/js/137.880d21ff.js"><link rel="prefetch" href="/assets/js/138.46f50548.js"><link rel="prefetch" href="/assets/js/139.f2b60c6d.js"><link rel="prefetch" href="/assets/js/14.37ab52e2.js"><link rel="prefetch" href="/assets/js/140.d042b179.js"><link rel="prefetch" href="/assets/js/141.3a2723e3.js"><link rel="prefetch" href="/assets/js/142.44576d63.js"><link rel="prefetch" href="/assets/js/143.a798fa29.js"><link rel="prefetch" href="/assets/js/144.e70329ab.js"><link rel="prefetch" href="/assets/js/145.746062ae.js"><link rel="prefetch" href="/assets/js/146.3e99370f.js"><link rel="prefetch" href="/assets/js/147.981d5bae.js"><link rel="prefetch" href="/assets/js/148.6feb1caf.js"><link rel="prefetch" href="/assets/js/149.606b299d.js"><link rel="prefetch" href="/assets/js/15.9179242a.js"><link rel="prefetch" href="/assets/js/150.57f66aa3.js"><link rel="prefetch" href="/assets/js/151.e82ed5b7.js"><link rel="prefetch" href="/assets/js/152.de1c615c.js"><link rel="prefetch" href="/assets/js/153.4c0906bf.js"><link rel="prefetch" href="/assets/js/154.5f1f2309.js"><link rel="prefetch" href="/assets/js/155.2f44369e.js"><link rel="prefetch" href="/assets/js/156.fb853e07.js"><link rel="prefetch" href="/assets/js/157.fc696530.js"><link rel="prefetch" href="/assets/js/158.42305671.js"><link rel="prefetch" href="/assets/js/159.aeeaf452.js"><link rel="prefetch" href="/assets/js/16.39bae875.js"><link rel="prefetch" href="/assets/js/160.97ff0082.js"><link rel="prefetch" href="/assets/js/161.ea02547c.js"><link rel="prefetch" href="/assets/js/162.a7dc58b3.js"><link rel="prefetch" href="/assets/js/163.7de06ea6.js"><link rel="prefetch" href="/assets/js/164.6c7bb19d.js"><link rel="prefetch" href="/assets/js/165.246b1310.js"><link rel="prefetch" href="/assets/js/166.9d473a86.js"><link rel="prefetch" href="/assets/js/167.d6a6946c.js"><link rel="prefetch" href="/assets/js/168.573cc1a2.js"><link rel="prefetch" href="/assets/js/169.dfb815af.js"><link rel="prefetch" href="/assets/js/17.2dafb7c5.js"><link rel="prefetch" href="/assets/js/170.1a4b01b7.js"><link rel="prefetch" href="/assets/js/171.da868f87.js"><link rel="prefetch" href="/assets/js/172.0a41ce61.js"><link rel="prefetch" href="/assets/js/173.b1db7e04.js"><link rel="prefetch" href="/assets/js/174.a2912494.js"><link rel="prefetch" href="/assets/js/175.80b0ff7b.js"><link rel="prefetch" href="/assets/js/176.b286be59.js"><link rel="prefetch" href="/assets/js/177.d477975c.js"><link rel="prefetch" href="/assets/js/178.a9378c73.js"><link rel="prefetch" href="/assets/js/179.f32f6835.js"><link rel="prefetch" href="/assets/js/18.df9528ed.js"><link rel="prefetch" href="/assets/js/180.afb310df.js"><link rel="prefetch" href="/assets/js/181.a1371c07.js"><link rel="prefetch" href="/assets/js/182.481b5a03.js"><link rel="prefetch" href="/assets/js/183.2d51e601.js"><link rel="prefetch" href="/assets/js/184.b6315203.js"><link rel="prefetch" href="/assets/js/185.f4095d2a.js"><link rel="prefetch" href="/assets/js/186.b5705121.js"><link rel="prefetch" href="/assets/js/187.3999cc52.js"><link rel="prefetch" href="/assets/js/188.f6fe1716.js"><link rel="prefetch" href="/assets/js/189.d8b79870.js"><link rel="prefetch" href="/assets/js/19.d71955ef.js"><link rel="prefetch" href="/assets/js/190.b4900e0f.js"><link rel="prefetch" href="/assets/js/191.9d4d7995.js"><link rel="prefetch" href="/assets/js/192.0e39272b.js"><link rel="prefetch" href="/assets/js/193.2299fef0.js"><link rel="prefetch" href="/assets/js/194.436e220c.js"><link rel="prefetch" href="/assets/js/195.281dc036.js"><link rel="prefetch" href="/assets/js/196.80d9a49a.js"><link rel="prefetch" href="/assets/js/197.b3cdd2ea.js"><link rel="prefetch" href="/assets/js/198.8a8b48a8.js"><link rel="prefetch" href="/assets/js/199.89b06297.js"><link rel="prefetch" href="/assets/js/20.fbbbb4a2.js"><link rel="prefetch" href="/assets/js/200.4cc8ee97.js"><link rel="prefetch" href="/assets/js/201.fee4bccc.js"><link rel="prefetch" href="/assets/js/202.edc4d5db.js"><link rel="prefetch" href="/assets/js/203.cff86dc2.js"><link rel="prefetch" href="/assets/js/204.f4315fea.js"><link rel="prefetch" href="/assets/js/205.ce8878e1.js"><link rel="prefetch" href="/assets/js/206.d3021ca5.js"><link rel="prefetch" href="/assets/js/207.e5f1bf22.js"><link rel="prefetch" href="/assets/js/208.6ebee4a9.js"><link rel="prefetch" href="/assets/js/209.662e7b6a.js"><link rel="prefetch" href="/assets/js/21.36081b83.js"><link rel="prefetch" href="/assets/js/210.ce2c0b1a.js"><link rel="prefetch" href="/assets/js/211.6f1af69e.js"><link rel="prefetch" href="/assets/js/212.3b9c8e2b.js"><link rel="prefetch" href="/assets/js/213.c848669b.js"><link rel="prefetch" href="/assets/js/214.ee964723.js"><link rel="prefetch" href="/assets/js/215.21cb777c.js"><link rel="prefetch" href="/assets/js/216.7f9215b6.js"><link rel="prefetch" href="/assets/js/217.977f100a.js"><link rel="prefetch" href="/assets/js/218.82177dd7.js"><link rel="prefetch" href="/assets/js/219.19a31121.js"><link rel="prefetch" href="/assets/js/22.a8b3dfb3.js"><link rel="prefetch" href="/assets/js/220.ec30e722.js"><link rel="prefetch" href="/assets/js/221.a3789d03.js"><link rel="prefetch" href="/assets/js/222.9eb5084d.js"><link rel="prefetch" href="/assets/js/223.16bc8621.js"><link rel="prefetch" href="/assets/js/224.07221c79.js"><link rel="prefetch" href="/assets/js/225.bcef2069.js"><link rel="prefetch" href="/assets/js/226.44d55599.js"><link rel="prefetch" href="/assets/js/227.41507cae.js"><link rel="prefetch" href="/assets/js/228.710cc669.js"><link rel="prefetch" href="/assets/js/229.388605e2.js"><link rel="prefetch" href="/assets/js/23.e18c6c6d.js"><link rel="prefetch" href="/assets/js/230.41a44f2b.js"><link rel="prefetch" href="/assets/js/231.30efb2b1.js"><link rel="prefetch" href="/assets/js/232.83aba0c1.js"><link rel="prefetch" href="/assets/js/233.37c29b6e.js"><link rel="prefetch" href="/assets/js/234.69900621.js"><link rel="prefetch" href="/assets/js/235.2f519beb.js"><link rel="prefetch" href="/assets/js/236.b9b6114e.js"><link rel="prefetch" href="/assets/js/237.2a1db7cc.js"><link rel="prefetch" href="/assets/js/238.600f5600.js"><link rel="prefetch" href="/assets/js/239.8be2d1bb.js"><link rel="prefetch" href="/assets/js/24.cd0b391e.js"><link rel="prefetch" href="/assets/js/240.251e8c24.js"><link rel="prefetch" href="/assets/js/241.d43f064c.js"><link rel="prefetch" href="/assets/js/242.86d5eacb.js"><link rel="prefetch" href="/assets/js/243.80963c44.js"><link rel="prefetch" href="/assets/js/244.13652b92.js"><link rel="prefetch" href="/assets/js/245.eb2bce9c.js"><link rel="prefetch" href="/assets/js/246.a8194f0b.js"><link rel="prefetch" href="/assets/js/247.db00d5f1.js"><link rel="prefetch" href="/assets/js/248.14ed39e2.js"><link rel="prefetch" href="/assets/js/249.142eeecc.js"><link rel="prefetch" href="/assets/js/25.ab3e6688.js"><link rel="prefetch" href="/assets/js/250.4590655a.js"><link rel="prefetch" href="/assets/js/251.f29145b6.js"><link rel="prefetch" href="/assets/js/252.c2322d74.js"><link rel="prefetch" href="/assets/js/254.58d56bca.js"><link rel="prefetch" href="/assets/js/255.c5159cc8.js"><link rel="prefetch" href="/assets/js/256.4cb6be49.js"><link rel="prefetch" href="/assets/js/257.75008126.js"><link rel="prefetch" href="/assets/js/258.1f8c2773.js"><link rel="prefetch" href="/assets/js/259.69dba07f.js"><link rel="prefetch" href="/assets/js/26.e6c287b8.js"><link rel="prefetch" href="/assets/js/260.46e86546.js"><link rel="prefetch" href="/assets/js/261.a525bac6.js"><link rel="prefetch" href="/assets/js/262.cf8ad77b.js"><link rel="prefetch" href="/assets/js/263.5ca29a56.js"><link rel="prefetch" href="/assets/js/264.563d42f2.js"><link rel="prefetch" href="/assets/js/265.133d3598.js"><link rel="prefetch" href="/assets/js/266.27779523.js"><link rel="prefetch" href="/assets/js/267.31bcfcb3.js"><link rel="prefetch" href="/assets/js/268.9f0a35d7.js"><link rel="prefetch" href="/assets/js/269.7aa9cb8f.js"><link rel="prefetch" href="/assets/js/27.d2998298.js"><link rel="prefetch" href="/assets/js/270.d550ac18.js"><link rel="prefetch" href="/assets/js/271.072c0c98.js"><link rel="prefetch" href="/assets/js/272.2662f9f7.js"><link rel="prefetch" href="/assets/js/273.15ade875.js"><link rel="prefetch" href="/assets/js/274.4a133ef6.js"><link rel="prefetch" href="/assets/js/275.96345d22.js"><link rel="prefetch" href="/assets/js/276.081ed3d8.js"><link rel="prefetch" href="/assets/js/277.3ab443bb.js"><link rel="prefetch" href="/assets/js/278.34bcd6be.js"><link rel="prefetch" href="/assets/js/279.bd0a94a7.js"><link rel="prefetch" href="/assets/js/28.3b62382f.js"><link rel="prefetch" href="/assets/js/29.ea60709b.js"><link rel="prefetch" href="/assets/js/3.7fe9dcd8.js"><link rel="prefetch" href="/assets/js/30.849ee28c.js"><link rel="prefetch" href="/assets/js/31.70d851a0.js"><link rel="prefetch" href="/assets/js/32.ec64b5a1.js"><link rel="prefetch" href="/assets/js/33.da3a8699.js"><link rel="prefetch" href="/assets/js/34.215b8865.js"><link rel="prefetch" href="/assets/js/35.b2199b5c.js"><link rel="prefetch" href="/assets/js/36.8706ed65.js"><link rel="prefetch" href="/assets/js/37.01581e35.js"><link rel="prefetch" href="/assets/js/38.ae096490.js"><link rel="prefetch" href="/assets/js/39.7a5b29f6.js"><link rel="prefetch" href="/assets/js/4.654a78a2.js"><link rel="prefetch" href="/assets/js/40.f12b20fb.js"><link rel="prefetch" href="/assets/js/41.45c22686.js"><link rel="prefetch" href="/assets/js/42.03c2287d.js"><link rel="prefetch" href="/assets/js/43.d1ec6a2f.js"><link rel="prefetch" href="/assets/js/44.8d124671.js"><link rel="prefetch" href="/assets/js/45.91d492b8.js"><link rel="prefetch" href="/assets/js/46.48b2a256.js"><link rel="prefetch" href="/assets/js/47.45559e22.js"><link rel="prefetch" href="/assets/js/48.3a6edc8d.js"><link rel="prefetch" href="/assets/js/49.214a15d3.js"><link rel="prefetch" href="/assets/js/5.c50a77fe.js"><link rel="prefetch" href="/assets/js/50.4f64b9f1.js"><link rel="prefetch" href="/assets/js/51.988e74d3.js"><link rel="prefetch" href="/assets/js/52.cec08826.js"><link rel="prefetch" href="/assets/js/53.d2406cf6.js"><link rel="prefetch" href="/assets/js/54.7b9f0481.js"><link rel="prefetch" href="/assets/js/55.351fec50.js"><link rel="prefetch" href="/assets/js/56.5a4a0b96.js"><link rel="prefetch" href="/assets/js/57.21798229.js"><link rel="prefetch" href="/assets/js/58.b5c5745f.js"><link rel="prefetch" href="/assets/js/59.fe0e4afa.js"><link rel="prefetch" href="/assets/js/6.cc995097.js"><link rel="prefetch" href="/assets/js/60.e653cff0.js"><link rel="prefetch" href="/assets/js/61.c85d235a.js"><link rel="prefetch" href="/assets/js/62.699a95f2.js"><link rel="prefetch" href="/assets/js/63.a17696d7.js"><link rel="prefetch" href="/assets/js/64.742a9eb5.js"><link rel="prefetch" href="/assets/js/65.6d300178.js"><link rel="prefetch" href="/assets/js/66.86cef7aa.js"><link rel="prefetch" href="/assets/js/67.796d125c.js"><link rel="prefetch" href="/assets/js/68.b3c2d220.js"><link rel="prefetch" href="/assets/js/69.07795e0e.js"><link rel="prefetch" href="/assets/js/7.c7d43652.js"><link rel="prefetch" href="/assets/js/70.3854d9b8.js"><link rel="prefetch" href="/assets/js/71.d66f2b34.js"><link rel="prefetch" href="/assets/js/72.1350fee4.js"><link rel="prefetch" href="/assets/js/73.a3dded61.js"><link rel="prefetch" href="/assets/js/74.74f0bfff.js"><link rel="prefetch" href="/assets/js/75.4ec95ff3.js"><link rel="prefetch" href="/assets/js/76.1f00db96.js"><link rel="prefetch" href="/assets/js/77.a9d9378a.js"><link rel="prefetch" href="/assets/js/78.a7ddad0d.js"><link rel="prefetch" href="/assets/js/79.46324233.js"><link rel="prefetch" href="/assets/js/8.f0e74718.js"><link rel="prefetch" href="/assets/js/80.801cf0a4.js"><link rel="prefetch" href="/assets/js/81.546e27d2.js"><link rel="prefetch" href="/assets/js/82.d91ad6e6.js"><link rel="prefetch" href="/assets/js/83.fa6487b0.js"><link rel="prefetch" href="/assets/js/84.52dea52e.js"><link rel="prefetch" href="/assets/js/85.68419534.js"><link rel="prefetch" href="/assets/js/86.075c2556.js"><link rel="prefetch" href="/assets/js/87.76c9b596.js"><link rel="prefetch" href="/assets/js/88.030619a8.js"><link rel="prefetch" href="/assets/js/89.cf9cfa28.js"><link rel="prefetch" href="/assets/js/9.2ff272e7.js"><link rel="prefetch" href="/assets/js/90.d95a8854.js"><link rel="prefetch" href="/assets/js/91.c54d7493.js"><link rel="prefetch" href="/assets/js/92.2c3257eb.js"><link rel="prefetch" href="/assets/js/93.b952455a.js"><link rel="prefetch" href="/assets/js/94.4b40b489.js"><link rel="prefetch" href="/assets/js/95.26f010a2.js"><link rel="prefetch" href="/assets/js/96.b2776f09.js"><link rel="prefetch" href="/assets/js/97.d1c685d8.js"><link rel="prefetch" href="/assets/js/98.e1e97635.js"><link rel="prefetch" href="/assets/js/99.9f5d62e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7df12f51.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Xuli's blog" class="logo"> <span class="site-name can-hide">Xuli's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d330c8/404" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/pages/d330c8/404" class="nav-link">学习笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wenxuli/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/images/character.png"> <div class="blogger-info"><h3>Xuli</h3> <span>前端界的小白</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d330c8/404" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/pages/d330c8/404" class="nav-link">学习笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wenxuli/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/categories/?category=%E3%80%8AElectron%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E3%80%8B" title="分类" data-v-1baff76c>《Electron中文文档》</a></li><li data-v-1baff76c><a href="/categories/?category=tutorial" title="分类" data-v-1baff76c>tutorial</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/wenxuli2" target="_blank" title="作者" class="beLink" data-v-1baff76c>Xuli</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2022-04-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">security<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="安全性-原生能力和你的责任"><a href="#安全性-原生能力和你的责任" class="header-anchor">#</a> 安全性，原生能力和你的责任</h1> <p>Web开发人员通畅享有浏览器强大的网络安全特性，而自己的代码风险相对较小。 我们的网站在沙盒中被赋予了有限的权力，我们相信我们的用户享受到的是一个由大型工程师团队打造的浏览器，它能够快速应对新发现的安全威胁。</p> <p>当使用 Electron 时，很重要的一点是要理解 Electron 不是一个 Web 浏览器。 它允许您使用熟悉的 Web 技术构建功能丰富的桌面应用程序，但是您的代码具有更强大的功能。 JavaScript 可以访问文件系统，用户 shell 等。 这允许您构建更高质量的本机应用程序，但是内在的安全风险会随着授予您的代码的额外权力而增加。</p> <p>考虑到这一点，请注意，展示任意来自不受信任源的内容都将会带来严重的安全风险，而这种风险Electron也没打算处理。 事实上，最流行的 Electron 应用程序(Atom，Slack，Visual Studio Code 等) 主要显示本地内容(即使有远程内容也是无 Node 的、受信任的、安全的内容) - 如果您的应用程序要运行在线的源代码，那么您需要确保源代码不是恶意的。</p> <h2 id="报告安全问题"><a href="#报告安全问题" class="header-anchor">#</a> 报告安全问题</h2> <p>有关如何正确上报 Electron 漏洞的信息，参阅 <a href="https://github.com/electron/electron/tree/main/SECURITY.md" target="_blank" rel="noopener noreferrer">SECURITY.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="chromium-安全问题和升级"><a href="#chromium-安全问题和升级" class="header-anchor">#</a> Chromium 安全问题和升级</h2> <p>Electron keeps up to date with alternating Chromium releases. 欲了解更多信息，请查看 <a href="https://electronjs.org/blog/12-week-cadence" target="_blank" rel="noopener noreferrer">Electron Release Cadence blog post<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="安全是所有人的共同责任"><a href="#安全是所有人的共同责任" class="header-anchor">#</a> 安全是所有人的共同责任</h2> <p>需要牢记的是，你的 Electron 程序安全性除了依赖于整个框架基础（<em>Chromium</em>、<em>Node.js</em>）、Electron 本身和所有相关 NPM 库的安全性，还依赖于你自己的代码安全性。 因此，你有责任遵循下列安全守则：</p> <ul><li><p>**使用最新版的 Electron 框架搭建你的程序。**你最终发行的产品中会包含 Electron、Chromium 共享库和 Node.js 的组件。 这些组件存在的安全问题也可能影响你的程序安全性。 你可以通过更新Electron到最新版本来确保像是<em>nodeIntegration绕过攻击</em>一类的严重漏洞已经被修复因而不会影响到你的程序。 请参阅“<a href="#16-use-a-current-version-of-electron">使用当前版本的Electron</a>”以获取更多信息。</p></li> <li><p><strong>评估你的依赖项目</strong>NPM提供了五百万可重用的软件包，而你应当承担起选择可信任的第三方库。 如果你使用了受已知漏洞的过时的库，或是依赖于维护的很糟糕的代码，你的程序安全就可能面临威胁。</p></li> <li><p><strong>遵循安全编码实践</strong>你的代码是你的程序安全的第一道防线。 一般的网络漏洞，例如跨站脚本攻击(Cross-Site Scripting, XSS)，对Electron将造成更大的影响，因此非常建议你遵循安全软件开发最佳实践并进行安全性测试。</p></li></ul> <h2 id="隔离不信任的内容"><a href="#隔离不信任的内容" class="header-anchor">#</a> 隔离不信任的内容</h2> <p>每当你从不被信任的来源(如一个远程服务器)获取代码并在本地执行，其中就存在安全性问题。 例如在默认的 <a href="/《Electron中文文档》/api/browser-window.html"><code>BrowserWindow</code></a>中显示一个远程网站. 如果攻击者以某种方式设法改变所述内容 (通过直接攻击源或者通过在应用和实际目的地之间进行攻击) ，他们将能够在用户的机器上执行本地代码。</p> <blockquote><p>⚠️无论如何，在启用Node.js集成的情况下，你都不该加载并执行远程代码。 相反，只使用本地文件（和您的应用打包在一起）来执行Node.js代码 如果你想要显示远程内容，请使用 <a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a> Tag或者 <a href="/《Electron中文文档》/api/browser-view.html"><code>BrowserView</code></a>，并确保禁用 <code>nodeIntegration</code> 并启用 <code>contextIsolation</code></p></blockquote> <h2 id="electron-安全警告"><a href="#electron-安全警告" class="header-anchor">#</a> Electron 安全警告</h2> <p>从Electron 2.0版本开始，开发者将会在开发者控制台看到打印的警告和建议。 这些警告仅在可执行文件名为 Electron 时才会为开发者显示。</p> <p>你可以通过在<code>process.env</code> 或 <code>window</code>对象上配置<code>ELECTRON_ENABLE_SECURITY_WARNINGS</code> 或<code>ELECTRON_DISABLE_SECURITY_WARNINGS</code>来强制开启或关闭这些警告。</p> <h2 id="清单-安全建议"><a href="#清单-安全建议" class="header-anchor">#</a> 清单：安全建议</h2> <p>为加强程序安全性，你至少应当遵循下列规则：</p> <ol><li><a href="#1-only-load-secure-content">只加载安全的内容</a></li> <li><a href="#2-do-not-enable-nodejs-integration-for-remote-content">禁止在所有渲染器中使用Node.js集成显示远程内容</a></li> <li><a href="#3-enable-context-isolation-for-remote-content">在所有显示远程内容的渲染器中启用上下文隔离。</a></li> <li><a href="#4-enable-sandboxing">Enable sandboxing</a></li> <li><a href="#5-handle-session-permission-requests-from-remote-content">在所有加载远程内容的会话中使用 <code>ses.setPermissionRequestHandler()</code>.</a></li> <li><a href="#6-do-not-disable-websecurity">不要禁用 <code>webSecurity</code></a></li> <li><a href="#7-define-a-content-security-policy">定义一个<code>Content-Security-Policy</code></a>并设置限制规则(如：<code>script-src 'self'</code>)</li> <li><a href="#8-do-not-set-allowrunninginsecurecontent-to-true">不要设置 <code>allowRunningInsecureContent</code> 为 true.</a></li> <li><a href="#9-do-not-enable-experimental-features">不要开启实验性功能</a></li> <li><a href="#10-do-not-use-enableblinkfeatures">不要使用<code>enableBlinkFeatures</code></a></li> <li><a href="#11-do-not-use-allowpopups"><code>&lt;webview&gt;</code>：不要使用 <code>allowpopups</code></a></li> <li><a href="#12-verify-webview-options-before-creation"><code>&lt;webview&gt;</code>：验证选项与参数</a></li> <li><a href="#13-disable-or-limit-navigation">禁用或限制网页跳转</a></li> <li><a href="#14-disable-or-limit-creation-of-new-windows">禁用或限制新窗口创建</a></li> <li><a href="#15-do-not-use-openexternal-with-untrusted-content">不要对不可信的内容使用 <code>openExternal</code></a></li> <li><a href="#16-use-a-current-version-of-electron">使用当前版本的 Electron</a></li></ol> <p>如果你想要自动检测错误的配置或是不安全的模式，可以使用<a href="https://github.com/doyensec/electronegativity" target="_blank" rel="noopener noreferrer">electronegativity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 关于在使用Electron进行应用程序开发中的潜在薄弱点或者bug，您可以参考<a href="https://doyensec.com/resources/us-17-Carettoni-Electronegativity-A-Study-Of-Electron-Security-wp.pdf" target="_blank" rel="noopener noreferrer">开发者与审核人员指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_1-仅加载安全内容"><a href="#_1-仅加载安全内容" class="header-anchor">#</a> 1) 仅加载安全内容</h2> <p>任何不属于你的应用的资源都应该使用像<code>HTTPS</code>这样的安全协议来加载。 换言之， 不要使用不安全的协议 （如 <code>HTTP</code>）。 同理，我们建议使用<code>WSS</code>，避免使用<code>WS</code>，建议使用<code>FTPS</code> ，避免使用<code>FTP</code>，等等诸如此类的协议。</p> <h3 id="为什么"><a href="#为什么" class="header-anchor">#</a> 为什么？</h3> <p><code>HTTPS</code> 有三个主要好处：</p> <ol><li>它对远程服务器进行身份验证, 确保您的应用程序连接到正确的主机而不是模仿器。 2) 确保数据完整性, 断言数据在应用程序和主机之间传输时未被修改。 3) 它对用户和目标主机之间的通信进行加密, 从而更难窃听应用程序和主机之间发送的信息。</li></ol> <h3 id="怎么做"><a href="#怎么做" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
browserWindow<span class="token punctuation">.</span><span class="token function">loadURL</span> <span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment">// 推荐 </span>
browserWindow<span class="token punctuation">.</span><span class="token function">loadURL</span> <span class="token punctuation">(</span><span class="token string">'https://example.com'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 不推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/react.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/style.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/react.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/style.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_2-不要为远程内容启用-node-js-集成"><a href="#_2-不要为远程内容启用-node-js-集成" class="header-anchor">#</a> 2) 不要为远程内容启用 Node.js 集成</h2> <p><em>This recommendation is the default behavior in Electron since 5.0.0.</em></p> <p>加载远程内容时，不论使用的是哪一种渲染器（<a href="/《Electron中文文档》/api/browser-window.html"><code>BrowserWindow</code></a>，<a href="/《Electron中文文档》/api/browser-view.html"><code>BrowserView</code></a> 或者 <a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a>），最重要的就是绝对不要启用 Node.js 集成。 其目的是限制您授予远程内容的权限, 从而使攻击者在您的网站上执行 JavaScript 时更难伤害您的用户。</p> <p>在此之后，你可以为指定的主机授予附加权限。 举例来说，如果你正在打开一个指向 <code>https://example.com/</code> 的 BrowserWindow，那么你可以给他刚刚好足够的权限，但是绝对不要超出这个范围。</p> <h3 id="为什么-2"><a href="#为什么-2" class="header-anchor">#</a> 为什么？</h3> <p>如果攻击者跳过渲染进程并在用户电脑上执行恶意代码，那么这种跨站脚本(XSS) 攻击的危害是非常大的。 跨站脚本攻击很常见，通常情况下，威力仅限于执行代码的网站。 禁用Node.js集成有助于防止XSS攻击升级为“远程代码执行” (RCE) 攻击。</p> <h3 id="怎么做-2"><a href="#怎么做-2" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">nodeIntegration</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nodeIntegrationInWorker</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

mainWindow<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">'https://example.com'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preload</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">getAppPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'preload.js'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

mainWindow<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">'https://example.com'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 不推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webview</span> <span class="token attr-name">nodeIntegration</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webview</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webview</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webview</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当禁用Node.js集成时，你依然可以暴露API给你的站点以使用Node.js的模块功能或特性。 预加载脚本依然可以使用<code>require</code>等Node.js特性， 以使开发者可以暴露自定义API给远程加载内容。</p> <p>在下面的预加载脚本例子中，后加载的网站内容可以使用<code>window.readConfig()</code>方法，但不能使用Node.js特性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

window<span class="token punctuation">.</span><span class="token function-variable function">readConfig</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./config.json'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> data
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-为远程内容开启上下文隔离"><a href="#_3-为远程内容开启上下文隔离" class="header-anchor">#</a> 3) 为远程内容开启上下文隔离</h2> <p>上下文隔离是Electron的一个特性，它允许开发者在预加载脚本里运行代码，里面包含Electron API和专用的JavaScript上下文。 实际上，这意味全局对象如 <code>Array.prototype.push</code> 或 <code>JSON.parse</code>等无法被渲染进程里的运行脚本修改。</p> <p>Electron使用了和Chromium相同的<a href="https://developer.chrome.com/extensions/content_scripts#execution-environment" target="_blank" rel="noopener noreferrer">Content Scripts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>技术来开启这个行为。</p> <p>即便使用了 <code>nodeIntegration: false</code>, 要实现真正的强隔离并且防止使用 Node.js 的功能， <code>contextIsolation</code> 也 <strong>必须</strong> 开启.</p> <h3 id="为什么-3"><a href="#为什么-3" class="header-anchor">#</a> 为什么?</h3> <p>For more information on what <code>contextIsolation</code> is and how to enable it please see our dedicated <a href="/《Electron中文文档》/tutorial/context-isolation.html">Context Isolation</a> document.</p> <h2 id="_4-enable-sandboxing"><a href="#_4-enable-sandboxing" class="header-anchor">#</a> 4) Enable Sandboxing</h2> <p><a href="/《Electron中文文档》/tutorial/sandbox.html">Sandboxing</a> is a Chromium feature that uses the operating system to significantly limit what renderer processes have access to. You should enable the sandbox in all renderers. Loading, reading or processing any untrusted content in an unsandboxed process, including the main process, is not advised.</p> <h3 id="怎么做-3"><a href="#怎么做-3" class="header-anchor">#</a> 怎么做？</h3> <p>When creating a window, pass the <code>sandbox: true</code> option in <code>webPreferences</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sandbox</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_5-处理来自远程内容的会话许可请求"><a href="#_5-处理来自远程内容的会话许可请求" class="header-anchor">#</a> 5) 处理来自远程内容的会话许可请求</h2> <p>当你使用Chromes时，也许见过这种许可请求：每当网站尝试使用某个特性时，就会弹出让用户手动确认(如网站通知)</p> <p>此API基于<a href="https://developer.chrome.com/extensions/permissions" target="_blank" rel="noopener noreferrer">Chromium permissions API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，并已实现对应的许可类型。</p> <h3 id="为什么-4"><a href="#为什么-4" class="header-anchor">#</a> 为什么？</h3> <p>默认情况下，Electron将自动批准所有的许可请求，除非开发者手动配置一个自定义处理函数。 尽管默认如此，有安全意识的开发者可能希望默认反着来。</p> <h3 id="怎么做-4"><a href="#怎么做-4" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

session
  <span class="token punctuation">.</span><span class="token function">fromPartition</span><span class="token punctuation">(</span><span class="token string">'some-partition'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setPermissionRequestHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> webContents<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">===</span> <span class="token string">'notifications'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 通过许可请求</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Verify URL</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'https://example.com/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 拒绝许可请求</span>
      <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_6-不要禁用websecurity"><a href="#_6-不要禁用websecurity" class="header-anchor">#</a> 6) 不要禁用WebSecurity</h2> <p><em>Electron的默认值即是建议值。</em></p> <p>在渲染进程（<a href="/《Electron中文文档》/api/browser-window.html"><code>BrowserWindow</code></a>、<a href="/《Electron中文文档》/api/browser-view.html"><code>BrowserView</code></a> 和 <a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a>）中禁用 <code>webSecurity</code> 将导致至关重要的安全性功能被关闭。</p> <p>不要在生产环境中禁用<code>webSecurity</code>。</p> <h3 id="为什么-5"><a href="#为什么-5" class="header-anchor">#</a> 为什么？</h3> <p>禁用 <code>webSecurity</code> 将会禁止同源策略并且将 <code>allowRunningInsecureContent</code> 属性置 <code>true</code>。 换句话说，这将使得来自其他站点的非安全代码被执行。</p> <h3 id="怎么做-5"><a href="#怎么做-5" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">webSecurity</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 不推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webview</span> <span class="token attr-name">disablewebsecurity</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webview</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webview</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webview</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_7-定义一个内容安全策略"><a href="#_7-定义一个内容安全策略" class="header-anchor">#</a> 7) 定义一个内容安全策略</h2> <p>内容安全策略(CSP) 是应对跨站脚本攻击和数据注入攻击的又一层保护措施。 我们建议任何载入到Electron的站点都要开启。</p> <h3 id="为什么-6"><a href="#为什么-6" class="header-anchor">#</a> 为什么？</h3> <p>CSP允许Electron通过服务端内容对指定页面的资源加载进行约束与控制。 如果你定义<code>https://example.com</code>这个源，所属这个源的脚本都允许被加载，反之<code>https://evil.attacker.com</code>不会被允许加载运行。 对于提升你的应用安全性，设置CSP是个很方便的办法。</p> <p>下面的CSP设置使得Electron只能执行自身站点和来自<code>apis.example.com</code>的脚本。</p> <div class="language-plaintext line-numbers-mode"><pre class="language-plaintext"><code>// 不推荐
Content-Security-Policy: '*'

// 推荐
Content-Security-Policy: script-src 'self' https://apis.example.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="csp-http头"><a href="#csp-http头" class="header-anchor">#</a> CSP HTTP头</h3> <p>Electron 会处理 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy" target="_blank" rel="noopener noreferrer"><code>Content-Security-Policy</code> HTTP 标头<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它可以在 <a href="/《Electron中文文档》/api/web-request.html#webrequestonheadersreceivedfilter-listener"><code>webRequest.onHeadersReceived</code></a> 中进行设置：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span>webRequest<span class="token punctuation">.</span><span class="token function">onHeadersReceived</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">details<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">responseHeaders</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>details<span class="token punctuation">.</span>responseHeaders<span class="token punctuation">,</span>
      <span class="token string-property property">'Content-Security-Policy'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'default-src \'none\''</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="csp元标签"><a href="#csp元标签" class="header-anchor">#</a> CSP元标签</h3> <p>CSP的首选传递机制是HTTP报头，但是在使用<code>file://</code>协议加载资源时，不可能使用此方法。 在某些用例下, 例如使用<code>file://</code>协议时, 在页面的<code>&lt;meta&gt;</code>的标签中设置CSP是非常有用的.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src <span class="token punctuation">'</span>none<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_8-不要设置allowrunninginsecurecontent为true"><a href="#_8-不要设置allowrunninginsecurecontent为true" class="header-anchor">#</a> 8) 不要设置<code>allowRunningInsecureContent</code>为<code>true</code></h2> <p><em>Electron的默认值即是建议值。</em></p> <p>默认情况下，Electron不允许网站在<code>HTTPS</code>中加载或执行非安全源(<code>HTTP</code>) 中的脚本代码、CSS或插件。 将<code>allowRunningInsecureContent</code>属性设为<code>true</code>将禁用这种保护。</p> <p>当网站的初始内容通过<code>HTTPS</code>加载并尝试在子请求中加载<code>HTTP</code>的资源时，这被称为&quot;混合内容&quot;。</p> <h3 id="为什么-7"><a href="#为什么-7" class="header-anchor">#</a> 为什么？</h3> <p>通过<code>HTTPS</code>加载会将该资源进行加密传输，以保证其真实性和完整性。 参看<a href="#1-only-load-secure-content">只显示安全内容</a>这节以获得更多信息。</p> <h3 id="怎么做-6"><a href="#怎么做-6" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">allowRunningInsecureContent</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_9-不要开启实验室特性"><a href="#_9-不要开启实验室特性" class="header-anchor">#</a> 9) 不要开启实验室特性</h2> <p><em>Electron的默认值即是建议值。</em></p> <p>Electron 的熟练用户可以通过 <code>experimentalFeatures</code> 属性来启用 Chromium 实验性功能。</p> <h3 id="为什么-8"><a href="#为什么-8" class="header-anchor">#</a> 为什么？</h3> <p>如名称所示，实验性功能是实验性的，尚未对所有 Chromium 用户启用。 此外，它们对整个 Electron 的影响很可能没有经过测试。</p> <p>尽管存在合理的使用场景，但是除非你知道你自己在干什么，否则你不应该开启这个属性。</p> <h3 id="怎么做-7"><a href="#怎么做-7" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">experimentalFeatures</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_10-不要使用enableblinkfeatures"><a href="#_10-不要使用enableblinkfeatures" class="header-anchor">#</a> 10) 不要使用<code>enableBlinkFeatures</code></h2> <p><em>Electron的默认值即是建议值。</em></p> <p>Blink是Chromium里的渲染引擎名称。 就像<code>experimentalFeatures</code>一样，<code>enableBlinkFeatures</code>属性将使开发者启用被默认禁用的特性。</p> <h3 id="为什么-9"><a href="#为什么-9" class="header-anchor">#</a> 为什么？</h3> <p>通常来说，某个特性默认不被开启肯定有其合理的原因。 针对特定特性的合理使用场景是存在的。 作为开发者，你应该非常明白你为何要开启它，有什么后果，以及对你应用安全性的影响。 在任何情况下都不应该推测性的开启特性。</p> <h3 id="怎么做-8"><a href="#怎么做-8" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">enableBlinkFeatures</span><span class="token operator">:</span> <span class="token string">'ExecCommandInJavaScript'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 推荐</span>
<span class="token keyword">const</span> mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_11-不要使用allowpopups"><a href="#_11-不要使用allowpopups" class="header-anchor">#</a> 11) 不要使用<code>allowpopups</code></h2> <p><em>Electron的默认值即是建议值。</em></p> <p>如果您正在使用 <a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a> ，您可能需要页面和脚本加载进您的 <code>&lt;webview&gt;</code> 标签以打开新窗口。 开启<code>allowpopups</code>属性将使得<a href="/《Electron中文文档》/api/browser-window.html"><code>BrowserWindows</code></a>可以通过<code>window.open()</code>方法创建。 否则， <code>&lt;webview&gt;</code> 标签内不允许创建新窗口。</p> <h3 id="为什么-10"><a href="#为什么-10" class="header-anchor">#</a> 为什么？</h3> <p>如果你不需要弹窗，最好使用默认值以关闭新<a href="/《Electron中文文档》/api/browser-window.html"><code>BrowserWindows</code></a>的创建。 以下是最低的权限要求原则：若非必要，不要再网站中创建新窗口。</p> <h3 id="怎么做-9"><a href="#怎么做-9" class="header-anchor">#</a> 怎么做？</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 不推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webview</span> <span class="token attr-name">allowpopups</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webview</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 推荐 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webview</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webview</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_12-创建webview前确认其选项"><a href="#_12-创建webview前确认其选项" class="header-anchor">#</a> 12) 创建WebView前确认其选项</h2> <p>通过渲染进程创建的WebView是不开启Node.js集成的，且也不能由自身开启。 但是，WebView可以通过其<code>webPreferences</code>属性创建一个独立的渲染进程。</p> <p>通过控制主进程中创建新的<a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a>，并确认其webPreferences没有禁用安全相关特性是个不错的办法。</p> <h3 id="为什么-11"><a href="#为什么-11" class="header-anchor">#</a> 为什么？</h3> <p>由于 <code>&lt;webview&gt;</code> 存在在DOM中，因此即使Node继承被禁用，它也可以通过运行在您的 网站上的脚本创建它们。</p> <p>Electron 可以让开发者关闭各种控制渲染进程的安全特性。 通常情况下，开发者并不需要关闭他们中的任何一种 - 因此你不应该允许创建不同配置的<a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a>标签</p> <h3 id="怎么做-10"><a href="#怎么做-10" class="header-anchor">#</a> 怎么做？</h3> <p>在 <a href="/《Electron中文文档》/api/webview-tag.html"><code>&lt;webview&gt;</code></a>标签生效前，Electron将产生一个<code>will-attach-webview</code>事件到<code>webContents</code>中。 利用这个事件来阻止可能含有不安全选项的 <code>webViews</code> 创建。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'web-contents-created'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> contents</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  contents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'will-attach-webview'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> webPreferences<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Strip away preload scripts if unused or verify their location is legitimate</span>
    <span class="token keyword">delete</span> webPreferences<span class="token punctuation">.</span>preload
    <span class="token keyword">delete</span> webPreferences<span class="token punctuation">.</span>preloadURL

    <span class="token comment">// Disable Node.js integration</span>
    webPreferences<span class="token punctuation">.</span>nodeIntegration <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token comment">// Verify URL being loaded</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>params<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'https://example.com/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>不过，这个清单只是将风险降低到最低限度，但没有将其消除。 如果您的目标是展示一个网站，浏览器将是一个更安全的选择。</p> <h2 id="_13-disable-or-limit-navigation"><a href="#_13-disable-or-limit-navigation" class="header-anchor">#</a> 13) Disable or limit navigation</h2> <p>If your app has no need to navigate or only needs to navigate to known pages, it is a good idea to limit navigation outright to that known scope, disallowing any other kinds of navigation.</p> <h3 id="为什么-12"><a href="#为什么-12" class="header-anchor">#</a> 为什么？</h3> <p>Navigation is a common attack vector. If an attacker can convince your app to navigate away from its current page, they can possibly force your app to open web sites on the Internet. Even if your <code>webContents</code> are configured to be more secure (like having <code>nodeIntegration</code> disabled or <code>contextIsolation</code> enabled), getting your app to open a random web site will make the work of exploiting your app a lot easier.</p> <p>A common attack pattern is that the attacker convinces your app's users to interact with the app in such a way that it navigates to one of the attacker's pages. This is usually done via links, plugins, or other user-generated content.</p> <h3 id="怎么做-11"><a href="#怎么做-11" class="header-anchor">#</a> 怎么做？</h3> <p>如果您的应用不需要导航，您可以在 <a href="/《Electron中文文档》/api/web-contents.html#event-will-navigate"><code>will-navigate</code></a> 处理器中调用 <code>event.preventDefault()</code>。 If you know which pages your app might navigate to, check the URL in the event handler and only let navigation occur if it matches the URLs you're expecting.</p> <p>We recommend that you use Node's parser for URLs. 简单的字符串比较有时会出错 - <code>startsWith('https://example.com')</code>测试会让<code>https://example.com.attacker.com</code>通过.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">URL</span>

app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'web-contents-created'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> contents</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  contents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'will-navigate'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> navigationUrl</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> parsedUrl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>navigationUrl<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>parsedUrl<span class="token punctuation">.</span>origin <span class="token operator">!==</span> <span class="token string">'https://example.com'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_14-禁用或限制新窗口的创建"><a href="#_14-禁用或限制新窗口的创建" class="header-anchor">#</a> 14) 禁用或限制新窗口的创建</h2> <p>If you have a known set of windows, it's a good idea to limit the creation of additional windows in your app.</p> <h3 id="为什么-13"><a href="#为什么-13" class="header-anchor">#</a> 为什么？</h3> <p>Much like navigation, the creation of new <code>webContents</code> is a common attack vector. Attackers attempt to convince your app to create new windows, frames, or other renderer processes with more privileges than they had before; or with pages opened that they couldn't open before.</p> <p>If you have no need to create windows in addition to the ones you know you'll need to create, disabling the creation buys you a little bit of extra security at no cost. This is commonly the case for apps that open one <code>BrowserWindow</code> and do not need to open an arbitrary number of additional windows at runtime.</p> <h3 id="怎么做-12"><a href="#怎么做-12" class="header-anchor">#</a> 怎么做？</h3> <p><a href="/《Electron中文文档》/api/web-contents.html"><code>webContents</code></a>将会在新窗口创建前传递给 <a href="/《Electron中文文档》/api/web-contents.html#contentssetwindowopenhandlerhandler">打开窗口的处理函数</a>。 The handler will receive, amongst other parameters, the <code>url</code> the window was requested to open and the options used to create it. We recommend that you register a handler to monitor the creation of windows, and deny any unexpected window creation.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> shell <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'web-contents-created'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> contents</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  contents<span class="token punctuation">.</span><span class="token function">setWindowOpenHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// In this example, we'll ask the operating system</span>
    <span class="token comment">// to open this event's url in the default browser.</span>
    <span class="token comment">//</span>
    <span class="token comment">// See the following item for considerations regarding what</span>
    <span class="token comment">// URLs should be allowed through to shell.openExternal.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSafeForExternalOpen</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        shell<span class="token punctuation">.</span><span class="token function">openExternal</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'deny'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_15-不要使用-openexternal-打开含有不可信任内容"><a href="#_15-不要使用-openexternal-打开含有不可信任内容" class="header-anchor">#</a> 15) 不要使用 <code>openExternal</code> 打开含有不可信任内容</h2> <p>Shell 的 <a href="/《Electron中文文档》/api/shell.html#shellopenexternalurl-options"><code>openExternal</code></a> 允许使用桌面的原生工具打开指定的协议 URI。 例如，在 macOS 上，此功能与 <code>open</code> 终端命令实用程序类似，将基于 URI 和文件类型关联打开特定的应用程序。</p> <h3 id="为什么-14"><a href="#为什么-14" class="header-anchor">#</a> 为什么？</h3> <p>错误使用 <a href="/《Electron中文文档》/api/shell.html#shellopenexternalurl-options"><code>openExternal</code></a> 会危害用户的主机 当 openExternal 使用内容不受信任时，它可以用来执行任意命令。</p> <h3 id="怎么做-13"><a href="#怎么做-13" class="header-anchor">#</a> 怎么做？</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  Bad</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> shell <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
shell<span class="token punctuation">.</span><span class="token function">openExternal</span><span class="token punctuation">(</span><span class="token constant">USER_CONTROLLED_DATA_HERE</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  Good</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> shell <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
shell<span class="token punctuation">.</span><span class="token function">openExternal</span><span class="token punctuation">(</span><span class="token string">'https://example.com/index.html'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_16-使用当前版本的-electron"><a href="#_16-使用当前版本的-electron" class="header-anchor">#</a> 16) 使用当前版本的 Electron</h2> <p>你应该尽可能使用最新版本的 Electron。 每当发布新的主要版本时，你应该尝试尽快更新您的应用。</p> <h3 id="为什么-15"><a href="#为什么-15" class="header-anchor">#</a> 为什么？</h3> <p>一个使用 Electron、Chromium 和 Node.js 的旧版本构建的应用程序比使用这些组件的最新版本的应用程序更容易成为目标。 Generally speaking, security issues and exploits for older versions of Chromium and Node.js are more widely available.</p> <p>Chromium 和 Node.js 都是数千名有才华的开发者建造的令人印象深刻的工程。 鉴于他们受欢迎的程度，他们的安全性都经过专业的安全研究人员仔细的测试和分析。 其中许多研究人员<a href="https://en.wikipedia.org/wiki/Responsible_disclosure" target="_blank" rel="noopener noreferrer">负责任地披露漏洞<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这通常意味着研究人员会给 Chromium 和 Node.js 一些时间来修复问题，然后再发布它们。 如果你的应用程序运行的是 Electron 的最新版本 (包括 Chromium 和 Node.js)，你的应用程序将更加安全，因为潜在的安全问题并不广为人知。</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/wenxuli/vuepress-theme-vdoing/edit/master/docs/《Electron中文文档》/tutorial/security.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c77e3b/"><div>
            JavaScript 中搜索数组元素
            <!----></div></a> <span class="date">04-15</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/170433/"><div>
            TypeScript 的基本使用
            <!----></div></a> <span class="date">04-15</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/8f7083/"><div>
            js读取文件
            <!----></div></a> <span class="date">04-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1031553051@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wenxuli2" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Xuli | <a href="#" target="_blank">MIT License</a> | <a href="https://beian.miit.gov.cn/#/Integrated/recordQuery">粤ICP备2022033241号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.ae1014d0.js" defer></script><script src="/assets/js/2.0929aa91.js" defer></script><script src="/assets/js/253.10424c86.js" defer></script>
  </body>
</html>
