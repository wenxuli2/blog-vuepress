<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>breaking-changes | Xuli&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7df12f51.css" as="style"><link rel="preload" href="/assets/js/app.ae1014d0.js" as="script"><link rel="preload" href="/assets/js/2.0929aa91.js" as="script"><link rel="preload" href="/assets/js/187.3999cc52.js" as="script"><link rel="prefetch" href="/assets/js/10.4bdb89ee.js"><link rel="prefetch" href="/assets/js/100.151c3012.js"><link rel="prefetch" href="/assets/js/101.f7532c5e.js"><link rel="prefetch" href="/assets/js/102.1089249a.js"><link rel="prefetch" href="/assets/js/103.638f4733.js"><link rel="prefetch" href="/assets/js/104.1d534122.js"><link rel="prefetch" href="/assets/js/105.06c0bbf9.js"><link rel="prefetch" href="/assets/js/106.92ca4115.js"><link rel="prefetch" href="/assets/js/107.85e42729.js"><link rel="prefetch" href="/assets/js/108.27a6c668.js"><link rel="prefetch" href="/assets/js/109.62c5a10a.js"><link rel="prefetch" href="/assets/js/11.d404b72f.js"><link rel="prefetch" href="/assets/js/110.d11e0109.js"><link rel="prefetch" href="/assets/js/111.1e0c098b.js"><link rel="prefetch" href="/assets/js/112.e254dac0.js"><link rel="prefetch" href="/assets/js/113.67716f81.js"><link rel="prefetch" href="/assets/js/114.f29df292.js"><link rel="prefetch" href="/assets/js/115.4a832c3d.js"><link rel="prefetch" href="/assets/js/116.7e342fac.js"><link rel="prefetch" href="/assets/js/117.0b07f2f8.js"><link rel="prefetch" href="/assets/js/118.db361661.js"><link rel="prefetch" href="/assets/js/119.4feef380.js"><link rel="prefetch" href="/assets/js/12.23c73db0.js"><link rel="prefetch" href="/assets/js/120.4f7f4ee2.js"><link rel="prefetch" href="/assets/js/121.df13004f.js"><link rel="prefetch" href="/assets/js/122.6d767a40.js"><link rel="prefetch" href="/assets/js/123.0350480a.js"><link rel="prefetch" href="/assets/js/124.3d686ac4.js"><link rel="prefetch" href="/assets/js/125.2baee703.js"><link rel="prefetch" href="/assets/js/126.60932da0.js"><link rel="prefetch" href="/assets/js/127.e3d31902.js"><link rel="prefetch" href="/assets/js/128.5f3529e4.js"><link rel="prefetch" href="/assets/js/129.98d9f85c.js"><link rel="prefetch" href="/assets/js/13.ff50593c.js"><link rel="prefetch" href="/assets/js/130.ee0f2916.js"><link rel="prefetch" href="/assets/js/131.e61bb4aa.js"><link rel="prefetch" href="/assets/js/132.acdc1343.js"><link rel="prefetch" href="/assets/js/133.c9e76739.js"><link rel="prefetch" href="/assets/js/134.cbcd2964.js"><link rel="prefetch" href="/assets/js/135.4122a226.js"><link rel="prefetch" href="/assets/js/136.9372f9a6.js"><link rel="prefetch" href="/assets/js/137.880d21ff.js"><link rel="prefetch" href="/assets/js/138.46f50548.js"><link rel="prefetch" href="/assets/js/139.f2b60c6d.js"><link rel="prefetch" href="/assets/js/14.37ab52e2.js"><link rel="prefetch" href="/assets/js/140.d042b179.js"><link rel="prefetch" href="/assets/js/141.3a2723e3.js"><link rel="prefetch" href="/assets/js/142.44576d63.js"><link rel="prefetch" href="/assets/js/143.a798fa29.js"><link rel="prefetch" href="/assets/js/144.e70329ab.js"><link rel="prefetch" href="/assets/js/145.746062ae.js"><link rel="prefetch" href="/assets/js/146.3e99370f.js"><link rel="prefetch" href="/assets/js/147.981d5bae.js"><link rel="prefetch" href="/assets/js/148.6feb1caf.js"><link rel="prefetch" href="/assets/js/149.606b299d.js"><link rel="prefetch" href="/assets/js/15.9179242a.js"><link rel="prefetch" href="/assets/js/150.57f66aa3.js"><link rel="prefetch" href="/assets/js/151.e82ed5b7.js"><link rel="prefetch" href="/assets/js/152.de1c615c.js"><link rel="prefetch" href="/assets/js/153.4c0906bf.js"><link rel="prefetch" href="/assets/js/154.5f1f2309.js"><link rel="prefetch" href="/assets/js/155.2f44369e.js"><link rel="prefetch" href="/assets/js/156.fb853e07.js"><link rel="prefetch" href="/assets/js/157.fc696530.js"><link rel="prefetch" href="/assets/js/158.42305671.js"><link rel="prefetch" href="/assets/js/159.aeeaf452.js"><link rel="prefetch" href="/assets/js/16.39bae875.js"><link rel="prefetch" href="/assets/js/160.97ff0082.js"><link rel="prefetch" href="/assets/js/161.ea02547c.js"><link rel="prefetch" href="/assets/js/162.a7dc58b3.js"><link rel="prefetch" href="/assets/js/163.7de06ea6.js"><link rel="prefetch" href="/assets/js/164.6c7bb19d.js"><link rel="prefetch" href="/assets/js/165.246b1310.js"><link rel="prefetch" href="/assets/js/166.9d473a86.js"><link rel="prefetch" href="/assets/js/167.d6a6946c.js"><link rel="prefetch" href="/assets/js/168.573cc1a2.js"><link rel="prefetch" href="/assets/js/169.dfb815af.js"><link rel="prefetch" href="/assets/js/17.2dafb7c5.js"><link rel="prefetch" href="/assets/js/170.1a4b01b7.js"><link rel="prefetch" href="/assets/js/171.da868f87.js"><link rel="prefetch" href="/assets/js/172.0a41ce61.js"><link rel="prefetch" href="/assets/js/173.b1db7e04.js"><link rel="prefetch" href="/assets/js/174.a2912494.js"><link rel="prefetch" href="/assets/js/175.80b0ff7b.js"><link rel="prefetch" href="/assets/js/176.b286be59.js"><link rel="prefetch" href="/assets/js/177.d477975c.js"><link rel="prefetch" href="/assets/js/178.a9378c73.js"><link rel="prefetch" href="/assets/js/179.f32f6835.js"><link rel="prefetch" href="/assets/js/18.df9528ed.js"><link rel="prefetch" href="/assets/js/180.afb310df.js"><link rel="prefetch" href="/assets/js/181.a1371c07.js"><link rel="prefetch" href="/assets/js/182.481b5a03.js"><link rel="prefetch" href="/assets/js/183.2d51e601.js"><link rel="prefetch" href="/assets/js/184.b6315203.js"><link rel="prefetch" href="/assets/js/185.f4095d2a.js"><link rel="prefetch" href="/assets/js/186.b5705121.js"><link rel="prefetch" href="/assets/js/188.f6fe1716.js"><link rel="prefetch" href="/assets/js/189.d8b79870.js"><link rel="prefetch" href="/assets/js/19.d71955ef.js"><link rel="prefetch" href="/assets/js/190.b4900e0f.js"><link rel="prefetch" href="/assets/js/191.9d4d7995.js"><link rel="prefetch" href="/assets/js/192.0e39272b.js"><link rel="prefetch" href="/assets/js/193.2299fef0.js"><link rel="prefetch" href="/assets/js/194.436e220c.js"><link rel="prefetch" href="/assets/js/195.281dc036.js"><link rel="prefetch" href="/assets/js/196.80d9a49a.js"><link rel="prefetch" href="/assets/js/197.b3cdd2ea.js"><link rel="prefetch" href="/assets/js/198.8a8b48a8.js"><link rel="prefetch" href="/assets/js/199.89b06297.js"><link rel="prefetch" href="/assets/js/20.fbbbb4a2.js"><link rel="prefetch" href="/assets/js/200.4cc8ee97.js"><link rel="prefetch" href="/assets/js/201.fee4bccc.js"><link rel="prefetch" href="/assets/js/202.edc4d5db.js"><link rel="prefetch" href="/assets/js/203.cff86dc2.js"><link rel="prefetch" href="/assets/js/204.f4315fea.js"><link rel="prefetch" href="/assets/js/205.ce8878e1.js"><link rel="prefetch" href="/assets/js/206.d3021ca5.js"><link rel="prefetch" href="/assets/js/207.e5f1bf22.js"><link rel="prefetch" href="/assets/js/208.6ebee4a9.js"><link rel="prefetch" href="/assets/js/209.662e7b6a.js"><link rel="prefetch" href="/assets/js/21.36081b83.js"><link rel="prefetch" href="/assets/js/210.ce2c0b1a.js"><link rel="prefetch" href="/assets/js/211.6f1af69e.js"><link rel="prefetch" href="/assets/js/212.3b9c8e2b.js"><link rel="prefetch" href="/assets/js/213.c848669b.js"><link rel="prefetch" href="/assets/js/214.ee964723.js"><link rel="prefetch" href="/assets/js/215.21cb777c.js"><link rel="prefetch" href="/assets/js/216.7f9215b6.js"><link rel="prefetch" href="/assets/js/217.977f100a.js"><link rel="prefetch" href="/assets/js/218.82177dd7.js"><link rel="prefetch" href="/assets/js/219.19a31121.js"><link rel="prefetch" href="/assets/js/22.a8b3dfb3.js"><link rel="prefetch" href="/assets/js/220.ec30e722.js"><link rel="prefetch" href="/assets/js/221.a3789d03.js"><link rel="prefetch" href="/assets/js/222.9eb5084d.js"><link rel="prefetch" href="/assets/js/223.16bc8621.js"><link rel="prefetch" href="/assets/js/224.07221c79.js"><link rel="prefetch" href="/assets/js/225.bcef2069.js"><link rel="prefetch" href="/assets/js/226.44d55599.js"><link rel="prefetch" href="/assets/js/227.41507cae.js"><link rel="prefetch" href="/assets/js/228.710cc669.js"><link rel="prefetch" href="/assets/js/229.388605e2.js"><link rel="prefetch" href="/assets/js/23.e18c6c6d.js"><link rel="prefetch" href="/assets/js/230.41a44f2b.js"><link rel="prefetch" href="/assets/js/231.30efb2b1.js"><link rel="prefetch" href="/assets/js/232.83aba0c1.js"><link rel="prefetch" href="/assets/js/233.37c29b6e.js"><link rel="prefetch" href="/assets/js/234.69900621.js"><link rel="prefetch" href="/assets/js/235.2f519beb.js"><link rel="prefetch" href="/assets/js/236.b9b6114e.js"><link rel="prefetch" href="/assets/js/237.2a1db7cc.js"><link rel="prefetch" href="/assets/js/238.600f5600.js"><link rel="prefetch" href="/assets/js/239.8be2d1bb.js"><link rel="prefetch" href="/assets/js/24.cd0b391e.js"><link rel="prefetch" href="/assets/js/240.251e8c24.js"><link rel="prefetch" href="/assets/js/241.d43f064c.js"><link rel="prefetch" href="/assets/js/242.86d5eacb.js"><link rel="prefetch" href="/assets/js/243.80963c44.js"><link rel="prefetch" href="/assets/js/244.13652b92.js"><link rel="prefetch" href="/assets/js/245.eb2bce9c.js"><link rel="prefetch" href="/assets/js/246.a8194f0b.js"><link rel="prefetch" href="/assets/js/247.db00d5f1.js"><link rel="prefetch" href="/assets/js/248.14ed39e2.js"><link rel="prefetch" href="/assets/js/249.142eeecc.js"><link rel="prefetch" href="/assets/js/25.ab3e6688.js"><link rel="prefetch" href="/assets/js/250.4590655a.js"><link rel="prefetch" href="/assets/js/251.f29145b6.js"><link rel="prefetch" href="/assets/js/252.c2322d74.js"><link rel="prefetch" href="/assets/js/253.10424c86.js"><link rel="prefetch" href="/assets/js/254.58d56bca.js"><link rel="prefetch" href="/assets/js/255.c5159cc8.js"><link rel="prefetch" href="/assets/js/256.4cb6be49.js"><link rel="prefetch" href="/assets/js/257.75008126.js"><link rel="prefetch" href="/assets/js/258.1f8c2773.js"><link rel="prefetch" href="/assets/js/259.69dba07f.js"><link rel="prefetch" href="/assets/js/26.e6c287b8.js"><link rel="prefetch" href="/assets/js/260.46e86546.js"><link rel="prefetch" href="/assets/js/261.a525bac6.js"><link rel="prefetch" href="/assets/js/262.cf8ad77b.js"><link rel="prefetch" href="/assets/js/263.5ca29a56.js"><link rel="prefetch" href="/assets/js/264.563d42f2.js"><link rel="prefetch" href="/assets/js/265.133d3598.js"><link rel="prefetch" href="/assets/js/266.27779523.js"><link rel="prefetch" href="/assets/js/267.31bcfcb3.js"><link rel="prefetch" href="/assets/js/268.9f0a35d7.js"><link rel="prefetch" href="/assets/js/269.7aa9cb8f.js"><link rel="prefetch" href="/assets/js/27.d2998298.js"><link rel="prefetch" href="/assets/js/270.d550ac18.js"><link rel="prefetch" href="/assets/js/271.072c0c98.js"><link rel="prefetch" href="/assets/js/272.2662f9f7.js"><link rel="prefetch" href="/assets/js/273.15ade875.js"><link rel="prefetch" href="/assets/js/274.4a133ef6.js"><link rel="prefetch" href="/assets/js/275.96345d22.js"><link rel="prefetch" href="/assets/js/276.081ed3d8.js"><link rel="prefetch" href="/assets/js/277.3ab443bb.js"><link rel="prefetch" href="/assets/js/278.34bcd6be.js"><link rel="prefetch" href="/assets/js/279.bd0a94a7.js"><link rel="prefetch" href="/assets/js/28.3b62382f.js"><link rel="prefetch" href="/assets/js/29.ea60709b.js"><link rel="prefetch" href="/assets/js/3.7fe9dcd8.js"><link rel="prefetch" href="/assets/js/30.849ee28c.js"><link rel="prefetch" href="/assets/js/31.70d851a0.js"><link rel="prefetch" href="/assets/js/32.ec64b5a1.js"><link rel="prefetch" href="/assets/js/33.da3a8699.js"><link rel="prefetch" href="/assets/js/34.215b8865.js"><link rel="prefetch" href="/assets/js/35.b2199b5c.js"><link rel="prefetch" href="/assets/js/36.8706ed65.js"><link rel="prefetch" href="/assets/js/37.01581e35.js"><link rel="prefetch" href="/assets/js/38.ae096490.js"><link rel="prefetch" href="/assets/js/39.7a5b29f6.js"><link rel="prefetch" href="/assets/js/4.654a78a2.js"><link rel="prefetch" href="/assets/js/40.f12b20fb.js"><link rel="prefetch" href="/assets/js/41.45c22686.js"><link rel="prefetch" href="/assets/js/42.03c2287d.js"><link rel="prefetch" href="/assets/js/43.d1ec6a2f.js"><link rel="prefetch" href="/assets/js/44.8d124671.js"><link rel="prefetch" href="/assets/js/45.91d492b8.js"><link rel="prefetch" href="/assets/js/46.48b2a256.js"><link rel="prefetch" href="/assets/js/47.45559e22.js"><link rel="prefetch" href="/assets/js/48.3a6edc8d.js"><link rel="prefetch" href="/assets/js/49.214a15d3.js"><link rel="prefetch" href="/assets/js/5.c50a77fe.js"><link rel="prefetch" href="/assets/js/50.4f64b9f1.js"><link rel="prefetch" href="/assets/js/51.988e74d3.js"><link rel="prefetch" href="/assets/js/52.cec08826.js"><link rel="prefetch" href="/assets/js/53.d2406cf6.js"><link rel="prefetch" href="/assets/js/54.7b9f0481.js"><link rel="prefetch" href="/assets/js/55.351fec50.js"><link rel="prefetch" href="/assets/js/56.5a4a0b96.js"><link rel="prefetch" href="/assets/js/57.21798229.js"><link rel="prefetch" href="/assets/js/58.b5c5745f.js"><link rel="prefetch" href="/assets/js/59.fe0e4afa.js"><link rel="prefetch" href="/assets/js/6.cc995097.js"><link rel="prefetch" href="/assets/js/60.e653cff0.js"><link rel="prefetch" href="/assets/js/61.c85d235a.js"><link rel="prefetch" href="/assets/js/62.699a95f2.js"><link rel="prefetch" href="/assets/js/63.a17696d7.js"><link rel="prefetch" href="/assets/js/64.742a9eb5.js"><link rel="prefetch" href="/assets/js/65.6d300178.js"><link rel="prefetch" href="/assets/js/66.86cef7aa.js"><link rel="prefetch" href="/assets/js/67.796d125c.js"><link rel="prefetch" href="/assets/js/68.b3c2d220.js"><link rel="prefetch" href="/assets/js/69.07795e0e.js"><link rel="prefetch" href="/assets/js/7.c7d43652.js"><link rel="prefetch" href="/assets/js/70.3854d9b8.js"><link rel="prefetch" href="/assets/js/71.d66f2b34.js"><link rel="prefetch" href="/assets/js/72.1350fee4.js"><link rel="prefetch" href="/assets/js/73.a3dded61.js"><link rel="prefetch" href="/assets/js/74.74f0bfff.js"><link rel="prefetch" href="/assets/js/75.4ec95ff3.js"><link rel="prefetch" href="/assets/js/76.1f00db96.js"><link rel="prefetch" href="/assets/js/77.a9d9378a.js"><link rel="prefetch" href="/assets/js/78.a7ddad0d.js"><link rel="prefetch" href="/assets/js/79.46324233.js"><link rel="prefetch" href="/assets/js/8.f0e74718.js"><link rel="prefetch" href="/assets/js/80.801cf0a4.js"><link rel="prefetch" href="/assets/js/81.546e27d2.js"><link rel="prefetch" href="/assets/js/82.d91ad6e6.js"><link rel="prefetch" href="/assets/js/83.fa6487b0.js"><link rel="prefetch" href="/assets/js/84.52dea52e.js"><link rel="prefetch" href="/assets/js/85.68419534.js"><link rel="prefetch" href="/assets/js/86.075c2556.js"><link rel="prefetch" href="/assets/js/87.76c9b596.js"><link rel="prefetch" href="/assets/js/88.030619a8.js"><link rel="prefetch" href="/assets/js/89.cf9cfa28.js"><link rel="prefetch" href="/assets/js/9.2ff272e7.js"><link rel="prefetch" href="/assets/js/90.d95a8854.js"><link rel="prefetch" href="/assets/js/91.c54d7493.js"><link rel="prefetch" href="/assets/js/92.2c3257eb.js"><link rel="prefetch" href="/assets/js/93.b952455a.js"><link rel="prefetch" href="/assets/js/94.4b40b489.js"><link rel="prefetch" href="/assets/js/95.26f010a2.js"><link rel="prefetch" href="/assets/js/96.b2776f09.js"><link rel="prefetch" href="/assets/js/97.d1c685d8.js"><link rel="prefetch" href="/assets/js/98.e1e97635.js"><link rel="prefetch" href="/assets/js/99.9f5d62e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7df12f51.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Xuli's blog" class="logo"> <span class="site-name can-hide">Xuli's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a0cca8/404" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/pages/a0cca8/404" class="nav-link">学习笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wenxuli/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/images/character.png"> <div class="blogger-info"><h3>Xuli</h3> <span>前端界的小白</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a0cca8/404" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/pages/a0cca8/404" class="nav-link">学习笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wenxuli/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/categories/?category=%E3%80%8AElectron%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E3%80%8B" title="分类" data-v-1baff76c>《Electron中文文档》</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/wenxuli2" target="_blank" title="作者" class="beLink" data-v-1baff76c>Xuli</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2022-04-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">breaking-changes<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="重大更改"><a href="#重大更改" class="header-anchor">#</a> 重大更改</h1> <p>这里将记录重大更改,并在可能的情况下向JS代码添加弃用警告,在这更改之前至少会有<a href="/《Electron中文文档》/tutorial/electron-versioning.html#semver">一个重要版本</a>.</p> <h3 id="重大更改的类型"><a href="#重大更改的类型" class="header-anchor">#</a> 重大更改的类型</h3> <p>本文档使用以下约定对重大更改进行分类：</p> <ul><li>**API 更改：**已更改的 API 会以某种方式使未更新的代码必定抛出异常。</li> <li>**行为改变：**Electron 的行为已经改变，但并不一定抛出相应的异常。</li> <li>**默认值更改：**依赖于默认值的代码的行为可能被破坏，但不保证会抛出相应的异常。 您可以通过显式指定该值的方式恢复旧的默认行为。</li> <li>**已废弃：**该 API 已标记为废弃。 该 API 依旧可正常运作，但会抛出已废弃警告，并在将来会移除。</li> <li>**已移除：**该 API 或功能已移除，Electron团队不再对此提供支持。</li></ul> <h2 id="计划重写的-api-14-0"><a href="#计划重写的-api-14-0" class="header-anchor">#</a> 计划重写的 API (14.0)</h2> <h3 id="removed-remote-module"><a href="#removed-remote-module" class="header-anchor">#</a> Removed: <code>remote</code> module</h3> <p>The <code>remote</code> module was deprecated in Electron 12, and will be removed in Electron 14. 由<a href="https://github.com/electron/remote" target="_blank" rel="noopener noreferrer"><code>@electronic/remote</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 模块替代。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated in Electron 12:</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 替换为：</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@electron/remote'</span><span class="token punctuation">)</span>

<span class="token comment">// 在主进程中：</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@electron/remote/main'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="已移除-app-allowrendererprocessreuse"><a href="#已移除-app-allowrendererprocessreuse" class="header-anchor">#</a> 已移除： <code>app.allowRendererProcessReuse</code></h3> <p>The <code>app.allowRendererProcessReuse</code> property will be removed as part of our plan to more closely align with Chromium's process model for security, performance and maintainability.</p> <p>For more detailed information see <a href="https://github.com/electron/electron/issues/18397" target="_blank" rel="noopener noreferrer">#18397<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="removed-browser-window-affinity"><a href="#removed-browser-window-affinity" class="header-anchor">#</a> Removed: Browser Window Affinity</h3> <p>The <code>affinity</code> option when constructing a new <code>BrowserWindow</code> will be removed as part of our plan to more closely align with Chromium's process model for security, performance and maintainability.</p> <p>For more detailed information see <a href="https://github.com/electron/electron/issues/18397" target="_blank" rel="noopener noreferrer">#18397<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="api-更改-window-open"><a href="#api-更改-window-open" class="header-anchor">#</a> API 更改： <code>window.open()</code></h3> <p>可选参数 <code>frameName</code> 将不再设置窗口的标题。 该功能现在遵循 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open#parameters" target="_blank" rel="noopener noreferrer">原生文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的约束，由名为 <code>windowName</code> 的参数控制。</p> <p>若您之前使用了该参数用于设置窗口标题，您可以转而使用 <a href="/《Electron中文文档》/api/browser-window.html#winsettitletitle">win.setTitle(title)</a>。</p> <h3 id="已移除-worldsafeexecutejavascript"><a href="#已移除-worldsafeexecutejavascript" class="header-anchor">#</a> 已移除： <code>worldSafeExecuteJavaScript</code></h3> <p>在 Electron 14, <code>worldSafeExecuteJavaScript</code> 将被移除。  除此之外没有其他方式，请保证您的代码中包含该属性。  Electron 12中默认启用该属性。
12.</p> <p>若您使用了 <code>webFrame.executeJavaScript</code> 或 <code>webFrame.executeJavaScriptInIsolatedWorld</code>，这个改动会对您造成影响。 您需要保证 <a href="/《Electron中文文档》/api/context-bridge.html#parameter--error--return-type-support">Context Bridge API</a> 支持这些方法的返回值，因为这些方法使用相同的值传递语义。</p> <h3 id="默认更改-nativewindowopen-默认为-true"><a href="#默认更改-nativewindowopen-默认为-true" class="header-anchor">#</a> 默认更改： <code>nativeWindowOpen</code> 默认为 <code>true</code></h3> <p>Prior to Electron 14, <code>window.open</code> was by default shimmed to use <code>BrowserWindowProxy</code>. This meant that <code>window.open('about:blank')</code> did not work to open synchronously scriptable child windows, among other incompatibilities. <code>nativeWindowOpen</code> is no longer experimental, and is now the default.</p> <p>See the documentation for <a href="/《Electron中文文档》/api/window-open.html">window.open in Electron</a> for more details.</p> <h3 id="removed-browserwindowconstructoroptions-inheriting-from-parent-windows"><a href="#removed-browserwindowconstructoroptions-inheriting-from-parent-windows" class="header-anchor">#</a> Removed: BrowserWindowConstructorOptions inheriting from parent windows</h3> <p>Prior to Electron 14, windows opened with <code>window.open</code> would inherit BrowserWindow constructor options such as <code>transparent</code> and <code>resizable</code> from their parent window. Beginning with Electron 14, this behavior is removed, and windows will not inherit any BrowserWindow constructor options from their parents.</p> <p>Instead, explicitly set options for the new window with <code>setWindowOpenHandler</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>webContents<span class="token punctuation">.</span><span class="token function">setWindowOpenHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'allow'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">overrideBrowserWindowOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="已移除-additionalfeatures"><a href="#已移除-additionalfeatures" class="header-anchor">#</a> 已移除： <code>additionalFeatures</code></h3> <p>The deprecated <code>additionalFeatures</code> property in the <code>new-window</code> and <code>did-create-window</code> events of WebContents has been removed. Since <code>new-window</code> uses positional arguments, the argument is still present, but will always be the empty array <code>[]</code>. (Though note, the <code>new-window</code> event itself is deprecated, and is replaced by <code>setWindowOpenHandler</code>.) Bare keys in window features will now present as keys with the value <code>true</code> in the options object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Removed in Electron 14</span>
<span class="token comment">// Triggered by window.open('...', '', 'my-key')</span>
webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'did-create-window'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>details<span class="token punctuation">.</span>additionalFeatures<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'my-key'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Replace with</span>
webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'did-create-window'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>details<span class="token punctuation">.</span>options<span class="token punctuation">[</span><span class="token string">'my-key'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="计划重写的-api-13-0"><a href="#计划重写的-api-13-0" class="header-anchor">#</a> 计划重写的 API (13.0)</h2> <h3 id="api-更改-session-setpermissioncheckhandler-handler"><a href="#api-更改-session-setpermissioncheckhandler-handler" class="header-anchor">#</a> API 更改： <code>session.setPermissionCheckHandler(handler)</code></h3> <p><code>handler</code> 方法的第一个参数曾是 <code>webContents</code>，但现在可以为 <code>null</code>。  为正确响应权限检查，您需要使用<code>requestingOrigin</code>、<code>embeddingOrigin</code> 和 <code>securityOrigin</code> 这些属性。  因为 <code>webContents</code> 现在可能为 <code>null</code>，您不应当依赖此参数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 旧代码</span>
session<span class="token punctuation">.</span><span class="token function">setPermissionCheckHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>webContents<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'https://google.com/'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> permission <span class="token operator">===</span> <span class="token string">'notification'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 变更为</span>
session<span class="token punctuation">.</span><span class="token function">setPermissionCheckHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission<span class="token punctuation">,</span> requestingOrigin</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>requestingOrigin<span class="token punctuation">)</span><span class="token punctuation">.</span>hostname <span class="token operator">===</span> <span class="token string">'google.com'</span> <span class="token operator">&amp;&amp;</span> permission <span class="token operator">===</span> <span class="token string">'notification'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="已移除-shell-moveitemtotrash"><a href="#已移除-shell-moveitemtotrash" class="header-anchor">#</a> 已移除： <code>shell.moveItemToTrash()</code></h3> <p>已废弃的同步方法 <code>shell.moveItemToTrash()</code> 已移除。 作为替代，您应当使用异步的 <code>shell.trashItem()</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 13 移除</span>
shell<span class="token punctuation">.</span><span class="token function">moveItemToTrash</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
shell<span class="token punctuation">.</span><span class="token function">trashItem</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="已移除-browserwindow-扩展-api"><a href="#已移除-browserwindow-扩展-api" class="header-anchor">#</a> 已移除： <code>BrowserWindow</code> 扩展 API</h3> <p>移除已弃用的扩展 API：</p> <ul><li><code>BrowserWindow.addExtension(path)</code></li> <li><code>BrowserWindow.addDevToolsExtension(path)</code></li> <li><code>BrowserWindow.removeExtension(name)</code></li> <li><code>BrowserWindow.removeDevToolsExtension(name)</code></li> <li><code>BrowserWindow.getExtensions()</code></li> <li><code>BrowserWindow.getDevToolsExtensions()</code></li></ul> <p>改为使用 session API：</p> <ul><li><code>ses.loadExtension(path)</code></li> <li><code>ses.removeExtension(extension_id)</code></li> <li><code>ses.getAllExtensions()</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 13 移除</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">addDevToolsExtension</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">loadExtension</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 13 移除</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">removeExtension</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">removeDevToolsExtension</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">removeExtension</span><span class="token punctuation">(</span>extension_id<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 13 移除</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">getExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">getDevToolsExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">getAllExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="已移除-systempreferences-中的方法"><a href="#已移除-systempreferences-中的方法" class="header-anchor">#</a> 已移除： <code>systemPreferences</code> 中的方法</h3> <p><code>systemPreferences</code> 方法已经被废弃：</p> <ul><li><code>systemPreferences.isDarkMode()</code></li> <li><code>systemPreferences.isInvertedColorScheme()</code></li> <li><code>systemPreferences.isHighContrastColorScheme()</code></li></ul> <p>使用 <code>nativeTheme</code> 属性作为替代：</p> <ul><li><code>nativeTheme.shouldUseDarkColors</code></li> <li><code>nativeTheme.shouldUseInvertedColorScheme</code></li> <li><code>nativeTheme.shouldUseHighContrastColors</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 13 移除</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">isDarkMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeTheme<span class="token punctuation">.</span>shouldUseDarkColors

<span class="token comment">// 在 Electron 13 移除</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">isInvertedColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeTheme<span class="token punctuation">.</span>shouldUseInvertedColorScheme

<span class="token comment">// 在 Electron 13 移除</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">isHighContrastColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeTheme<span class="token punctuation">.</span>shouldUseHighContrastColors
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="已废弃-webcontents-new-window-事件"><a href="#已废弃-webcontents-new-window-事件" class="header-anchor">#</a> 已废弃: WebContents <code>new-window</code> 事件</h3> <p>WebContents 中的 <code>new-window</code> 事件已经被废弃。 已弃用：<a href="/《Electron中文文档》/api/web-contents.html#contentssetwindowopenhandlerhandler"><code>webContents.setWindowOpenHandler()</code></a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 13 废弃</span>
webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'new-window'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 替换为</span>
webContents<span class="token punctuation">.</span><span class="token function">setWindowOpenHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'deny'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="计划重写的-api-12-0"><a href="#计划重写的-api-12-0" class="header-anchor">#</a> 计划重写的 API (12.0)</h2> <h3 id="已移除-pepper-flash-支持"><a href="#已移除-pepper-flash-支持" class="header-anchor">#</a> 已移除：Pepper Flash 支持</h3> <p>Chromium 已经取消了对Flash的支持，因此我们必须效仿。 更多详细信息，请参阅 Chromium 的 <a href="https://www.chromium.org/flash-roadmap" target="_blank" rel="noopener noreferrer"> Flash Roadmap<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="默认更改-worldsafeexecutejavascript-默认为-true"><a href="#默认更改-worldsafeexecutejavascript-默认为-true" class="header-anchor">#</a> 默认更改： <code>worldSafeExecuteJavaScript</code> 默认为 <code>true</code></h3> <p>在 Electron 12, <code>worldSafeExecuteJavaScript</code> 将默认启用。  要恢复 上一个行为， <code>worldSafeExecuteJavaScript: false</code> 必须在 Web 首选项中指定。 请注意，设置此选项为 <code>false</code> 是<strong>不安全</strong>的。</p> <p>此选项将在 Electron 14 中删除，所以请迁移您的代码以支持默认 值。</p> <h3 id="默认更改-contextisolation-默认为-true"><a href="#默认更改-contextisolation-默认为-true" class="header-anchor">#</a> 默认更改： <code>contextIsolation</code> 默认为 <code>true</code></h3> <p>在 Electron 12, <code>contextIsolation</code> 将默认启用。  要恢复 上一个行为， <code>contextIsolation: false</code> 必须在 Web 首选项中指定。</p> <p>我们 <a href="/《Electron中文文档》/tutorial/security.html#3-enable-context-isolation-for-remote-content">建议启用contextIsolation</a> ，以保证您的应用程序的安全性。</p> <p>Another implication is that <code>require()</code> cannot be used in the renderer process unless <code>nodeIntegration</code> is <code>true</code> and <code>contextIsolation</code> is <code>false</code>.</p> <p>更多信息请参阅：https://github.com/electron/electron/issues/23506</p> <h3 id="已移除-crashreporter-getcrashesdirectory"><a href="#已移除-crashreporter-getcrashesdirectory" class="header-anchor">#</a> 已移除： <code>crashReporter.getCrashesDirectory()</code></h3> <p><code>crashReporter.getCrashesDirectory</code> 方法已被删除。 这个方法 应该被 <code>app.getPath('crashDumps')</code>替换。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 12 移除</span>
crashReporter<span class="token punctuation">.</span><span class="token function">getCrashesDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
app<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token string">'crashDumps'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="removed-crashreporter-methods-in-the-renderer-process"><a href="#removed-crashreporter-methods-in-the-renderer-process" class="header-anchor">#</a> Removed: <code>crashReporter</code> methods in the renderer process</h3> <p><code>crashReporter</code> 方法在渲染进程中不再能使用：</p> <ul><li><code>crashReporter.start</code></li> <li><code>crashReporter.getLastCrashReport</code></li> <li><code>crashReporter.getUploadedReports</code></li> <li><code>crashReporter.getUploadToServer</code></li> <li><code>crashReporter.setUploadToServer</code></li> <li><code>crashReporter.getCrashesDirectory</code></li></ul> <p>它们只应从主要进程中调用。</p> <p>更多详细信息请访问 <a href="https://github.com/electron/electron/pull/23265" target="_blank" rel="noopener noreferrer">#23265<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="default-changed-crashreporter-start-compress-true"><a href="#default-changed-crashreporter-start-compress-true" class="header-anchor">#</a> Default Changed: <code>crashReporter.start({ compress: true })</code></h3> <p>The default value of the <code>compress</code> option to <code>crashReporter.start</code> has changed from <code>false</code> to <code>true</code>. This means that crash dumps will be uploaded to the crash ingestion server with the <code>Content-Encoding: gzip</code> header, and the body will be compressed.</p> <p>If your crash ingestion server does not support compressed payloads, you can turn off compression by specifying <code>{ compress: false }</code> in the crash reporter options.</p> <h3 id="已废弃-remote-模块"><a href="#已废弃-remote-模块" class="header-anchor">#</a> 已废弃： <code>remote</code> 模块</h3> <p><code>remote</code> 模块在 Electron 12 废弃，并将在 Electron 14 被移除 由<a href="https://github.com/electron/remote" target="_blank" rel="noopener noreferrer"><code>@electronic/remote</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 模块替代。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated in Electron 12:</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 替换为：</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@electron/remote'</span><span class="token punctuation">)</span>

<span class="token comment">// 在主进程中：</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@electron/remote/main'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="已废弃-shell-moveitemtotrash"><a href="#已废弃-shell-moveitemtotrash" class="header-anchor">#</a> 已废弃：<code>shell.moveItemToTrash()</code></h3> <p>The synchronous <code>shell.moveItemToTrash()</code> has been replaced by the new, asynchronous <code>shell.trashItem()</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 12 废弃</span>
shell<span class="token punctuation">.</span><span class="token function">moveItemToTrash</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
shell<span class="token punctuation">.</span><span class="token function">trashItem</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="计划重写的-api-11-0"><a href="#计划重写的-api-11-0" class="header-anchor">#</a> 计划重写的 API (11.0)</h2> <h3 id="removed-browserview-destroy-fromid-fromwebcontents-getallviews-and-id-property-of-browserview"><a href="#removed-browserview-destroy-fromid-fromwebcontents-getallviews-and-id-property-of-browserview" class="header-anchor">#</a> Removed: <code>BrowserView.{destroy, fromId, fromWebContents, getAllViews}</code> and <code>id</code> property of <code>BrowserView</code></h3> <p>The experimental APIs <code>BrowserView.{destroy, fromId, fromWebContents, getAllViews}</code> have now been removed. Additionally, the <code>id</code> property of <code>BrowserView</code> has also been removed.</p> <p>For more detailed information, see <a href="https://github.com/electron/electron/pull/23578" target="_blank" rel="noopener noreferrer">#23578<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="计划重写的-api-10-0"><a href="#计划重写的-api-10-0" class="header-anchor">#</a> 计划重写的 API (10.0)</h2> <h3 id="deprecated-companyname-argument-to-crashreporter-start"><a href="#deprecated-companyname-argument-to-crashreporter-start" class="header-anchor">#</a> Deprecated: <code>companyName</code> argument to <code>crashReporter.start()</code></h3> <p>The <code>companyName</code> argument to <code>crashReporter.start()</code>, which was previously required, is now optional, and further, is deprecated. To get the same behavior in a non-deprecated way, you can pass a <code>companyName</code> value in <code>globalExtra</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated in Electron 10</span>
crashReporter<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">companyName</span><span class="token operator">:</span> <span class="token string">'Umbrella Corporation'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
crashReporter<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">globalExtra</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">_companyName</span><span class="token operator">:</span> <span class="token string">'Umbrella Corporation'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="已废弃-crashreporter-getcrashesdirectory"><a href="#已废弃-crashreporter-getcrashesdirectory" class="header-anchor">#</a> 已废弃：<code>crashReporter.getCrashesDirectory()</code></h3> <p>The <code>crashReporter.getCrashesDirectory</code> method has been deprecated. 这个方法 应该被 <code>app.getPath('crashDumps')</code>替换。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated in Electron 10</span>
crashReporter<span class="token punctuation">.</span><span class="token function">getCrashesDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
app<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token string">'crashDumps'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="已废弃-渲染进程中的-crashreporter-方法"><a href="#已废弃-渲染进程中的-crashreporter-方法" class="header-anchor">#</a> 已废弃：渲染进程中的 <code>crashReporter</code> 方法</h3> <p>Calling the following <code>crashReporter</code> methods from the renderer process is deprecated:</p> <ul><li><code>crashReporter.start</code></li> <li><code>crashReporter.getLastCrashReport</code></li> <li><code>crashReporter.getUploadedReports</code></li> <li><code>crashReporter.getUploadToServer</code></li> <li><code>crashReporter.setUploadToServer</code></li> <li><code>crashReporter.getCrashesDirectory</code></li></ul> <p>The only non-deprecated methods remaining in the <code>crashReporter</code> module in the renderer are <code>addExtraParameter</code>, <code>removeExtraParameter</code> and <code>getParameters</code>.</p> <p>当从主要进程调用时，上述所有方法均未被弃用。</p> <p>更多详细信息请访问 <a href="https://github.com/electron/electron/pull/23265" target="_blank" rel="noopener noreferrer">#23265<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="已废弃-crashreporter-start-compress-false"><a href="#已废弃-crashreporter-start-compress-false" class="header-anchor">#</a> 已废弃：<code>crashReporter.start({ compress: false })</code></h3> <p>Setting <code>{ compress: false }</code> in <code>crashReporter.start</code> is deprecated. Nearly all crash ingestion servers support gzip compression. 此选项将在未来版本的 Electron 中删除。</p> <h3 id="默认更改-enableremotemodule-默认为-false"><a href="#默认更改-enableremotemodule-默认为-false" class="header-anchor">#</a> 默认更改： <code>enableRemoteModule</code> 默认为 <code>false</code></h3> <p>In Electron 9, using the remote module without explicitly enabling it via the <code>enableRemoteModule</code> WebPreferences option began emitting a warning. In Electron 10, the remote module is now disabled by default. To use the remote module, <code>enableRemoteModule: true</code> must be specified in WebPreferences:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">enableRemoteModule</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>We <a href="https://medium.com/@nornagon/electrons-remote-module-considered-harmful-70d69500f31" target="_blank" rel="noopener noreferrer">recommend moving away from the remote module<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="protocol-unregisterprotocol"><a href="#protocol-unregisterprotocol" class="header-anchor">#</a> <code>protocol.unregisterProtocol</code></h3> <h3 id="protocol-uninterceptprotocol"><a href="#protocol-uninterceptprotocol" class="header-anchor">#</a> <code>protocol.uninterceptProtocol</code></h3> <p>这些 APIs 现在是同步的，不再需要可选的回调。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Deprecated</span>
protocol<span class="token punctuation">.</span><span class="token function">unregisterProtocol</span><span class="token punctuation">(</span>scheme<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
protocol<span class="token punctuation">.</span><span class="token function">unregisterProtocol</span><span class="token punctuation">(</span>scheme<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="protocol-registerfileprotocol"><a href="#protocol-registerfileprotocol" class="header-anchor">#</a> <code>protocol.registerFileProtocol</code></h3> <h3 id="protocol-registerbufferprotocol"><a href="#protocol-registerbufferprotocol" class="header-anchor">#</a> <code>protocol.registerBufferProtocol</code></h3> <h3 id="protocol-registerstringprotocol"><a href="#protocol-registerstringprotocol" class="header-anchor">#</a> <code>protocol.registerStringProtocol</code></h3> <h3 id="protocol-registerhttpprotocol"><a href="#protocol-registerhttpprotocol" class="header-anchor">#</a> <code>protocol.registerHttpProtocol</code></h3> <h3 id="protocol-registerstreamprotocol"><a href="#protocol-registerstreamprotocol" class="header-anchor">#</a> <code>protocol.registerStreamProtocol</code></h3> <h3 id="protocol-interceptfileprotocol"><a href="#protocol-interceptfileprotocol" class="header-anchor">#</a> <code>protocol.interceptFileProtocol</code></h3> <h3 id="protocol-interceptstringprotocol"><a href="#protocol-interceptstringprotocol" class="header-anchor">#</a> <code>protocol.interceptStringProtocol</code></h3> <h3 id="protocol-interceptbufferprotocol"><a href="#protocol-interceptbufferprotocol" class="header-anchor">#</a> <code>protocol.interceptBufferProtocol</code></h3> <h3 id="protocol-intercepthttpprotocol"><a href="#protocol-intercepthttpprotocol" class="header-anchor">#</a> <code>protocol.interceptHttpProtocol</code></h3> <h3 id="protocol-interceptstreamprotocol"><a href="#protocol-interceptstreamprotocol" class="header-anchor">#</a> <code>protocol.interceptStreamProtocol</code></h3> <p>这些 APIs 现在是同步的，不再需要可选的回调。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 已废弃</span>
protocol<span class="token punctuation">.</span><span class="token function">registerFileProtocol</span><span class="token punctuation">(</span>scheme<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
protocol<span class="token punctuation">.</span><span class="token function">registerFileProtocol</span><span class="token punctuation">(</span>scheme<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The registered or intercepted protocol does not have effect on current page until navigation happens.</p> <h3 id="protocol-isprotocolhandled"><a href="#protocol-isprotocolhandled" class="header-anchor">#</a> <code>protocol.isProtocolHandled</code></h3> <p>This API is deprecated and users should use <code>protocol.isProtocolRegistered</code> and <code>protocol.isProtocolIntercepted</code> instead.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Deprecated</span>
protocol<span class="token punctuation">.</span><span class="token function">isProtocolHandled</span><span class="token punctuation">(</span>scheme<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
<span class="token keyword">const</span> isRegistered <span class="token operator">=</span> protocol<span class="token punctuation">.</span><span class="token function">isProtocolRegistered</span><span class="token punctuation">(</span>scheme<span class="token punctuation">)</span>
<span class="token keyword">const</span> isIntercepted <span class="token operator">=</span> protocol<span class="token punctuation">.</span><span class="token function">isProtocolIntercepted</span><span class="token punctuation">(</span>scheme<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="计划重写的-api-9-0"><a href="#计划重写的-api-9-0" class="header-anchor">#</a> 计划重写的 API (9.0)</h2> <h3 id="default-changed-loading-non-context-aware-native-modules-in-the-renderer-process-is-disabled-by-default"><a href="#default-changed-loading-non-context-aware-native-modules-in-the-renderer-process-is-disabled-by-default" class="header-anchor">#</a> Default Changed: Loading non-context-aware native modules in the renderer process is disabled by default</h3> <p>As of Electron 9 we do not allow loading of non-context-aware native modules in the renderer process.  This is to improve security, performance and maintainability of Electron as a project.</p> <p>If this impacts you, you can temporarily set <code>app.allowRendererProcessReuse</code> to <code>false</code> to revert to the old behavior.  This flag will only be an option until Electron 11 so you should plan to update your native modules to be context aware.</p> <p>For more detailed information see <a href="https://github.com/electron/electron/issues/18397" target="_blank" rel="noopener noreferrer">#18397<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="已废弃-browserwindow-扩展-api"><a href="#已废弃-browserwindow-扩展-api" class="header-anchor">#</a> 已废弃： <code>BrowserWindow</code> 扩展 API</h3> <p>以下扩展 APIs 已废弃:</p> <ul><li><code>BrowserWindow.addExtension(path)</code></li> <li><code>BrowserWindow.addDevToolsExtension(path)</code></li> <li><code>BrowserWindow.removeExtension(name)</code></li> <li><code>BrowserWindow.removeDevToolsExtension(name)</code></li> <li><code>BrowserWindow.getExtensions()</code></li> <li><code>BrowserWindow.getDevToolsExtensions()</code></li></ul> <p>改为使用 session API：</p> <ul><li><code>ses.loadExtension(path)</code></li> <li><code>ses.removeExtension(extension_id)</code></li> <li><code>ses.getAllExtensions()</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 9 废弃</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">addDevToolsExtension</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">loadExtension</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 9 废弃</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">removeExtension</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">removeDevToolsExtension</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">removeExtension</span><span class="token punctuation">(</span>extension_id<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 9 废弃</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">getExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
BrowserWindow<span class="token punctuation">.</span><span class="token function">getDevToolsExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">getAllExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="已移除-webview-getwebcontents"><a href="#已移除-webview-getwebcontents" class="header-anchor">#</a> 已移除： <code>&lt;webview&gt;.getWebContents()</code></h3> <p>此API在 Electron 8.0中被废弃，现已删除。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在 Electron 9.0 移除</span>
webview<span class="token punctuation">.</span><span class="token function">getWebContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> remote <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
remote<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span>webview<span class="token punctuation">.</span><span class="token function">getWebContentsId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="已移除-webframe-setlayoutzoomlevellimits"><a href="#已移除-webframe-setlayoutzoomlevellimits" class="header-anchor">#</a> 已移除： <code>webFrame.setLayoutZoomLevelLimits()</code></h3> <p>Chromium has removed support for changing the layout zoom level limits, and it is beyond Electron's capacity to maintain it. 函数在 Electron 8.x 废弃，并将在 Electron 9.x 被移除。 The layout zoom level limits are now fixed at a minimum of 0.25 and a maximum of 5.0, as defined <a href="https://chromium.googlesource.com/chromium/src/+/938b37a6d2886bf8335fc7db792f1eb46c65b2ae/third_party/blink/common/page/page_zoom.cc#11" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="behavior-changed-sending-non-js-objects-over-ipc-now-throws-an-exception"><a href="#behavior-changed-sending-non-js-objects-over-ipc-now-throws-an-exception" class="header-anchor">#</a> Behavior Changed: Sending non-JS objects over IPC now throws an exception</h3> <p>In Electron 8.0, IPC was changed to use the Structured Clone Algorithm, bringing significant performance improvements. To help ease the transition, the old IPC serialization algorithm was kept and used for some objects that aren't serializable with Structured Clone. In particular, DOM objects (e.g. <code>Element</code>, <code>Location</code> and <code>DOMMatrix</code>), Node.js objects backed by C++ classes (e.g. <code>process.env</code>, some members of <code>Stream</code>), and Electron objects backed by C++ classes (e.g. <code>WebContents</code>, <code>BrowserWindow</code> and <code>WebFrame</code>) are not serializable with Structured Clone. Whenever the old algorithm was invoked, a deprecation warning was printed.</p> <p>In Electron 9.0, the old serialization algorithm has been removed, and sending such non-serializable objects will now throw an &quot;object could not be cloned&quot; error.</p> <h3 id="api-changed-shell-openitem-is-now-shell-openpath"><a href="#api-changed-shell-openitem-is-now-shell-openpath" class="header-anchor">#</a> API Changed: <code>shell.openItem</code> is now <code>shell.openPath</code></h3> <p>The <code>shell.openItem</code> API has been replaced with an asynchronous <code>shell.openPath</code> API. You can see the original API proposal and reasoning <a href="https://github.com/electron/governance/blob/main/wg-api/spec-documents/shell-openitem.md" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="计划重写的-api-8-0"><a href="#计划重写的-api-8-0" class="header-anchor">#</a> 计划重写的 API (8.0)</h2> <h3 id="behavior-changed-values-sent-over-ipc-are-now-serialized-with-structured-clone-algorithm"><a href="#behavior-changed-values-sent-over-ipc-are-now-serialized-with-structured-clone-algorithm" class="header-anchor">#</a> Behavior Changed: Values sent over IPC are now serialized with Structured Clone Algorithm</h3> <p>The algorithm used to serialize objects sent over IPC (through <code>ipcRenderer.send</code>, <code>ipcRenderer.sendSync</code>, <code>WebContents.send</code> and related methods) has been switched from a custom algorithm to V8's built-in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noopener noreferrer">Structured Clone Algorithm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, the same algorithm used to serialize messages for <code>postMessage</code>. This brings about a 2x performance improvement for large messages, but also brings some breaking changes in behavior.</p> <ul><li>Sending Functions, Promises, WeakMaps, WeakSets, or objects containing any such values, over IPC will now throw an exception, instead of silently converting the functions to <code>undefined</code>.</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Previously:</span>
ipcRenderer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'channel'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function-variable function">someFunction</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; results in { value: 3 } arriving in the main process</span>

<span class="token comment">// From Electron 8:</span>
ipcRenderer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'channel'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function-variable function">someFunction</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; throws Error(&quot;() =&gt; {} could not be cloned.&quot;)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>NaN</code>, <code>Infinity</code> and <code>-Infinity</code> will now be correctly serialized, instead of being converted to <code>null</code>.</li> <li>Objects containing cyclic references will now be correctly serialized, instead of being converted to <code>null</code>.</li> <li><code>Set</code>, <code>Map</code>, <code>Error</code> and <code>RegExp</code> values will be correctly serialized, instead of being converted to <code>{}</code>.</li> <li><code>BigInt</code> values will be correctly serialized, instead of being converted to <code>null</code>.</li> <li>Sparse arrays will be serialized as such, instead of being converted to dense arrays with <code>null</code>s.</li> <li><code>Date</code> objects will be transferred as <code>Date</code> objects, instead of being converted to their ISO string representation.</li> <li>Typed Arrays (such as <code>Uint8Array</code>, <code>Uint16Array</code>, <code>Uint32Array</code> and so on) will be transferred as such, instead of being converted to Node.js <code>Buffer</code>.</li> <li>Node.js <code>Buffer</code> objects will be transferred as <code>Uint8Array</code>s. You can convert a <code>Uint8Array</code> back to a Node.js <code>Buffer</code> by wrapping the underlying <code>ArrayBuffer</code>:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> value<span class="token punctuation">.</span>byteOffset<span class="token punctuation">,</span> value<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Sending any objects that aren't native JS types, such as DOM objects (e.g. <code>Element</code>, <code>Location</code>, <code>DOMMatrix</code>), Node.js objects (e.g. <code>process.env</code>, <code>Stream</code>), or Electron objects (e.g. <code>WebContents</code>, <code>BrowserWindow</code>, <code>WebFrame</code>) is deprecated. In Electron 8, these objects will be serialized as before with a DeprecationWarning message, but starting in Electron 9, sending these kinds of objects will throw a 'could not be cloned' error.</p> <h3 id="已废弃-webview-getwebcontents"><a href="#已废弃-webview-getwebcontents" class="header-anchor">#</a> 已废弃： <code>&lt;webview&gt;.getWebContents()</code></h3> <p>This API is implemented using the <code>remote</code> module, which has both performance and security implications. Therefore its usage should be explicit.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
webview<span class="token punctuation">.</span><span class="token function">getWebContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> remote <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
remote<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span>webview<span class="token punctuation">.</span><span class="token function">getWebContentsId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>However, it is recommended to avoid using the <code>remote</code> module altogether.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcMain<span class="token punctuation">,</span> webContents <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">getGuestForWebContents</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">webContentsId<span class="token punctuation">,</span> contents</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> guest <span class="token operator">=</span> webContents<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span>webContentsId<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>guest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid webContentsId: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>webContentsId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>guest<span class="token punctuation">.</span>hostWebContents <span class="token operator">!==</span> contents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Access denied to webContents'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> guest
<span class="token punctuation">}</span>

ipcMain<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">'openDevTools'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> webContentsId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> guest <span class="token operator">=</span> <span class="token function">getGuestForWebContents</span><span class="token punctuation">(</span>webContentsId<span class="token punctuation">,</span> event<span class="token punctuation">.</span>sender<span class="token punctuation">)</span>
  guest<span class="token punctuation">.</span><span class="token function">openDevTools</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// renderer</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

ipcRenderer<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'openDevTools'</span><span class="token punctuation">,</span> webview<span class="token punctuation">.</span><span class="token function">getWebContentsId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="deprecated-webframe-setlayoutzoomlevellimits"><a href="#deprecated-webframe-setlayoutzoomlevellimits" class="header-anchor">#</a> Deprecated: <code>webFrame.setLayoutZoomLevelLimits()</code></h3> <p>Chromium has removed support for changing the layout zoom level limits, and it is beyond Electron's capacity to maintain it. The function will emit a warning in Electron 8.x, and cease to exist in Electron 9.x. The layout zoom level limits are now fixed at a minimum of 0.25 and a maximum of 5.0, as defined <a href="https://chromium.googlesource.com/chromium/src/+/938b37a6d2886bf8335fc7db792f1eb46c65b2ae/third_party/blink/common/page/page_zoom.cc#11" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="deprecated-events-in-systempreferences"><a href="#deprecated-events-in-systempreferences" class="header-anchor">#</a> Deprecated events in <code>systemPreferences</code></h3> <p>The following <code>systemPreferences</code> events have been deprecated:</p> <ul><li><code>inverted-color-scheme-changed</code></li> <li><code>high-contrast-color-scheme-changed</code></li></ul> <p>Use the new <code>updated</code> event on the <code>nativeTheme</code> module instead.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'inverted-color-scheme-changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'high-contrast-color-scheme-changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Replace with</span>
nativeTheme<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="已废弃-systempreferences-中的方法"><a href="#已废弃-systempreferences-中的方法" class="header-anchor">#</a> 已废弃：<code>systemPreferences</code> 中的方法</h3> <p><code>systemPreferences</code> 方法已经被废弃：</p> <ul><li><code>systemPreferences.isDarkMode()</code></li> <li><code>systemPreferences.isInvertedColorScheme()</code></li> <li><code>systemPreferences.isHighContrastColorScheme()</code></li></ul> <p>使用 <code>nativeTheme</code> 属性作为替代：</p> <ul><li><code>nativeTheme.shouldUseDarkColors</code></li> <li><code>nativeTheme.shouldUseInvertedColorScheme</code></li> <li><code>nativeTheme.shouldUseHighContrastColors</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 已废弃</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">isDarkMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeTheme<span class="token punctuation">.</span>shouldUseDarkColors

<span class="token comment">// 已废弃</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">isInvertedColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeTheme<span class="token punctuation">.</span>shouldUseInvertedColorScheme

<span class="token comment">// 已废弃</span>
systemPreferences<span class="token punctuation">.</span><span class="token function">isHighContrastColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeTheme<span class="token punctuation">.</span>shouldUseHighContrastColors
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="planned-breaking-api-changes-7-0"><a href="#planned-breaking-api-changes-7-0" class="header-anchor">#</a> Planned Breaking API Changes (7.0)</h2> <h3 id="deprecated-atom-io-node-headers-url"><a href="#deprecated-atom-io-node-headers-url" class="header-anchor">#</a> Deprecated: Atom.io Node Headers URL</h3> <p>这是在构建原生 node 模块时在 <code>.npmrc</code> 文件中指定为 <code>disturl</code> 的 url 或是 <code>--dist-url</code> 命令行标志.  Both will be supported for the foreseeable future but it is recommended that you switch.</p> <p>Deprecated: https://atom.io/download/electron</p> <p>Replace with: https://electronjs.org/headers</p> <h3 id="api-changed-session-clearauthcache-no-longer-accepts-options"><a href="#api-changed-session-clearauthcache-no-longer-accepts-options" class="header-anchor">#</a> API Changed: <code>session.clearAuthCache()</code> no longer accepts options</h3> <p>The <code>session.clearAuthCache</code> API no longer accepts options for what to clear, and instead unconditionally clears the whole cache.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
session<span class="token punctuation">.</span><span class="token function">clearAuthCache</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'password'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
session<span class="token punctuation">.</span><span class="token function">clearAuthCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="api-changed-powermonitor-querysystemidlestate-is-now-powermonitor-getsystemidlestate"><a href="#api-changed-powermonitor-querysystemidlestate-is-now-powermonitor-getsystemidlestate" class="header-anchor">#</a> API Changed: <code>powerMonitor.querySystemIdleState</code> is now <code>powerMonitor.getSystemIdleState</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Removed in Electron 7.0</span>
powerMonitor<span class="token punctuation">.</span><span class="token function">querySystemIdleState</span><span class="token punctuation">(</span>threshold<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// Replace with synchronous API</span>
<span class="token keyword">const</span> idleState <span class="token operator">=</span> powerMonitor<span class="token punctuation">.</span><span class="token function">getSystemIdleState</span><span class="token punctuation">(</span>threshold<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="api-changed-powermonitor-querysystemidletime-is-now-powermonitor-getsystemidletime"><a href="#api-changed-powermonitor-querysystemidletime-is-now-powermonitor-getsystemidletime" class="header-anchor">#</a> API Changed: <code>powerMonitor.querySystemIdleTime</code> is now <code>powerMonitor.getSystemIdleTime</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Removed in Electron 7.0</span>
powerMonitor<span class="token punctuation">.</span><span class="token function">querySystemIdleTime</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
<span class="token comment">// Replace with synchronous API</span>
<span class="token keyword">const</span> idleTime <span class="token operator">=</span> powerMonitor<span class="token punctuation">.</span><span class="token function">getSystemIdleTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="api-changed-webframe-setisolatedworldinfo-replaces-separate-methods"><a href="#api-changed-webframe-setisolatedworldinfo-replaces-separate-methods" class="header-anchor">#</a> API Changed: <code>webFrame.setIsolatedWorldInfo</code> replaces separate methods</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Removed in Electron 7.0</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldContentSecurityPolicy</span><span class="token punctuation">(</span>worldId<span class="token punctuation">,</span> csp<span class="token punctuation">)</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldHumanReadableName</span><span class="token punctuation">(</span>worldId<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldSecurityOrigin</span><span class="token punctuation">(</span>worldId<span class="token punctuation">,</span> securityOrigin<span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldInfo</span><span class="token punctuation">(</span>
  worldId<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">securityOrigin</span><span class="token operator">:</span> <span class="token string">'some_origin'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'human_readable_name'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">csp</span><span class="token operator">:</span> <span class="token string">'content_security_policy'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="removed-marked-property-on-getblinkmemoryinfo"><a href="#removed-marked-property-on-getblinkmemoryinfo" class="header-anchor">#</a> Removed: <code>marked</code> property on <code>getBlinkMemoryInfo</code></h3> <p>This property was removed in Chromium 77, and as such is no longer available.</p> <h3 id="behavior-changed-webkitdirectory-attribute-for-input-type-file-now-lists-directory-contents"><a href="#behavior-changed-webkitdirectory-attribute-for-input-type-file-now-lists-directory-contents" class="header-anchor">#</a> Behavior Changed: <code>webkitdirectory</code> attribute for <code>&lt;input type=&quot;file&quot;/&gt;</code> now lists directory contents</h3> <p>The <code>webkitdirectory</code> property on HTML file inputs allows them to select folders. Previous versions of Electron had an incorrect implementation where the <code>event.target.files</code> of the input returned a <code>FileList</code> that returned one <code>File</code> corresponding to the selected folder.</p> <p>As of Electron 7, that <code>FileList</code> is now list of all files contained within the folder, similarly to Chrome, Firefox, and Edge (<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory" target="_blank" rel="noopener noreferrer">link to MDN docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>As an illustration, take a folder with this structure:</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>folder
├── file1
├── file2
└── file3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>In Electron &lt;=6, this would return a <code>FileList</code> with a <code>File</code> object for:</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>path/to/folder
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In Electron 7, this now returns a <code>FileList</code> with a <code>File</code> object for:</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>/path/to/folder/file3
/path/to/folder/file2
/path/to/folder/file1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Note that <code>webkitdirectory</code> no longer exposes the path to the selected folder. If you require the path to the selected folder rather than the folder contents, see the <code>dialog.showOpenDialog</code> API (<a href="/《Electron中文文档》/api/dialog.html#dialogshowopendialogbrowserwindow-options">link</a>).</p> <h3 id="api-changed-callback-based-versions-of-promisified-apis"><a href="#api-changed-callback-based-versions-of-promisified-apis" class="header-anchor">#</a> API Changed: Callback-based versions of promisified APIs</h3> <p>Electron 5 and Electron 6 introduced Promise-based versions of existing asynchronous APIs and deprecated their older, callback-based counterparts. In Electron 7, all deprecated callback-based APIs are now removed.</p> <p>These functions now only return Promises:</p> <ul><li><code>app.getFileIcon()</code> <a href="https://github.com/electron/electron/pull/15742" target="_blank" rel="noopener noreferrer">#15742<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>app.dock.show()</code> <a href="https://github.com/electron/electron/pull/16904" target="_blank" rel="noopener noreferrer">#16904<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>contentTracing.getCategories()</code> <a href="https://github.com/electron/electron/pull/16583" target="_blank" rel="noopener noreferrer">#16583<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>contentTracking.getTraceBufferUs()</code> <a href="https://github.com/electron/electron/pull/16600" target="_blank" rel="noopener noreferrer">#16600<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>contentTracing.startRecording()</code> <a href="https://github.com/electron/electron/pull/16584" target="_blank" rel="noopener noreferrer">#16584<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>contentTracing.stopRecording()</code> <a href="https://github.com/electron/electron/pull/16584" target="_blank" rel="noopener noreferrer">#16584<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>contents.executeJavaScript()</code> <a href="https://github.com/electron/electron/pull/17312" target="_blank" rel="noopener noreferrer">#17312<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>cookies.flushStore()</code> <a href="https://github.com/electron/electron/pull/16464" target="_blank" rel="noopener noreferrer">#16464<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>cookies.get()</code> <a href="https://github.com/electron/electron/pull/16464" target="_blank" rel="noopener noreferrer">#16464<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>cookies.remove()</code> <a href="https://github.com/electron/electron/pull/16464" target="_blank" rel="noopener noreferrer">#16464<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>cookies.set()</code> <a href="https://github.com/electron/electron/pull/16464" target="_blank" rel="noopener noreferrer">#16464<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>debugger.sendCommand()</code> <a href="https://github.com/electron/electron/pull/16861" target="_blank" rel="noopener noreferrer">#16861<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>dialog.showCertificateTrustDialog()</code> <a href="https://github.com/electron/electron/pull/17181" target="_blank" rel="noopener noreferrer">#17181<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>inAppPurchase.getProducts()</code> <a href="https://github.com/electron/electron/pull/17355" target="_blank" rel="noopener noreferrer">#17355<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>inAppPurchase.purchaseProduct()</code><a href="https://github.com/electron/electron/pull/17355" target="_blank" rel="noopener noreferrer">#17355<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>netLog.stopLogging()</code> <a href="https://github.com/electron/electron/pull/16862" target="_blank" rel="noopener noreferrer">#16862<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.clearAuthCache()</code> <a href="https://github.com/electron/electron/pull/17259" target="_blank" rel="noopener noreferrer">#17259<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.clearCache()</code> <a href="https://github.com/electron/electron/pull/17185" target="_blank" rel="noopener noreferrer">#17185<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.clearHostResolverCache()</code> <a href="https://github.com/electron/electron/pull/17229" target="_blank" rel="noopener noreferrer">#17229<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.clearStorageData()</code> <a href="https://github.com/electron/electron/pull/17249" target="_blank" rel="noopener noreferrer">#17249<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.getBlobData()</code> <a href="https://github.com/electron/electron/pull/17303" target="_blank" rel="noopener noreferrer">#17303<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.getCacheSize()</code> <a href="https://github.com/electron/electron/pull/17185" target="_blank" rel="noopener noreferrer">#17185<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.getCacheSize()</code> <a href="https://github.com/electron/electron/pull/17222" target="_blank" rel="noopener noreferrer">#17185<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>session.setProxy()</code> <a href="https://github.com/electron/electron/pull/17222" target="_blank" rel="noopener noreferrer">#17222<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>shell.openExternal()</code> <a href="https://github.com/electron/electron/pull/16176" target="_blank" rel="noopener noreferrer">#16176<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webContents.loadFile()</code> <a href="https://github.com/electron/electron/pull/15855" target="_blank" rel="noopener noreferrer">#15855<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webContents.loadURL()</code> <a href="https://github.com/electron/electron/pull/15855" target="_blank" rel="noopener noreferrer">#15855<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webContents.hasServiceWorker()</code> <a href="https://github.com/electron/electron/pull/16535" target="_blank" rel="noopener noreferrer">#16535<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webContents.printToPDF()</code> <a href="https://github.com/electron/electron/pull/16795" target="_blank" rel="noopener noreferrer">#16795<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webContents.savePage()</code> <a href="https://github.com/electron/electron/pull/16742" target="_blank" rel="noopener noreferrer">#16742<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webFrame.executeJavaScript()</code> <a href="https://github.com/electron/electron/pull/17312" target="_blank" rel="noopener noreferrer">#17312<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webFrame.executeJavaScriptInIsolatedWorld()</code> <a href="https://github.com/electron/electron/pull/17312" target="_blank" rel="noopener noreferrer">#17312<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>webviewTag.executeJavaScript()</code> <a href="https://github.com/electron/electron/pull/17312" target="_blank" rel="noopener noreferrer">#17312<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>win.capturePage()</code> <a href="https://github.com/electron/electron/pull/15743" target="_blank" rel="noopener noreferrer">#15743<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>这些功能现在有两种形式，即同步和基于Promise的异步：</p> <ul><li><code>dialog.showMessageBox()</code>/<code>dialog.showMessageBoxSync()</code> <a href="https://github.com/electron/electron/pull/17298" target="_blank" rel="noopener noreferrer">#17298<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>dialog.showOpenDialog()</code>/<code>dialog.showOpenDialogSync()</code> <a href="https://github.com/electron/electron/pull/16973" target="_blank" rel="noopener noreferrer">#16973<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>dialog.showSaveDialog()</code>/<code>dialog.showSaveDialogSync()</code> <a href="https://github.com/electron/electron/pull/17054" target="_blank" rel="noopener noreferrer">#17054<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="planned-breaking-api-changes-6-0"><a href="#planned-breaking-api-changes-6-0" class="header-anchor">#</a> Planned Breaking API Changes (6.0)</h2> <h3 id="api-changed-win-setmenu-null-is-now-win-removemenu"><a href="#api-changed-win-setmenu-null-is-now-win-removemenu" class="header-anchor">#</a> API Changed: <code>win.setMenu(null)</code> is now <code>win.removeMenu()</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
win<span class="token punctuation">.</span><span class="token function">setMenu</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
win<span class="token punctuation">.</span><span class="token function">removeMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="api-changed-electron-screen-in-the-renderer-process-should-be-accessed-via-remote"><a href="#api-changed-electron-screen-in-the-renderer-process-should-be-accessed-via-remote" class="header-anchor">#</a> API Changed: <code>electron.screen</code> in the renderer process should be accessed via <code>remote</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>screen
<span class="token comment">// 替换为</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote<span class="token punctuation">.</span>screen
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="api-changed-require-ing-node-builtins-in-sandboxed-renderers-no-longer-implicitly-loads-the-remote-version"><a href="#api-changed-require-ing-node-builtins-in-sandboxed-renderers-no-longer-implicitly-loads-the-remote-version" class="header-anchor">#</a> API Changed: <code>require()</code>ing node builtins in sandboxed renderers no longer implicitly loads the <code>remote</code> version</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不推荐</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span>

<span class="token comment">// 不推荐</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// 不推荐</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span>

<span class="token comment">// 不推荐</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="deprecated-powermonitor-querysystemidlestate-replaced-with-powermonitor-getsystemidlestate"><a href="#deprecated-powermonitor-querysystemidlestate-replaced-with-powermonitor-getsystemidlestate" class="header-anchor">#</a> Deprecated: <code>powerMonitor.querySystemIdleState</code> replaced with <code>powerMonitor.getSystemIdleState</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
powerMonitor<span class="token punctuation">.</span><span class="token function">querySystemIdleState</span><span class="token punctuation">(</span>threshold<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// Replace with synchronous API</span>
<span class="token keyword">const</span> idleState <span class="token operator">=</span> powerMonitor<span class="token punctuation">.</span><span class="token function">getSystemIdleState</span><span class="token punctuation">(</span>threshold<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="deprecated-powermonitor-querysystemidletime-replaced-with-powermonitor-getsystemidletime"><a href="#deprecated-powermonitor-querysystemidletime-replaced-with-powermonitor-getsystemidletime" class="header-anchor">#</a> Deprecated: <code>powerMonitor.querySystemIdleTime</code> replaced with <code>powerMonitor.getSystemIdleTime</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
powerMonitor<span class="token punctuation">.</span><span class="token function">querySystemIdleTime</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
<span class="token comment">// Replace with synchronous API</span>
<span class="token keyword">const</span> idleTime <span class="token operator">=</span> powerMonitor<span class="token punctuation">.</span><span class="token function">getSystemIdleTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="deprecated-app-enablemixedsandbox-is-no-longer-needed"><a href="#deprecated-app-enablemixedsandbox-is-no-longer-needed" class="header-anchor">#</a> Deprecated: <code>app.enableMixedSandbox()</code> is no longer needed</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
app<span class="token punctuation">.</span><span class="token function">enableMixedSandbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>混合沙盒模式已默认启用。</p> <h3 id="deprecated-tray-sethighlightmode"><a href="#deprecated-tray-sethighlightmode" class="header-anchor">#</a> Deprecated: <code>Tray.setHighlightMode</code></h3> <p>Under macOS Catalina our former Tray implementation breaks. Apple's native substitute doesn't support changing the highlighting behavior.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
tray<span class="token punctuation">.</span><span class="token function">setHighlightMode</span><span class="token punctuation">(</span>mode<span class="token punctuation">)</span>
<span class="token comment">// API will be removed in v7.0 without replacement.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="planned-breaking-api-changes-5-0"><a href="#planned-breaking-api-changes-5-0" class="header-anchor">#</a> Planned Breaking API Changes (5.0)</h2> <h3 id="default-changed-nodeintegration-and-webviewtag-default-to-false-contextisolation-defaults-to-true"><a href="#default-changed-nodeintegration-and-webviewtag-default-to-false-contextisolation-defaults-to-true" class="header-anchor">#</a> Default Changed: <code>nodeIntegration</code> and <code>webviewTag</code> default to false, <code>contextIsolation</code> defaults to true</h3> <p>不推荐使用以下 <code>webPreferences</code> 选项默认值，以支持下面列出的新默认值。</p> <table><thead><tr><th>属性</th> <th>不推荐使用的默认值</th> <th>新的默认值</th></tr></thead> <tbody><tr><td><code>contextIsolation</code></td> <td><code>false</code></td> <td><code>true</code></td></tr> <tr><td><code>nodeIntegration</code></td> <td><code>true</code></td> <td><code>false</code></td></tr> <tr><td><code>webviewTag</code></td> <td><code>nodeIntegration</code> 未设置过则是 <code>true</code></td> <td><code>false</code></td></tr></tbody></table> <p>如下: Re-enabling the webviewTag</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">webviewTag</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="behavior-changed-nodeintegration-in-child-windows-opened-via-nativewindowopen"><a href="#behavior-changed-nodeintegration-in-child-windows-opened-via-nativewindowopen" class="header-anchor">#</a> Behavior Changed: <code>nodeIntegration</code> in child windows opened via <code>nativeWindowOpen</code></h3> <p>Child windows opened with the <code>nativeWindowOpen</code> option will always have Node.js integration disabled, unless <code>nodeIntegrationInSubFrames</code> is <code>true</code>.</p> <h3 id="api-changed-registering-privileged-schemes-must-now-be-done-before-app-ready"><a href="#api-changed-registering-privileged-schemes-must-now-be-done-before-app-ready" class="header-anchor">#</a> API Changed: Registering privileged schemes must now be done before app ready</h3> <p>Renderer process APIs <code>webFrame.registerURLSchemeAsPrivileged</code> and <code>webFrame.registerURLSchemeAsBypassingCSP</code> as well as browser process API <code>protocol.registerStandardSchemes</code> have been removed. 新的 API <code>protocol.registerSchemeasviliged</code> 已被添加，并用于注册具有必要权限的自定义 scheme。 自定义 scheme 需要在 app 触发 ready 事件之前注册。</p> <h3 id="deprecated-webframe-setisolatedworld-replaced-with-webframe-setisolatedworldinfo"><a href="#deprecated-webframe-setisolatedworld-replaced-with-webframe-setisolatedworldinfo" class="header-anchor">#</a> Deprecated: <code>webFrame.setIsolatedWorld*</code> replaced with <code>webFrame.setIsolatedWorldInfo</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldContentSecurityPolicy</span><span class="token punctuation">(</span>worldId<span class="token punctuation">,</span> csp<span class="token punctuation">)</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldHumanReadableName</span><span class="token punctuation">(</span>worldId<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldSecurityOrigin</span><span class="token punctuation">(</span>worldId<span class="token punctuation">,</span> securityOrigin<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
webFrame<span class="token punctuation">.</span><span class="token function">setIsolatedWorldInfo</span><span class="token punctuation">(</span>
  worldId<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">securityOrigin</span><span class="token operator">:</span> <span class="token string">'some_origin'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'human_readable_name'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">csp</span><span class="token operator">:</span> <span class="token string">'content_security_policy'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="api-changed-webframe-setspellcheckprovider-now-takes-an-asynchronous-callback"><a href="#api-changed-webframe-setspellcheckprovider-now-takes-an-asynchronous-callback" class="header-anchor">#</a> API Changed: <code>webFrame.setSpellCheckProvider</code> now takes an asynchronous callback</h3> <p>The <code>spellCheck</code> callback is now asynchronous, and <code>autoCorrectWord</code> parameter has been removed.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
webFrame<span class="token punctuation">.</span><span class="token function">setSpellCheckProvider</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">spellCheck</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">!</span>spellchecker<span class="token punctuation">.</span><span class="token function">isMisspelled</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
webFrame<span class="token punctuation">.</span><span class="token function">setSpellCheckProvider</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">spellCheck</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">words<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>words<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">text</span> <span class="token operator">=&gt;</span> spellchecker<span class="token punctuation">.</span><span class="token function">isMisspelled</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="api-changed-webcontents-getzoomlevel-and-webcontents-getzoomfactor-are-now-synchronous"><a href="#api-changed-webcontents-getzoomlevel-and-webcontents-getzoomfactor-are-now-synchronous" class="header-anchor">#</a> API Changed: <code>webContents.getZoomLevel</code> and <code>webContents.getZoomFactor</code> are now synchronous</h3> <p><code>webContents.getZoomLevel</code> and <code>webContents.getZoomFactor</code> no longer take callback parameters, instead directly returning their number values.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
webContents<span class="token punctuation">.</span><span class="token function">getZoomLevel</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">level</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
<span class="token keyword">const</span> level <span class="token operator">=</span> webContents<span class="token punctuation">.</span><span class="token function">getZoomLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Deprecated</span>
webContents<span class="token punctuation">.</span><span class="token function">getZoomFactor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">factor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>factor<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Replace with</span>
<span class="token keyword">const</span> factor <span class="token operator">=</span> webContents<span class="token punctuation">.</span><span class="token function">getZoomFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>factor<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="计划重写的-api-4-0"><a href="#计划重写的-api-4-0" class="header-anchor">#</a> 计划重写的 API (4.0)</h2> <p>以下列表包含了Electron4.0中重大的API更新</p> <h3 id="app-makesingleinstance"><a href="#app-makesingleinstance" class="header-anchor">#</a> <code>app.makeSingleInstance</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 已废弃</span>
app<span class="token punctuation">.</span><span class="token function">makeSingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">argv<span class="token punctuation">,</span> cwd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
app<span class="token punctuation">.</span><span class="token function">requestSingleInstanceLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'second-instance'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> cwd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="app-releasesingleinstance"><a href="#app-releasesingleinstance" class="header-anchor">#</a> <code>app.releaseSingleInstance</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 废弃</span>
app<span class="token punctuation">.</span><span class="token function">releaseSingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
app<span class="token punctuation">.</span><span class="token function">releaseSingleInstanceLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="app-getgpuinfo"><a href="#app-getgpuinfo" class="header-anchor">#</a> <code>app.getGPUInfo</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">getGPUInfo</span><span class="token punctuation">(</span><span class="token string">'complete'</span><span class="token punctuation">)</span>
<span class="token comment">// 现在的行为将与macOS下的`basic`设置一样</span>
app<span class="token punctuation">.</span><span class="token function">getGPUInfo</span><span class="token punctuation">(</span><span class="token string">'basic'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="win-delay-load-hook"><a href="#win-delay-load-hook" class="header-anchor">#</a> <code>win_delay_load_hook</code></h3> <p>在为 Windows 构建本机模块时，将使 <code>win_delay_load_hook</code> 变量值 位于 <code>binding.gyp</code> 模块，必须为 true (这是默认值)。 如果这个钩子 不存在，那么本机模块将无法在 Windows 上加载，并出现错误 消息如 <code>无法找到模块</code>。 查看 <a href="/docs/tutorial/using-native-node-modules.html">原生模块指南</a> 以获取更多信息.</p> <h2 id="重大的api更新-3-0"><a href="#重大的api更新-3-0" class="header-anchor">#</a> 重大的API更新 (3.0)</h2> <p>以下包含了Electron 3.0中重大的API更新</p> <h3 id="app"><a href="#app" class="header-anchor">#</a> <code>app</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
app<span class="token punctuation">.</span><span class="token function">getAppMemoryInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
app<span class="token punctuation">.</span><span class="token function">getAppMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 弃用</span>
<span class="token keyword">const</span> metrics <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">getAppMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> memory <span class="token punctuation">}</span> <span class="token operator">=</span> metrics<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 弃用的属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="browserwindow"><a href="#browserwindow" class="header-anchor">#</a> <code>BrowserWindow</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 已废弃</span>
<span class="token keyword">const</span> optionsA <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">blinkFeatures</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> windowA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span>optionsA<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token keyword">const</span> optionsB <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">enableBlinkFeatures</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> windowB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span>optionsB<span class="token punctuation">)</span>

<span class="token comment">// 已废弃</span>
window<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'app-command'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> cmd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">===</span> <span class="token string">'media-play_pause'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
window<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'app-command'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> cmd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">===</span> <span class="token string">'media-play-pause'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="clipboard"><a href="#clipboard" class="header-anchor">#</a> <code>clipboard</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 过时的</span>
clipboard<span class="token punctuation">.</span><span class="token function">readRtf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
clipboard<span class="token punctuation">.</span><span class="token function">readRTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 过时的</span>
clipboard<span class="token punctuation">.</span><span class="token function">writeRtf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
clipboard<span class="token punctuation">.</span><span class="token function">writeRTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 过时的</span>
clipboard<span class="token punctuation">.</span><span class="token function">readHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
clipboard<span class="token punctuation">.</span><span class="token function">readHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 过时的</span>
clipboard<span class="token punctuation">.</span><span class="token function">writeHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//替换为</span>
clipboard<span class="token punctuation">.</span><span class="token function">writeHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="crashreporter"><a href="#crashreporter" class="header-anchor">#</a> <code>crashReporter</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 过时的</span>
crashReporter<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">companyName</span><span class="token operator">:</span> <span class="token string">'Crashly'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">submitURL</span><span class="token operator">:</span> <span class="token string">'https://crash.server.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">autoSubmit</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
crashReporter<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">companyName</span><span class="token operator">:</span> <span class="token string">'Crashly'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">submitURL</span><span class="token operator">:</span> <span class="token string">'https://crash.server.com'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uploadToServer</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="nativeimage"><a href="#nativeimage" class="header-anchor">#</a> <code>nativeImage</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
nativeImage<span class="token punctuation">.</span><span class="token function">createFromBuffer</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeImage<span class="token punctuation">.</span><span class="token function">createFromBuffer</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">scaleFactor</span><span class="token operator">:</span> <span class="token number">1.0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="process"><a href="#process" class="header-anchor">#</a> <code>process</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
<span class="token keyword">const</span> info <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getProcessMemoryInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="screen"><a href="#screen" class="header-anchor">#</a> <code>screen</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
screen<span class="token punctuation">.</span><span class="token function">getMenuBarHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
screen<span class="token punctuation">.</span><span class="token function">getPrimaryDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>workArea
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="session"><a href="#session" class="header-anchor">#</a> <code>session</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
ses<span class="token punctuation">.</span><span class="token function">setCertificateVerifyProc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">hostname<span class="token punctuation">,</span> certificate<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
ses<span class="token punctuation">.</span><span class="token function">setCertificateVerifyProc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="tray"><a href="#tray" class="header-anchor">#</a> <code>Tray</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 过时的</span>
tray<span class="token punctuation">.</span><span class="token function">setHighlightMode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
tray<span class="token punctuation">.</span><span class="token function">setHighlightMode</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">)</span>

<span class="token comment">// 过时的</span>
tray<span class="token punctuation">.</span><span class="token function">setHighlightMode</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
tray<span class="token punctuation">.</span><span class="token function">setHighlightMode</span><span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="webcontents"><a href="#webcontents" class="header-anchor">#</a> <code>webContents</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
webContents<span class="token punctuation">.</span><span class="token function">openDevTools</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">detach</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
webContents<span class="token punctuation">.</span><span class="token function">openDevTools</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'detach'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 移除</span>
webContents<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token comment">// 没有该API的替代</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="webframe"><a href="#webframe" class="header-anchor">#</a> <code>webFrame</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弃用</span>
webFrame<span class="token punctuation">.</span><span class="token function">registerURLSchemeAsSecure</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
protocol<span class="token punctuation">.</span><span class="token function">registerStandardSchemes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'app'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 弃用</span>
webFrame<span class="token punctuation">.</span><span class="token function">registerURLSchemeAsPrivileged</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
protocol<span class="token punctuation">.</span><span class="token function">registerStandardSchemes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'app'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="webview"><a href="#webview" class="header-anchor">#</a> <code>&lt;webview&gt;</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 移除</span>
webview<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'disableguestresize'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token comment">// 没有该API的替代</span>

<span class="token comment">// 移除</span>
webview<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'guestinstance'</span><span class="token punctuation">,</span> instanceId<span class="token punctuation">)</span>
<span class="token comment">// 没有该API的替代</span>

<span class="token comment">// 键盘监听器在webview标签中不再起效</span>
webview<span class="token punctuation">.</span><span class="token function-variable function">onkeydown</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* handler */</span> <span class="token punctuation">}</span>
webview<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* handler */</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="node-headers-url"><a href="#node-headers-url" class="header-anchor">#</a> Node Headers URL</h3> <p>这是在构建原生 node 模块时在 <code>.npmrc</code> 文件中指定为 <code>disturl</code> 的 url 或是 <code>--dist-url</code> 命令行标志.</p> <p>过时的: https://atom.io/download/atom-shell</p> <p>替换为: https://atom.io/download/electron</p> <h2 id="重大的api更新-2-0"><a href="#重大的api更新-2-0" class="header-anchor">#</a> 重大的API更新 (2.0)</h2> <p>以下包含了Electron 2.0中重大的API更新</p> <h3 id="browserwindow-2"><a href="#browserwindow-2" class="header-anchor">#</a> <code>BrowserWindow</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 已废弃</span>
<span class="token keyword">const</span> optionsA <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">titleBarStyle</span><span class="token operator">:</span> <span class="token string">'hidden-inset'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> windowA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span>optionsA<span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
<span class="token keyword">const</span> optionsB <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">titleBarStyle</span><span class="token operator">:</span> <span class="token string">'hiddenInset'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> windowB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span>optionsB<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="menu"><a href="#menu" class="header-anchor">#</a> <code>menu</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 移除</span>
menu<span class="token punctuation">.</span><span class="token function">popup</span><span class="token punctuation">(</span>browserWindow<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
menu<span class="token punctuation">.</span><span class="token function">popup</span><span class="token punctuation">(</span>browserWindow<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">positioningItem</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="nativeimage-2"><a href="#nativeimage-2" class="header-anchor">#</a> <code>nativeImage</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 移除</span>
nativeImage<span class="token punctuation">.</span><span class="token function">toPng</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeImage<span class="token punctuation">.</span><span class="token function">toPNG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 移除</span>
nativeImage<span class="token punctuation">.</span><span class="token function">toJpeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
nativeImage<span class="token punctuation">.</span><span class="token function">toJPEG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="process-2"><a href="#process-2" class="header-anchor">#</a> <code>process</code></h3> <ul><li><code>process.versions.electron</code> 和 <code>process.version.chrome</code> 将成为只读属性, 以便与其他 <code>process.versions</code> 属性由Node设置。</li></ul> <h3 id="webcontents-2"><a href="#webcontents-2" class="header-anchor">#</a> <code>webContents</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 移除</span>
webContents<span class="token punctuation">.</span><span class="token function">setZoomLevelLimits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
webContents<span class="token punctuation">.</span><span class="token function">setVisualZoomLevelLimits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="webframe-2"><a href="#webframe-2" class="header-anchor">#</a> <code>webFrame</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 移除</span>
webFrame<span class="token punctuation">.</span><span class="token function">setZoomLevelLimits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
webFrame<span class="token punctuation">.</span><span class="token function">setVisualZoomLevelLimits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="webview-2"><a href="#webview-2" class="header-anchor">#</a> <code>&lt;webview&gt;</code></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 移除</span>
webview<span class="token punctuation">.</span><span class="token function">setZoomLevelLimits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 替换为</span>
webview<span class="token punctuation">.</span><span class="token function">setVisualZoomLevelLimits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="重复的-arm-资源"><a href="#重复的-arm-资源" class="header-anchor">#</a> 重复的 ARM 资源</h3> <p>每个 Electron 发布版本包含两个相同的ARM版本，文件名略有不同，如<code>electron-v1.7.3-linux-arm.zip</code> 和 <code>electron-v1.7.3-linux-armv7l.zip</code> 添加包含<code>v7l</code>前缀的资源向用户明确其支持的ARM版本，并消除由未来armv6l 和 arm64 资源可能产生的歧义。</p> <p>The file <em>without the prefix</em> is still being published to avoid breaking any setups that may be consuming it. Starting at 2.0, the unprefixed file will no longer be published.</p> <p>更多详细情况，查看 <a href="https://github.com/electron/electron/pull/6986" target="_blank" rel="noopener noreferrer">6986<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://github.com/electron/electron/pull/7189" target="_blank" rel="noopener noreferrer">7189<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/wenxuli/vuepress-theme-vdoing/edit/master/docs/《Electron中文文档》/breaking-changes.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c77e3b/"><div>
            JavaScript 中搜索数组元素
            <!----></div></a> <span class="date">04-15</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/170433/"><div>
            TypeScript 的基本使用
            <!----></div></a> <span class="date">04-15</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/8f7083/"><div>
            js读取文件
            <!----></div></a> <span class="date">04-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1031553051@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wenxuli2" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Xuli | <a href="#" target="_blank">MIT License</a> | <a href="https://beian.miit.gov.cn/#/Integrated/recordQuery">粤ICP备2022033241号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.ae1014d0.js" defer></script><script src="/assets/js/2.0929aa91.js" defer></script><script src="/assets/js/187.3999cc52.js" defer></script>
  </body>
</html>
