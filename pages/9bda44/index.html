<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>session | Xuli&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7df12f51.css" as="style"><link rel="preload" href="/assets/js/app.ae1014d0.js" as="script"><link rel="preload" href="/assets/js/2.0929aa91.js" as="script"><link rel="preload" href="/assets/js/101.f7532c5e.js" as="script"><link rel="prefetch" href="/assets/js/10.4bdb89ee.js"><link rel="prefetch" href="/assets/js/100.151c3012.js"><link rel="prefetch" href="/assets/js/102.1089249a.js"><link rel="prefetch" href="/assets/js/103.638f4733.js"><link rel="prefetch" href="/assets/js/104.1d534122.js"><link rel="prefetch" href="/assets/js/105.06c0bbf9.js"><link rel="prefetch" href="/assets/js/106.92ca4115.js"><link rel="prefetch" href="/assets/js/107.85e42729.js"><link rel="prefetch" href="/assets/js/108.27a6c668.js"><link rel="prefetch" href="/assets/js/109.62c5a10a.js"><link rel="prefetch" href="/assets/js/11.d404b72f.js"><link rel="prefetch" href="/assets/js/110.d11e0109.js"><link rel="prefetch" href="/assets/js/111.1e0c098b.js"><link rel="prefetch" href="/assets/js/112.e254dac0.js"><link rel="prefetch" href="/assets/js/113.67716f81.js"><link rel="prefetch" href="/assets/js/114.f29df292.js"><link rel="prefetch" href="/assets/js/115.4a832c3d.js"><link rel="prefetch" href="/assets/js/116.7e342fac.js"><link rel="prefetch" href="/assets/js/117.0b07f2f8.js"><link rel="prefetch" href="/assets/js/118.db361661.js"><link rel="prefetch" href="/assets/js/119.4feef380.js"><link rel="prefetch" href="/assets/js/12.23c73db0.js"><link rel="prefetch" href="/assets/js/120.4f7f4ee2.js"><link rel="prefetch" href="/assets/js/121.df13004f.js"><link rel="prefetch" href="/assets/js/122.6d767a40.js"><link rel="prefetch" href="/assets/js/123.0350480a.js"><link rel="prefetch" href="/assets/js/124.3d686ac4.js"><link rel="prefetch" href="/assets/js/125.2baee703.js"><link rel="prefetch" href="/assets/js/126.60932da0.js"><link rel="prefetch" href="/assets/js/127.e3d31902.js"><link rel="prefetch" href="/assets/js/128.5f3529e4.js"><link rel="prefetch" href="/assets/js/129.98d9f85c.js"><link rel="prefetch" href="/assets/js/13.ff50593c.js"><link rel="prefetch" href="/assets/js/130.ee0f2916.js"><link rel="prefetch" href="/assets/js/131.e61bb4aa.js"><link rel="prefetch" href="/assets/js/132.acdc1343.js"><link rel="prefetch" href="/assets/js/133.c9e76739.js"><link rel="prefetch" href="/assets/js/134.cbcd2964.js"><link rel="prefetch" href="/assets/js/135.4122a226.js"><link rel="prefetch" href="/assets/js/136.9372f9a6.js"><link rel="prefetch" href="/assets/js/137.880d21ff.js"><link rel="prefetch" href="/assets/js/138.46f50548.js"><link rel="prefetch" href="/assets/js/139.f2b60c6d.js"><link rel="prefetch" href="/assets/js/14.37ab52e2.js"><link rel="prefetch" href="/assets/js/140.d042b179.js"><link rel="prefetch" href="/assets/js/141.3a2723e3.js"><link rel="prefetch" href="/assets/js/142.44576d63.js"><link rel="prefetch" href="/assets/js/143.a798fa29.js"><link rel="prefetch" href="/assets/js/144.e70329ab.js"><link rel="prefetch" href="/assets/js/145.746062ae.js"><link rel="prefetch" href="/assets/js/146.3e99370f.js"><link rel="prefetch" href="/assets/js/147.981d5bae.js"><link rel="prefetch" href="/assets/js/148.6feb1caf.js"><link rel="prefetch" href="/assets/js/149.606b299d.js"><link rel="prefetch" href="/assets/js/15.9179242a.js"><link rel="prefetch" href="/assets/js/150.57f66aa3.js"><link rel="prefetch" href="/assets/js/151.e82ed5b7.js"><link rel="prefetch" href="/assets/js/152.de1c615c.js"><link rel="prefetch" href="/assets/js/153.4c0906bf.js"><link rel="prefetch" href="/assets/js/154.5f1f2309.js"><link rel="prefetch" href="/assets/js/155.2f44369e.js"><link rel="prefetch" href="/assets/js/156.fb853e07.js"><link rel="prefetch" href="/assets/js/157.fc696530.js"><link rel="prefetch" href="/assets/js/158.42305671.js"><link rel="prefetch" href="/assets/js/159.aeeaf452.js"><link rel="prefetch" href="/assets/js/16.39bae875.js"><link rel="prefetch" href="/assets/js/160.97ff0082.js"><link rel="prefetch" href="/assets/js/161.ea02547c.js"><link rel="prefetch" href="/assets/js/162.a7dc58b3.js"><link rel="prefetch" href="/assets/js/163.7de06ea6.js"><link rel="prefetch" href="/assets/js/164.6c7bb19d.js"><link rel="prefetch" href="/assets/js/165.246b1310.js"><link rel="prefetch" href="/assets/js/166.9d473a86.js"><link rel="prefetch" href="/assets/js/167.d6a6946c.js"><link rel="prefetch" href="/assets/js/168.573cc1a2.js"><link rel="prefetch" href="/assets/js/169.dfb815af.js"><link rel="prefetch" href="/assets/js/17.2dafb7c5.js"><link rel="prefetch" href="/assets/js/170.1a4b01b7.js"><link rel="prefetch" href="/assets/js/171.da868f87.js"><link rel="prefetch" href="/assets/js/172.0a41ce61.js"><link rel="prefetch" href="/assets/js/173.b1db7e04.js"><link rel="prefetch" href="/assets/js/174.a2912494.js"><link rel="prefetch" href="/assets/js/175.80b0ff7b.js"><link rel="prefetch" href="/assets/js/176.b286be59.js"><link rel="prefetch" href="/assets/js/177.d477975c.js"><link rel="prefetch" href="/assets/js/178.a9378c73.js"><link rel="prefetch" href="/assets/js/179.f32f6835.js"><link rel="prefetch" href="/assets/js/18.df9528ed.js"><link rel="prefetch" href="/assets/js/180.afb310df.js"><link rel="prefetch" href="/assets/js/181.a1371c07.js"><link rel="prefetch" href="/assets/js/182.481b5a03.js"><link rel="prefetch" href="/assets/js/183.2d51e601.js"><link rel="prefetch" href="/assets/js/184.b6315203.js"><link rel="prefetch" href="/assets/js/185.f4095d2a.js"><link rel="prefetch" href="/assets/js/186.b5705121.js"><link rel="prefetch" href="/assets/js/187.3999cc52.js"><link rel="prefetch" href="/assets/js/188.f6fe1716.js"><link rel="prefetch" href="/assets/js/189.d8b79870.js"><link rel="prefetch" href="/assets/js/19.d71955ef.js"><link rel="prefetch" href="/assets/js/190.b4900e0f.js"><link rel="prefetch" href="/assets/js/191.9d4d7995.js"><link rel="prefetch" href="/assets/js/192.0e39272b.js"><link rel="prefetch" href="/assets/js/193.2299fef0.js"><link rel="prefetch" href="/assets/js/194.436e220c.js"><link rel="prefetch" href="/assets/js/195.281dc036.js"><link rel="prefetch" href="/assets/js/196.80d9a49a.js"><link rel="prefetch" href="/assets/js/197.b3cdd2ea.js"><link rel="prefetch" href="/assets/js/198.8a8b48a8.js"><link rel="prefetch" href="/assets/js/199.89b06297.js"><link rel="prefetch" href="/assets/js/20.fbbbb4a2.js"><link rel="prefetch" href="/assets/js/200.4cc8ee97.js"><link rel="prefetch" href="/assets/js/201.fee4bccc.js"><link rel="prefetch" href="/assets/js/202.edc4d5db.js"><link rel="prefetch" href="/assets/js/203.cff86dc2.js"><link rel="prefetch" href="/assets/js/204.f4315fea.js"><link rel="prefetch" href="/assets/js/205.ce8878e1.js"><link rel="prefetch" href="/assets/js/206.d3021ca5.js"><link rel="prefetch" href="/assets/js/207.e5f1bf22.js"><link rel="prefetch" href="/assets/js/208.6ebee4a9.js"><link rel="prefetch" href="/assets/js/209.662e7b6a.js"><link rel="prefetch" href="/assets/js/21.36081b83.js"><link rel="prefetch" href="/assets/js/210.ce2c0b1a.js"><link rel="prefetch" href="/assets/js/211.6f1af69e.js"><link rel="prefetch" href="/assets/js/212.3b9c8e2b.js"><link rel="prefetch" href="/assets/js/213.c848669b.js"><link rel="prefetch" href="/assets/js/214.ee964723.js"><link rel="prefetch" href="/assets/js/215.21cb777c.js"><link rel="prefetch" href="/assets/js/216.7f9215b6.js"><link rel="prefetch" href="/assets/js/217.977f100a.js"><link rel="prefetch" href="/assets/js/218.82177dd7.js"><link rel="prefetch" href="/assets/js/219.19a31121.js"><link rel="prefetch" href="/assets/js/22.a8b3dfb3.js"><link rel="prefetch" href="/assets/js/220.ec30e722.js"><link rel="prefetch" href="/assets/js/221.a3789d03.js"><link rel="prefetch" href="/assets/js/222.9eb5084d.js"><link rel="prefetch" href="/assets/js/223.16bc8621.js"><link rel="prefetch" href="/assets/js/224.07221c79.js"><link rel="prefetch" href="/assets/js/225.bcef2069.js"><link rel="prefetch" href="/assets/js/226.44d55599.js"><link rel="prefetch" href="/assets/js/227.41507cae.js"><link rel="prefetch" href="/assets/js/228.710cc669.js"><link rel="prefetch" href="/assets/js/229.388605e2.js"><link rel="prefetch" href="/assets/js/23.e18c6c6d.js"><link rel="prefetch" href="/assets/js/230.41a44f2b.js"><link rel="prefetch" href="/assets/js/231.30efb2b1.js"><link rel="prefetch" href="/assets/js/232.83aba0c1.js"><link rel="prefetch" href="/assets/js/233.37c29b6e.js"><link rel="prefetch" href="/assets/js/234.69900621.js"><link rel="prefetch" href="/assets/js/235.2f519beb.js"><link rel="prefetch" href="/assets/js/236.b9b6114e.js"><link rel="prefetch" href="/assets/js/237.2a1db7cc.js"><link rel="prefetch" href="/assets/js/238.600f5600.js"><link rel="prefetch" href="/assets/js/239.8be2d1bb.js"><link rel="prefetch" href="/assets/js/24.cd0b391e.js"><link rel="prefetch" href="/assets/js/240.251e8c24.js"><link rel="prefetch" href="/assets/js/241.d43f064c.js"><link rel="prefetch" href="/assets/js/242.86d5eacb.js"><link rel="prefetch" href="/assets/js/243.80963c44.js"><link rel="prefetch" href="/assets/js/244.13652b92.js"><link rel="prefetch" href="/assets/js/245.eb2bce9c.js"><link rel="prefetch" href="/assets/js/246.a8194f0b.js"><link rel="prefetch" href="/assets/js/247.db00d5f1.js"><link rel="prefetch" href="/assets/js/248.14ed39e2.js"><link rel="prefetch" href="/assets/js/249.142eeecc.js"><link rel="prefetch" href="/assets/js/25.ab3e6688.js"><link rel="prefetch" href="/assets/js/250.4590655a.js"><link rel="prefetch" href="/assets/js/251.f29145b6.js"><link rel="prefetch" href="/assets/js/252.c2322d74.js"><link rel="prefetch" href="/assets/js/253.10424c86.js"><link rel="prefetch" href="/assets/js/254.58d56bca.js"><link rel="prefetch" href="/assets/js/255.c5159cc8.js"><link rel="prefetch" href="/assets/js/256.4cb6be49.js"><link rel="prefetch" href="/assets/js/257.75008126.js"><link rel="prefetch" href="/assets/js/258.1f8c2773.js"><link rel="prefetch" href="/assets/js/259.69dba07f.js"><link rel="prefetch" href="/assets/js/26.e6c287b8.js"><link rel="prefetch" href="/assets/js/260.46e86546.js"><link rel="prefetch" href="/assets/js/261.a525bac6.js"><link rel="prefetch" href="/assets/js/262.cf8ad77b.js"><link rel="prefetch" href="/assets/js/263.5ca29a56.js"><link rel="prefetch" href="/assets/js/264.563d42f2.js"><link rel="prefetch" href="/assets/js/265.133d3598.js"><link rel="prefetch" href="/assets/js/266.27779523.js"><link rel="prefetch" href="/assets/js/267.31bcfcb3.js"><link rel="prefetch" href="/assets/js/268.9f0a35d7.js"><link rel="prefetch" href="/assets/js/269.7aa9cb8f.js"><link rel="prefetch" href="/assets/js/27.d2998298.js"><link rel="prefetch" href="/assets/js/270.d550ac18.js"><link rel="prefetch" href="/assets/js/271.072c0c98.js"><link rel="prefetch" href="/assets/js/272.2662f9f7.js"><link rel="prefetch" href="/assets/js/273.15ade875.js"><link rel="prefetch" href="/assets/js/274.4a133ef6.js"><link rel="prefetch" href="/assets/js/275.96345d22.js"><link rel="prefetch" href="/assets/js/276.081ed3d8.js"><link rel="prefetch" href="/assets/js/277.3ab443bb.js"><link rel="prefetch" href="/assets/js/278.34bcd6be.js"><link rel="prefetch" href="/assets/js/279.bd0a94a7.js"><link rel="prefetch" href="/assets/js/28.3b62382f.js"><link rel="prefetch" href="/assets/js/29.ea60709b.js"><link rel="prefetch" href="/assets/js/3.7fe9dcd8.js"><link rel="prefetch" href="/assets/js/30.849ee28c.js"><link rel="prefetch" href="/assets/js/31.70d851a0.js"><link rel="prefetch" href="/assets/js/32.ec64b5a1.js"><link rel="prefetch" href="/assets/js/33.da3a8699.js"><link rel="prefetch" href="/assets/js/34.215b8865.js"><link rel="prefetch" href="/assets/js/35.b2199b5c.js"><link rel="prefetch" href="/assets/js/36.8706ed65.js"><link rel="prefetch" href="/assets/js/37.01581e35.js"><link rel="prefetch" href="/assets/js/38.ae096490.js"><link rel="prefetch" href="/assets/js/39.7a5b29f6.js"><link rel="prefetch" href="/assets/js/4.654a78a2.js"><link rel="prefetch" href="/assets/js/40.f12b20fb.js"><link rel="prefetch" href="/assets/js/41.45c22686.js"><link rel="prefetch" href="/assets/js/42.03c2287d.js"><link rel="prefetch" href="/assets/js/43.d1ec6a2f.js"><link rel="prefetch" href="/assets/js/44.8d124671.js"><link rel="prefetch" href="/assets/js/45.91d492b8.js"><link rel="prefetch" href="/assets/js/46.48b2a256.js"><link rel="prefetch" href="/assets/js/47.45559e22.js"><link rel="prefetch" href="/assets/js/48.3a6edc8d.js"><link rel="prefetch" href="/assets/js/49.214a15d3.js"><link rel="prefetch" href="/assets/js/5.c50a77fe.js"><link rel="prefetch" href="/assets/js/50.4f64b9f1.js"><link rel="prefetch" href="/assets/js/51.988e74d3.js"><link rel="prefetch" href="/assets/js/52.cec08826.js"><link rel="prefetch" href="/assets/js/53.d2406cf6.js"><link rel="prefetch" href="/assets/js/54.7b9f0481.js"><link rel="prefetch" href="/assets/js/55.351fec50.js"><link rel="prefetch" href="/assets/js/56.5a4a0b96.js"><link rel="prefetch" href="/assets/js/57.21798229.js"><link rel="prefetch" href="/assets/js/58.b5c5745f.js"><link rel="prefetch" href="/assets/js/59.fe0e4afa.js"><link rel="prefetch" href="/assets/js/6.cc995097.js"><link rel="prefetch" href="/assets/js/60.e653cff0.js"><link rel="prefetch" href="/assets/js/61.c85d235a.js"><link rel="prefetch" href="/assets/js/62.699a95f2.js"><link rel="prefetch" href="/assets/js/63.a17696d7.js"><link rel="prefetch" href="/assets/js/64.742a9eb5.js"><link rel="prefetch" href="/assets/js/65.6d300178.js"><link rel="prefetch" href="/assets/js/66.86cef7aa.js"><link rel="prefetch" href="/assets/js/67.796d125c.js"><link rel="prefetch" href="/assets/js/68.b3c2d220.js"><link rel="prefetch" href="/assets/js/69.07795e0e.js"><link rel="prefetch" href="/assets/js/7.c7d43652.js"><link rel="prefetch" href="/assets/js/70.3854d9b8.js"><link rel="prefetch" href="/assets/js/71.d66f2b34.js"><link rel="prefetch" href="/assets/js/72.1350fee4.js"><link rel="prefetch" href="/assets/js/73.a3dded61.js"><link rel="prefetch" href="/assets/js/74.74f0bfff.js"><link rel="prefetch" href="/assets/js/75.4ec95ff3.js"><link rel="prefetch" href="/assets/js/76.1f00db96.js"><link rel="prefetch" href="/assets/js/77.a9d9378a.js"><link rel="prefetch" href="/assets/js/78.a7ddad0d.js"><link rel="prefetch" href="/assets/js/79.46324233.js"><link rel="prefetch" href="/assets/js/8.f0e74718.js"><link rel="prefetch" href="/assets/js/80.801cf0a4.js"><link rel="prefetch" href="/assets/js/81.546e27d2.js"><link rel="prefetch" href="/assets/js/82.d91ad6e6.js"><link rel="prefetch" href="/assets/js/83.fa6487b0.js"><link rel="prefetch" href="/assets/js/84.52dea52e.js"><link rel="prefetch" href="/assets/js/85.68419534.js"><link rel="prefetch" href="/assets/js/86.075c2556.js"><link rel="prefetch" href="/assets/js/87.76c9b596.js"><link rel="prefetch" href="/assets/js/88.030619a8.js"><link rel="prefetch" href="/assets/js/89.cf9cfa28.js"><link rel="prefetch" href="/assets/js/9.2ff272e7.js"><link rel="prefetch" href="/assets/js/90.d95a8854.js"><link rel="prefetch" href="/assets/js/91.c54d7493.js"><link rel="prefetch" href="/assets/js/92.2c3257eb.js"><link rel="prefetch" href="/assets/js/93.b952455a.js"><link rel="prefetch" href="/assets/js/94.4b40b489.js"><link rel="prefetch" href="/assets/js/95.26f010a2.js"><link rel="prefetch" href="/assets/js/96.b2776f09.js"><link rel="prefetch" href="/assets/js/97.d1c685d8.js"><link rel="prefetch" href="/assets/js/98.e1e97635.js"><link rel="prefetch" href="/assets/js/99.9f5d62e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7df12f51.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Xuli's blog" class="logo"> <span class="site-name can-hide">Xuli's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9bda44/404" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/pages/9bda44/404" class="nav-link">学习笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wenxuli/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/images/character.png"> <div class="blogger-info"><h3>Xuli</h3> <span>前端界的小白</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9bda44/404" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/pages/9bda44/404" class="nav-link">学习笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wenxuli/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/categories/?category=%E3%80%8AElectron%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E3%80%8B" title="分类" data-v-1baff76c>《Electron中文文档》</a></li><li data-v-1baff76c><a href="/categories/?category=api" title="分类" data-v-1baff76c>api</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/wenxuli2" target="_blank" title="作者" class="beLink" data-v-1baff76c>Xuli</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2022-04-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">session<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="session"><a href="#session" class="header-anchor">#</a> session</h1> <blockquote><p>管理浏览器会话、cookie、缓存、代理设置等。</p></blockquote> <p>进程：<a href="/《Electron中文文档》/glossary.html#main-process">主进程</a></p> <p><code>session</code> 模块可用于创建新的 <code>session</code> 对象。</p> <p>您还可以通过使用 <code>WebContents</code> 的 <code>session</code> 属性或从 <code>session</code> 模块访问现有页面的 &lt;0&gt;session&lt;/0&gt;。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
win<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">'http://github.com'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> ses <span class="token operator">=</span> win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ses<span class="token punctuation">.</span><span class="token function">getUserAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h2> <p><code>session</code> 模块具有以下方法:</p> <h3 id="session-frompartition-partition-options"><a href="#session-frompartition-partition-options" class="header-anchor">#</a> <code>session.fromPartition(partition[, options])</code></h3> <ul><li><code>partition</code> String</li> <li><code>options</code> Object (可选)
<ul><li><code>cache</code> Boolean - 是否可以使用缓存.</li></ul></li></ul> <p>Returns <code>Session</code> - 根据<code>partition</code>字符串产生的session实例。 当这里已存在一个<code>Session</code>具有相同的<code>partition</code>, 它将被返回; 否则一个新的<code>Session</code>实例将根据<code>options</code>被创建。</p> <p>如果 <code>partition</code> 以 <code>persist:</code>开头, 该页面将使用持续的 session，并在所有页面生效，且使用同一个<code>partition</code>. 如果没有 <code>persist:</code> 前缀, 页面将使用 in-memory session. 如果没有设置<code>partition</code>，app 将返回默认的session。</p> <p>要根据<code>options</code>创建<code>Session</code>，你需要确保<code>Session</code>的<code>partition</code>在之前从未被使用。 没有办法修改一个已存在的<code>Session</code>对象的<code>options</code>。</p> <h2 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h2> <p><code>session</code> 模块具有以下方法:</p> <h3 id="session-defaultsession"><a href="#session-defaultsession" class="header-anchor">#</a> <code>session.defaultSession</code></h3> <p>一个<code>Session</code>对象，该应用程序的默认session对象。</p> <h2 id="类-session"><a href="#类-session" class="header-anchor">#</a> 类: Session</h2> <blockquote><p>获取和设置Session的属性。</p></blockquote> <p>Process: <a href="/《Electron中文文档》/glossary.html#main-process">Main</a><br> <em>This class is not exported from the <code>'electron'</code> module. It is only available as a return value of other methods in the Electron API.</em></p> <p>你可以创建一个 <code>Session</code>对象在<code>session</code>模块中。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ses <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">fromPartition</span><span class="token punctuation">(</span><span class="token string">'persist:name'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ses<span class="token punctuation">.</span><span class="token function">getUserAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="实例事件"><a href="#实例事件" class="header-anchor">#</a> 实例事件</h3> <p>以下事件会在<code>Session</code>实例触发。</p> <h4 id="instance-events"><a href="#instance-events" class="header-anchor">#</a> Instance Events</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>item</code> <a href="/《Electron中文文档》/api/download-item.html">DownloadItem</a></li> <li><code>webContents</code> <a href="/《Electron中文文档》/api/web-contents.html">WebContents</a></li></ul> <p>当 Electron 刚要在<code>webContents</code>中下载<code>item</code>的时候触发。</p> <p>调用<code>event.preventDefault()</code>方法，将会停止下载，并且在进程的next tick中，<code>item</code>将不再可用。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'will-download'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> item<span class="token punctuation">,</span> webContents</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'got'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'/somewhere'</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="event-extension-loaded"><a href="#event-extension-loaded" class="header-anchor">#</a> Event: 'extension-loaded'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>extension</code> <a href="/《Electron中文文档》/api/structures/extension.html">扩展插件</a></li></ul> <p>在扩展插件加载完成后触发。 当一个扩展插件被添加到 &quot;enabled&quot; 的扩展插件集合内部时， 将自动触发 这包括：</p> <ul><li>扩展插件正在从 <code>Session.loadExtension</code> 中被加载</li> <li>扩展插件正在被重新加载：
<ul><li>由于崩溃</li> <li>扩展插件被请求重新载入 (<a href="https://developer.chrome.com/extensions/runtime#method-reload" target="_blank" rel="noopener noreferrer"><code>chrome.runtime.reload()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</li></ul></li></ul> <h4 id="event-extension-unloaded"><a href="#event-extension-unloaded" class="header-anchor">#</a> Event: 'extension-unloaded'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>extension</code> <a href="/《Electron中文文档》/api/structures/extension.html">扩展插件</a></li></ul> <p>当一个扩展插件被卸载后触发。 当 <code>Session.removeExtension</code> 被调用时也会触发。</p> <h4 id="event-extension-ready"><a href="#event-extension-ready" class="header-anchor">#</a> Event: 'extension-ready'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>extension</code> <a href="/《Electron中文文档》/api/structures/extension.html">扩展插件</a></li></ul> <p>当一个扩展插件加载完成，同时所有必要的浏览器状态也初始化完毕，允许启动插件背景页面时， 将触发此事件。</p> <h4 id="event-preconnect"><a href="#event-preconnect" class="header-anchor">#</a> Event: 'preconnect'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>preconnectUrl</code> String - 渲染器为预连接请求的 URL</li> <li><code>allowCredentials</code> Boolean - True 代表着渲染器在请求一个包含 credentials 信息的链接 (详见<a href="https://w3c.github.io/resource-hints/#preconnect" target="_blank" rel="noopener noreferrer">spec<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</li></ul> <p>当渲染进程已经预链接到 URL 后将触发此事件, 通常用于 <a href="https://w3c.github.io/resource-hints/" target="_blank" rel="noopener noreferrer">资源加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提醒</p> <h4 id="event-spellcheck-dictionary-initialized"><a href="#event-spellcheck-dictionary-initialized" class="header-anchor">#</a> Event: 'spellcheck-dictionary-initialized'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>languageCode</code> String - 字典文件的语言代码</li></ul> <p>当一个hunspell字典初始化成功时触发。 这个事件在文件被下载之后触发。</p> <h4 id="event-spellcheck-dictionary-download-begin"><a href="#event-spellcheck-dictionary-download-begin" class="header-anchor">#</a> Event: 'spellcheck-dictionary-download-begin'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>languageCode</code> String - 字典文件的语言代码</li></ul> <p>当 hunspell 字典文件开始下载时触发</p> <h4 id="event-spellcheck-dictionary-download-success"><a href="#event-spellcheck-dictionary-download-success" class="header-anchor">#</a> Event: 'spellcheck-dictionary-download-success'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>languageCode</code> String - 字典文件的语言代码</li></ul> <p>当 hunspell 字典文件下载成功触发</p> <h4 id="event-spellcheck-dictionary-download-failure"><a href="#event-spellcheck-dictionary-download-failure" class="header-anchor">#</a> Event: 'spellcheck-dictionary-download-failure'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>languageCode</code> String - 字典文件的语言代码</li></ul> <p>当hunspell字典下载失败时触发。  如果需要详细信息，你应当查看网络日志并且检查下载请求。</p> <h4 id="event-select-hid-device"><a href="#event-select-hid-device" class="header-anchor">#</a> Event: 'select-hid-device'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>details</code> Object
<ul><li><code>deviceList</code> <a href="/《Electron中文文档》/api/structures/hid-device.html">HIDDevice[]</a></li> <li><code>frame</code> <a href="/《Electron中文文档》/api/web-frame-main.html">WebFrameMain</a></li></ul></li> <li><code>callback</code> Function
<ul><li><code>deviceId</code> String | null (optional)</li></ul></li></ul> <p>Emitted when a HID device needs to be selected when a call to <code>navigator.hid.requestDevice</code> is made. <code>callback</code> should be called with <code>deviceId</code> to be selected; passing no arguments to <code>callback</code> will cancel the request.  Additionally, permissioning on <code>navigator.hid</code> can be further managed by using <a href="#sessetpermissioncheckhandlerhandler">ses.setPermissionCheckHandler(handler)</a> and <a href="#sessetdevicepermissionhandlerhandler">ses.setDevicePermissionHandler(handler)`</a>.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> win <span class="token operator">=</span> <span class="token keyword">null</span>

app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">setPermissionCheckHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission<span class="token punctuation">,</span> requestingOrigin<span class="token punctuation">,</span> details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">===</span> <span class="token string">'hid'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Add logic here to determine if permission should be given to allow HID selection</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Optionally, retrieve previously persisted devices from a persistent store</span>
  <span class="token keyword">const</span> grantedDevices <span class="token operator">=</span> <span class="token function">fetchGrantedDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">setDevicePermissionHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>details<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">.</span>hostname <span class="token operator">===</span> <span class="token string">'some-host'</span> <span class="token operator">&amp;&amp;</span> details<span class="token punctuation">.</span>deviceType <span class="token operator">===</span> <span class="token string">'hid'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> <span class="token number">123</span> <span class="token operator">&amp;&amp;</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>productId <span class="token operator">===</span> <span class="token number">345</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Always allow this type of device (this allows skipping the call to `navigator.hid.requestDevice` first)</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Search through the list of devices that have previously been granted permission</span>
      <span class="token keyword">return</span> grantedDevices<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">grantedDevice</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> grantedDevice<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>vendorId <span class="token operator">&amp;&amp;</span>
              grantedDevice<span class="token punctuation">.</span>productId <span class="token operator">===</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>productId <span class="token operator">&amp;&amp;</span>
              grantedDevice<span class="token punctuation">.</span>serialNumber <span class="token operator">&amp;&amp;</span> grantedDevice<span class="token punctuation">.</span>serialNumber <span class="token operator">===</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>serialNumber
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'select-hid-device'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> details<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> selectedDevice <span class="token operator">=</span> details<span class="token punctuation">.</span>deviceList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">device</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> device<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> <span class="token string">'9025'</span> <span class="token operator">&amp;&amp;</span> device<span class="token punctuation">.</span>productId <span class="token operator">===</span> <span class="token string">'67'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>selectedPort<span class="token operator">?.</span>deviceId<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h4 id="event-hid-device-added"><a href="#event-hid-device-added" class="header-anchor">#</a> Event: 'hid-device-added'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>details</code> Object
<ul><li><code>device</code> <a href="/《Electron中文文档》/api/structures/hid-device.html">HIDDevice[]</a></li> <li><code>frame</code> <a href="/《Electron中文文档》/api/web-frame-main.html">WebFrameMain</a></li></ul></li></ul> <p>Emitted when a new HID device becomes available. For example, when a new USB device is plugged in.</p> <p>This event will only be emitted after <code>navigator.hid.requestDevice</code> has been called and <code>select-hid-device</code> has fired.</p> <h4 id="event-hid-device-removed"><a href="#event-hid-device-removed" class="header-anchor">#</a> Event: 'hid-device-removed'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>details</code> Object
<ul><li><code>device</code> <a href="/《Electron中文文档》/api/structures/hid-device.html">HIDDevice[]</a></li> <li><code>frame</code> <a href="/《Electron中文文档》/api/web-frame-main.html">WebFrameMain</a></li></ul></li></ul> <p>Emitted when a HID device has been removed.  比如， 当一个USB设备被移除时。</p> <p>This event will only be emitted after <code>navigator.hid.requestDevice</code> has been called and <code>select-hid-device</code> has fired.</p> <h4 id="event-select-serial-port"><a href="#event-select-serial-port" class="header-anchor">#</a> Event: 'select-serial-port'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>portList</code> <a href="/《Electron中文文档》/api/structures/serial-port.html">SerialPort[]</a></li> <li><code>webContents</code> <a href="/《Electron中文文档》/api/web-contents.html">WebContents</a></li> <li><code>callback</code> Function
<ul><li><code>portId</code> String</li></ul></li></ul> <p>调用 <code>navigator.serial.requestPort</code> 并选择一系列端口时触发此事件。 <code>callback</code> 方法将在<code>portId</code> 被选中后调用, 给<code>callback</code> 方法一个空字符串参数将取消请求。  此外， <code>navigator.serial</code> 的许可权可以通过使用 <a href="#sessetpermissioncheckhandlerhandler">ses.setPermissionCheckHandler(handler)</a> 来设置 <code>serial</code> 权限。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> win <span class="token operator">=</span> <span class="token keyword">null</span>

app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'select-serial-port'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> portList<span class="token punctuation">,</span> webContents<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> selectedPort <span class="token operator">=</span> portList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">device</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> device<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> <span class="token string">'9025'</span> <span class="token operator">&amp;&amp;</span> device<span class="token punctuation">.</span>productId <span class="token operator">===</span> <span class="token string">'67'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selectedPort<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>selectedPort<span class="token punctuation">.</span>portId<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="event-serial-port-added"><a href="#event-serial-port-added" class="header-anchor">#</a> Event: 'serial-port-added'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>port</code> <a href="/《Electron中文文档》/api/structures/serial-port.html">SerialPort</a></li> <li><code>webContents</code> <a href="/《Electron中文文档》/api/web-contents.html">WebContents</a></li></ul> <p>当 <code>navigator.serial.requestPort</code> 已经被调用时触发此事件，同时 如果新的串行端口可用则 <code>select-serial-port</code> 事件也将触发。  比如，当一个新的USB设备插入时将触发此事件。</p> <h4 id="event-serial-port-removed"><a href="#event-serial-port-removed" class="header-anchor">#</a> Event: 'serial-port-removed'</h4> <p>返回:</p> <ul><li><code>event</code> Event</li> <li><code>port</code> <a href="/《Electron中文文档》/api/structures/serial-port.html">SerialPort</a></li> <li><code>webContents</code> <a href="/《Electron中文文档》/api/web-contents.html">WebContents</a></li></ul> <p>当 <code>navigator.serial.requestPort</code> 已经被调用时触发，同时如果串行端口已经被删除则触发 <code>select-serial-port</code> 事件。  比如， 当一个USB设备被移除时。</p> <h3 id="实例方法"><a href="#实例方法" class="header-anchor">#</a> 实例方法</h3> <p>在<code>Session</code>实例对象中，有以下方法:</p> <h4 id="ses-getcachesize"><a href="#ses-getcachesize" class="header-anchor">#</a> <code>ses.getCacheSize()</code></h4> <p>Returns <code>Promise&lt;Integer&gt;</code> - 当前 session 会话缓存大小，用 byte 字节作为单位。</p> <h4 id="ses-clearcache"><a href="#ses-clearcache" class="header-anchor">#</a> <code>ses.clearCache()</code></h4> <p>Returns <code>Promise&lt;void&gt;</code> - 当缓存清除操作完成时可获取</p> <p>清除session的HTTP缓存。</p> <h4 id="ses-clearstoragedata-options"><a href="#ses-clearstoragedata-options" class="header-anchor">#</a> <code>ses.clearStorageData([options])</code></h4> <ul><li><code>options</code> Object (可选)
<ul><li><code>origin</code> String - (可选项) 这个值应该按照 <code>window.location.origin</code> 的形式: <code>协议://主机名:端口</code>方式设置。</li> <li><code>storages</code> String[] (可选项) - 要清除的存储类型，包含: <code>appcache</code>, <code>cookies</code>, <code>filesystem</code>, <code>indexdb</code>, <code>localstorage</code>, <code>shadercache</code>, <code>websql</code>, <code>serviceworkers</code>, <code>cachestorage</code>. 如果没有指定storages，将会清除所有的storages类型</li> <li><code>quotas</code> String[] - (可选项) 要清除的配额类型, 包含: <code>temporary</code>, <code>persistent</code>, <code>syncable</code>。 如果没有指定，将会清除所有的quotas。</li></ul></li></ul> <p>Returns <code>Promise&lt;void&gt;</code> - 当存储的数据已经被清理时可获得</p> <h4 id="ses-flushstoragedata"><a href="#ses-flushstoragedata" class="header-anchor">#</a> <code>ses.flushStorageData()</code></h4> <p>写入任何未写入DOMStorage数据到磁盘.</p> <h4 id="ses-setproxy-config"><a href="#ses-setproxy-config" class="header-anchor">#</a> <code>ses.setProxy(config)</code></h4> <ul><li><code>config</code> Object
<ul><li><code>mode</code> String (可选) - 代理模式。 可以是其中之一： <code>direct</code>, <code>auto_detect</code>, <code>pac_script</code>, <code>fixed_servers</code> 或 <code>system</code>。 如未指定，则根据其他选项自动判断
<ul><li><code>direct</code> 在直接模式下，所有连接都是直接创建的，无需任何代理。</li> <li><code>auto_detect</code> 在auto_detect模式下，代理配置由 PAC 脚本决定，该脚本 可在 http://wpad/wpad.dat 下载。</li> <li><code>pac_script</code> In pac_script mode the proxy configuration is determined by a PAC script that is retrieved from the URL specified in the <code>pacScript</code>. This is the default mode if <code>pacScript</code> is specified.</li> <li><code>fixed_servers</code> In fixed_servers mode the proxy configuration is specified in <code>proxyRules</code>. This is the default mode if <code>proxyRules</code> is specified.</li> <li><code>system</code> In system mode the proxy configuration is taken from the operating system. Note that the system mode is different from setting no proxy configuration. In the latter case, Electron falls back to the system settings only if no command-line options influence the proxy configuration.</li></ul></li> <li><code>pacScript</code> String (optional) - The URL associated with the PAC file.</li> <li><code>proxyRules</code> String (optional) - Rules indicating which proxies to use.</li> <li><code>proxyBypassRules</code> String (optional) - Rules indicating which URLs should bypass the proxy settings.</li></ul></li></ul> <p>Returns <code>Promise&lt;void&gt;</code> - Resolves when the proxy setting process is complete.</p> <p>代理设置</p> <p>When <code>mode</code> is unspecified, <code>pacScript</code> and <code>proxyRules</code> are provided together, the <code>proxyRules</code> option is ignored and <code>pacScript</code> configuration is applied.</p> <p>You may need <code>ses.closeAllConnections</code> to close currently in flight connections to prevent pooled sockets using previous proxy from being reused by future requests.</p> <p><code>proxyRules</code> 要遵循以下规则:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>proxyRules <span class="token operator">=</span> schemeProxies<span class="token punctuation">[</span><span class="token string">&quot;;&quot;</span><span class="token operator">&lt;</span>schemeProxies<span class="token operator">&gt;</span><span class="token punctuation">]</span>
schemeProxies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>urlScheme<span class="token operator">&gt;</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>proxyURIList<span class="token operator">&gt;</span>
urlScheme <span class="token operator">=</span> <span class="token string">&quot;http&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;https&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;ftp&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;socks&quot;</span>
proxyURIList <span class="token operator">=</span> <span class="token operator">&lt;</span>proxyURL<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">&quot;,&quot;</span><span class="token operator">&lt;</span>proxyURIList<span class="token operator">&gt;</span><span class="token punctuation">]</span>
proxyURL <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>proxyScheme<span class="token operator">&gt;</span><span class="token string">&quot;://&quot;</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>proxyHost<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">&quot;:&quot;</span><span class="token operator">&lt;</span>proxyPort<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>例如：</p> <ul><li><code>http=foopy:80;ftp=foopy2</code> - Use HTTP proxy <code>foopy:80</code> for <code>http://</code> URLs, and HTTP proxy <code>foopy2:80</code> for <code>ftp://</code> URLs.</li> <li><code>foopy:80</code> - Use HTTP proxy <code>foopy:80</code> for all URLs.</li> <li><code>foopy:80,bar,direct://</code> - Use HTTP proxy <code>foopy:80</code> for all URLs, failing over to <code>bar</code> if <code>foopy:80</code> is unavailable, and after that using no proxy.</li> <li><code>socks4://foopy</code> - Use SOCKS v4 proxy <code>foopy:1080</code> for all URLs.</li> <li><code>http=foopy,socks5://bar.com</code> - Use HTTP proxy <code>foopy</code> for http URLs, and fail over to the SOCKS5 proxy <code>bar.com</code> if <code>foopy</code> is unavailable.</li> <li><code>http=foopy,direct://</code> - Use HTTP proxy <code>foopy</code> for http URLs, and use no proxy if <code>foopy</code> is unavailable.</li> <li><code>http=foopy;socks=foopy2</code> - 对于http URL，用<code>foopy</code>作为HTTP协议代理，而其它所有URL则用<code>socks4://foopy2</code> 协议。</li></ul> <p><code>proxyBypassRules</code>是一个用逗号分隔的规则列表, 如下所述:</p> <ul><li><p><code>[ URL_SCHEME &quot;://&quot; ] HOSTNAME_PATTERN [ &quot;:&quot; &lt;port&gt; ]</code></p> <p>与 HOSTNAME_PATTERN 模式匹配的所有主机名。</p> <p>例如: &quot;foobar.com&quot;, &quot;<em>foobar.com&quot;, &quot;</em>.foobar.com&quot;, &quot;<em>foobar.com:99&quot;, &quot;https://x.</em>.y.com:99&quot;</p></li> <li><p><code>&quot;.&quot; HOSTNAME_SUFFIX_PATTERN [ &quot;:&quot; PORT ]</code></p> <p>匹配特定域名后缀。</p> <p>例如： &quot;.google.com&quot;, &quot;.com&quot;, &quot;http://.google.com&quot;</p></li> <li><p><code>[ SCHEME &quot;://&quot; ] IP_LITERAL [ &quot;:&quot; PORT ]</code></p> <p>匹配 IP 地址文本的 url。</p> <p>例如: &quot;127.0.1&quot;, &quot;[0:0::1]&quot;, &quot;[::1]&quot;, &quot;http://[::1]:99&quot;</p></li> <li><p><code>IP_LITERAL &quot;/&quot; PREFIX_LENGTH_IN_BITS</code></p> <p>匹配任何在给定IP范围内失败的URL。 IP范围使用指定的CIDR。</p> <p>例如: &quot;192.168.1.1/16&quot;, &quot;fefe:13::abc/33&quot;.</p></li> <li><p><code>&lt;local&gt;</code></p> <p>匹配本地地址。 The meaning of <code>&lt;local&gt;</code> is whether the host matches one of: &quot;127.0.0.1&quot;, &quot;::1&quot;, &quot;localhost&quot;.</p></li></ul> <h4 id="ses-resolveproxy-url"><a href="#ses-resolveproxy-url" class="header-anchor">#</a> <code>ses.resolveProxy(url)</code></h4> <ul><li><code>url</code> URL</li></ul> <p>Returns <code>Promise&lt;String&gt;</code> - Resolves with the proxy information for <code>url</code>.</p> <h4 id="ses-forcereloadproxyconfig"><a href="#ses-forcereloadproxyconfig" class="header-anchor">#</a> <code>ses.forceReloadProxyConfig()</code></h4> <p>Returns <code>Promise&lt;void&gt;</code> - Resolves when the all internal states of proxy service is reset and the latest proxy configuration is reapplied if it's already available. The pac script will be fetched from <code>pacScript</code> again if the proxy mode is <code>pac_script</code>.</p> <h4 id="ses-setdownloadpath-path"><a href="#ses-setdownloadpath-path" class="header-anchor">#</a> <code>ses.setDownloadPath(path)</code></h4> <ul><li><code>path</code> String - The download location.</li></ul> <p>Sets download saving directory. By default, the download directory will be the <code>Downloads</code> under the respective app folder.</p> <h4 id="ses-enablenetworkemulation-options"><a href="#ses-enablenetworkemulation-options" class="header-anchor">#</a> <code>ses.enableNetworkEmulation(options)</code></h4> <ul><li><code>选项</code> 对象
<ul><li><code>offline</code> Boolean (optional) - Whether to emulate network outage. Defaults to false.</li> <li><code>latency</code> Double (optional) - RTT in ms. Defaults to 0 which will disable latency throttling.</li> <li><code>downloadThroughput</code> Double (optional) - Download rate in Bps. Defaults to 0 which will disable download throttling.</li> <li><code>uploadThroughput</code> Double (optional) - Upload rate in Bps. Defaults to 0 which will disable upload throttling.</li></ul></li></ul> <p>通过指定的配置为 <code>session</code> 模拟网络。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// To emulate a GPRS connection with 50kbps throughput and 500 ms latency.</span>
window<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">enableNetworkEmulation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">latency</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token literal-property property">downloadThroughput</span><span class="token operator">:</span> <span class="token number">6400</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uploadThroughput</span><span class="token operator">:</span> <span class="token number">6400</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// To emulate a network outage.</span>
window<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">enableNetworkEmulation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">offline</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="ses-preconnect-options"><a href="#ses-preconnect-options" class="header-anchor">#</a> <code>ses.preconnect(options)</code></h4> <ul><li><code>选项</code> 对象
<ul><li><code>url</code> String - URL for preconnect. Only the origin is relevant for opening the socket.</li> <li><code>numSockets</code> Number (optional) - number of sockets to preconnect. Must be between 1 and 6. Defaults to 1.</li></ul></li></ul> <p>Preconnects the given number of sockets to an origin.</p> <h4 id="ses-closeallconnections"><a href="#ses-closeallconnections" class="header-anchor">#</a> <code>ses.closeAllConnections()</code></h4> <p>Returns <code>Promise&lt;void&gt;</code> - Resolves when all connections are closed.</p> <p><strong>Note:</strong> It will terminate / fail all requests currently in flight.</p> <h4 id="ses-disablenetworkemulation"><a href="#ses-disablenetworkemulation" class="header-anchor">#</a> <code>ses.disableNetworkEmulation()</code></h4> <p>Disables any network emulation already active for the <code>session</code>. Resets to the original network configuration.</p> <h4 id="ses-setcertificateverifyproc-proc"><a href="#ses-setcertificateverifyproc-proc" class="header-anchor">#</a> <code>ses.setCertificateVerifyProc(proc)</code></h4> <ul><li><code>proc</code> Function | null
<ul><li><code>request</code> Object
<ul><li><code>hostname</code> String</li> <li><code>certificate</code> <a href="/《Electron中文文档》/api/structures/certificate.html">证书</a></li> <li><code>validatedCertificate</code> <a href="/《Electron中文文档》/api/structures/certificate.html">Certificate</a></li> <li><code>verificationResult</code> String - chromium证书验证结果</li> <li><code>errorCode</code> Integer - 错误代码</li></ul></li> <li><code>callback</code> Function
<ul><li><code>verificationResult</code> Integer - Value can be one of certificate error codes from <a href="https://source.chromium.org/chromium/chromium/src/+/master:net/base/net_error_list.h" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Apart from the certificate error codes, the following special codes can be used.
<ul><li><code>-0</code> - 表示成功并禁用证书透明度验证</li> <li><code>-2</code> - 表示失败</li> <li><code>-3</code> - 使用chromium的验证结果</li></ul></li></ul></li></ul></li></ul> <p>每当一个服务器证书请求验证，<code>proc</code> 将被这样 <code>proc(request, callback)</code> 调用，为 <code>session</code> 设置证书验证过程。 回调函数 <code>callback(0)</code> 接受证书，<code>callback(-2)</code> 驳回证书。</p> <p>调用 <code>setCertificateVerifyProc（null）</code>将恢复为默认证书验证过程。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">setCertificateVerifyProc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> hostname <span class="token punctuation">}</span> <span class="token operator">=</span> request
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hostname <span class="token operator">===</span> <span class="token string">'github.com'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p><strong>NOTE:</strong> The result of this procedure is cached by the network service.</p></blockquote> <h4 id="ses-setpermissionrequesthandler-handler"><a href="#ses-setpermissionrequesthandler-handler" class="header-anchor">#</a> <code>ses.setPermissionRequestHandler(handler)</code></h4> <ul><li><code>handler</code> Function | null
<ul><li><code>webContents</code> <a href="/《Electron中文文档》/api/web-contents.html">WebContents</a> - 请求权限的WebContents。  Please note that if the request comes from a subframe you should use <code>requestingUrl</code> to check the request origin.</li> <li><code>permission</code> String - The type of requested permission.
<ul><li><code>clipboard-read</code> - Request access to read from the clipboard.</li> <li><code>media</code> -  Request access to media devices such as camera, microphone and speakers.</li> <li><code>display-capture</code> - Request access to capture the screen.</li> <li><code>mediaKeySystem</code> - Request access to DRM protected content.</li> <li><code>geolocation</code> - Request access to user's current location.</li> <li><code>notifications</code> - Request notification creation and the ability to display them in the user's system tray.</li> <li><code>midi</code> - Request MIDI access in the <code>webmidi</code> API.</li> <li><code>midiSysex</code> - Request the use of system exclusive messages in the <code>webmidi</code> API.</li> <li><code>pointerLock</code> - Request to directly interpret mouse movements as an input method. Click <a href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to know more.</li> <li><code>fullscreen</code> - Request for the app to enter fullscreen mode.</li> <li><code>openExternal</code> - Request to open links in external applications.</li> <li><code>unknown</code> - An unrecognized permission request</li></ul></li> <li><code>callback</code> Function
<ul><li><code>permissionGranted</code> Boolean - 允许或拒绝该权限.</li></ul></li> <li><code>details</code> Object - Some properties are only available on certain permission types.
<ul><li><code>externalURL</code> String (optional) - The url of the <code>openExternal</code> request.</li> <li><code>mediaTypes</code> String[] (optional) - The types of media access being requested, elements can be <code>video</code> or <code>audio</code></li> <li><code>requestingUrl</code> String - The last URL the requesting frame loaded</li> <li><code>isMainFrame</code> Boolean - Whether the frame making the request is the main frame</li></ul></li></ul></li></ul> <p>设置可用于响应 <code>session</code> 的权限请求的处理程序。 调用 <code>callback(true)</code> 将允许该权限, 调用 <code>callback(false)</code> 将拒绝它。 若要清除处理程序, 请调用 <code>setPermissionRequestHandler (null)</code>。  Please note that you must also implement <code>setPermissionCheckHandler</code> to get complete permission handling. Most web APIs do a permission check and then make a permission request if the check is denied.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span><span class="token function">fromPartition</span><span class="token punctuation">(</span><span class="token string">'some-partition'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPermissionRequestHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>webContents<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'some-host'</span> <span class="token operator">&amp;&amp;</span> permission <span class="token operator">===</span> <span class="token string">'notifications'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// denied.</span>
  <span class="token punctuation">}</span>

  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="ses-setpermissioncheckhandler-handler"><a href="#ses-setpermissioncheckhandler-handler" class="header-anchor">#</a> <code>ses.setPermissionCheckHandler(handler)</code></h4> <ul><li><code>handler</code> 函数&lt;Boolean&gt; | null
<ul><li><code>webContents</code> (<a href="/《Electron中文文档》/api/web-contents.html">WebContents</a> | null) - WebContents checking the permission.  Please note that if the request comes from a subframe you should use <code>requestingUrl</code> to check the request origin.  所有进行权限检查的跨源子帧将传递一个 <code>null</code> 的 webContents 对象给此处理程序，而某些其他权限检查（如 <code>notifications</code> 检查）将始终传递一个 <code>null</code>。  You should use <code>embeddingOrigin</code> and <code>requestingOrigin</code> to determine what origin the owning frame and the requesting frame are on respectively.</li> <li><code>permission</code> String - Type of permission check.  Valid values are <code>midiSysex</code>, <code>notifications</code>, <code>geolocation</code>, <code>media</code>,<code>mediaKeySystem</code>,<code>midi</code>, <code>pointerLock</code>, <code>fullscreen</code>, <code>openExternal</code>, <code>hid</code>, or <code>serial</code>.</li> <li><code>requestingOrigin</code> String - The origin URL of the permission check</li> <li><code>details</code> Object - Some properties are only available on certain permission types.
<ul><li><code>embeddingOrigin</code> String (optional) - The origin of the frame embedding the frame that made the permission check.  Only set for cross-origin sub frames making permission checks.</li> <li><code>securityOrigin</code> String (optional) - The security origin of the <code>media</code> check.</li> <li><code>mediaType</code> String (optional) - The type of media access being requested, can be <code>video</code>, <code>audio</code> or <code>unknown</code></li> <li><code>requestingUrl</code> String (optional) - The last URL the requesting frame loaded.  This is not provided for cross-origin sub frames making permission checks.</li> <li><code>isMainFrame</code> Boolean - Whether the frame making the request is the main frame</li></ul></li></ul></li></ul> <p>Sets the handler which can be used to respond to permission checks for the <code>session</code>. Returning <code>true</code> will allow the permission and <code>false</code> will reject it.  Please note that you must also implement <code>setPermissionRequestHandler</code> to get complete permission handling. Most web APIs do a permission check and then make a permission request if the check is denied. To clear the handler, call <code>setPermissionCheckHandler(null)</code>.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span><span class="token function">fromPartition</span><span class="token punctuation">(</span><span class="token string">'some-partition'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPermissionCheckHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission<span class="token punctuation">,</span> requestingOrigin</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>requestingOrigin<span class="token punctuation">)</span><span class="token punctuation">.</span>hostname <span class="token operator">===</span> <span class="token string">'some-host'</span> <span class="token operator">&amp;&amp;</span> permission <span class="token operator">===</span> <span class="token string">'notifications'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// granted</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// denied</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="ses-setdevicepermissionhandler-handler"><a href="#ses-setdevicepermissionhandler-handler" class="header-anchor">#</a> <code>ses.setDevicePermissionHandler(handler)</code></h4> <ul><li><code>handler</code> 函数&lt;Boolean&gt; | null
<ul><li><code>details</code> Object
<ul><li><code>deviceType</code> String - The type of device that permission is being requested on, can be <code>hid</code>.</li> <li><code>origin</code> String - The origin URL of the device permission check.</li> <li><code>device</code> <a href="/《Electron中文文档》/api/structures/hid-device.html">HIDDevice</a> - the device that permission is being requested for.</li> <li><code>frame</code> <a href="/《Electron中文文档》/api/web-frame-main.html">WebFrameMain</a> - WebFrameMain checking the device permission.</li></ul></li></ul></li></ul> <p>Sets the handler which can be used to respond to device permission checks for the <code>session</code>. Returning <code>true</code> will allow the device to be permitted and <code>false</code> will reject it. To clear the handler, call <code>setDevicePermissionHandler(null)</code>. This handler can be used to provide default permissioning to devices without first calling for permission to devices (eg via <code>navigator.hid.requestDevice</code>).  If this handler is not defined, the default device permissions as granted through device selection (eg via <code>navigator.hid.requestDevice</code>) will be used. Additionally, the default behavior of Electron is to store granted device permision through the lifetime of the corresponding WebContents.  If longer term storage is needed, a developer can store granted device permissions (eg when handling the <code>select-hid-device</code> event) and then read from that storage with <code>setDevicePermissionHandler</code>.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> win <span class="token operator">=</span> <span class="token keyword">null</span>

app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">setPermissionCheckHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">webContents<span class="token punctuation">,</span> permission<span class="token punctuation">,</span> requestingOrigin<span class="token punctuation">,</span> details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">===</span> <span class="token string">'hid'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Add logic here to determine if permission should be given to allow HID selection</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Optionally, retrieve previously persisted devices from a persistent store</span>
  <span class="token keyword">const</span> grantedDevices <span class="token operator">=</span> <span class="token function">fetchGrantedDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">setDevicePermissionHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">details</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>details<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">.</span>hostname <span class="token operator">===</span> <span class="token string">'some-host'</span> <span class="token operator">&amp;&amp;</span> details<span class="token punctuation">.</span>deviceType <span class="token operator">===</span> <span class="token string">'hid'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> <span class="token number">123</span> <span class="token operator">&amp;&amp;</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>productId <span class="token operator">===</span> <span class="token number">345</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Always allow this type of device (this allows skipping the call to `navigator.hid.requestDevice` first)</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Search through the list of devices that have previously been granted permission</span>
      <span class="token keyword">return</span> grantedDevices<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">grantedDevice</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> grantedDevice<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>vendorId <span class="token operator">&amp;&amp;</span>
              grantedDevice<span class="token punctuation">.</span>productId <span class="token operator">===</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>productId <span class="token operator">&amp;&amp;</span>
              grantedDevice<span class="token punctuation">.</span>serialNumber <span class="token operator">&amp;&amp;</span> grantedDevice<span class="token punctuation">.</span>serialNumber <span class="token operator">===</span> details<span class="token punctuation">.</span>device<span class="token punctuation">.</span>serialNumber
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'select-hid-device'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> details<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> selectedDevice <span class="token operator">=</span> details<span class="token punctuation">.</span>deviceList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">device</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> device<span class="token punctuation">.</span>vendorId <span class="token operator">===</span> <span class="token string">'9025'</span> <span class="token operator">&amp;&amp;</span> device<span class="token punctuation">.</span>productId <span class="token operator">===</span> <span class="token string">'67'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>selectedPort<span class="token operator">?.</span>deviceId<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h4 id="ses-clearhostresolvercache"><a href="#ses-clearhostresolvercache" class="header-anchor">#</a> <code>ses.clearHostResolverCache()</code></h4> <p>Returns <code>Promise&lt;void&gt;</code> - Resolves when the operation is complete.</p> <p>清除主机解析程序的缓存。</p> <h4 id="ses-allowntlmcredentialsfordomains-domains"><a href="#ses-allowntlmcredentialsfordomains-domains" class="header-anchor">#</a> <code>ses.allowNTLMCredentialsForDomains(domains)</code></h4> <ul><li><code>domains</code> String - 一个逗号分隔的服务器列表, 用于收集已经启用身份验证的服务器。</li></ul> <p>动态设置是否始终为 HTTP NTLM 发送凭据或协商身份验证。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token comment">// 以 &quot;example.com&quot;、&quot;foobar.com&quot;、&quot;baz&quot; 结尾的 url 用于身份验证。</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">allowNTLMCredentialsForDomains</span><span class="token punctuation">(</span><span class="token string">'*example.com, *foobar.com, *baz'</span><span class="token punctuation">)</span>

<span class="token comment">// 所有的 url 都可以用作身份验证</span>
session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">allowNTLMCredentialsForDomains</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ses-setuseragent-useragent-acceptlanguages"><a href="#ses-setuseragent-useragent-acceptlanguages" class="header-anchor">#</a> <code>ses.setUserAgent(userAgent[, acceptLanguages])</code></h4> <ul><li><code>userAgent</code> String</li> <li><code>acceptLanguages</code> String (可选)</li></ul> <p>覆盖当前会话的 <code>userAgent</code> 和 <code>acceptLanguages</code>.</p> <p><code>acceptLanguages</code> 必须是用逗号分隔的语言代码列表，例如 <code>&quot;en-US,fr,de,ko,zh-CN,ja&quot;</code>.</p> <p>这不会影响现有的<code>WebContents</code>, 并且每个<code>WebContents</code>都可以使用 <code>webContents.setUserAgent</code>重写会话范围的user agent。</p> <h4 id="ses-ispersistent"><a href="#ses-ispersistent" class="header-anchor">#</a> <code>ses.isPersistent()</code></h4> <p>Returns <code>Boolean</code> - Whether or not this session is a persistent one. The default <code>webContents</code> session of a <code>BrowserWindow</code> is persistent. When creating a session from a partition, session prefixed with <code>persist:</code> will be persistent, while others will be temporary.</p> <h4 id="ses-getuseragent"><a href="#ses-getuseragent" class="header-anchor">#</a> <code>ses.getUserAgent()</code></h4> <p>返回 <code>String</code> - 当前会话的 user agent.</p> <h4 id="ses-setsslconfig-config"><a href="#ses-setsslconfig-config" class="header-anchor">#</a> <code>ses.setSSLConfig(config)</code></h4> <ul><li><code>config</code> Object
<ul><li><code>minVersion</code> String (可选) - 值可以是 <code>tls1</code>， <code>tls1.1</code>， <code>tls1.2</code> 或 <code>tls1.3</code>。 The minimum SSL version to allow when connecting to remote servers. 默认为<code>tls1</code>。</li> <li><code>maxVersion</code> String (可选) - 可以是 <code>tls1.2</code> 或 <code>tls1.3</code>。 The maximum SSL version to allow when connecting to remote servers. 默认值为 <code>tls1.3</code>。</li> <li><code>disabledCipherSuites</code> Integer[] (optional) - List of cipher suites which should be explicitly prevented from being used in addition to those disabled by the net built-in policy. Supported literal forms: 0xAABB, where AA is <code>cipher_suite[0]</code> and BB is <code>cipher_suite[1]</code>, as defined in RFC 2246, Section 7.4.1.2. Unrecognized but parsable cipher suites in this form will not return an error. Ex: To disable TLS_RSA_WITH_RC4_128_MD5, specify 0x0004, while to disable TLS_ECDH_ECDSA_WITH_RC4_128_SHA, specify 0xC002. Note that TLSv1.3 ciphers cannot be disabled using this mechanism.</li></ul></li></ul> <p>Sets the SSL configuration for the session. All subsequent network requests will use the new configuration. Existing network connections (such as WebSocket connections) will not be terminated, but old sockets in the pool will not be reused for new connections.</p> <h4 id="ses-getblobdata-identifier"><a href="#ses-getblobdata-identifier" class="header-anchor">#</a> <code>ses.getBlobData(identifier)</code></h4> <ul><li><code>identifier</code> String - 有效的 UUID.</li></ul> <p>Returns <code>Promise&lt;Buffer&gt;</code> - resolves with blob data.</p> <h4 id="ses-downloadurl-url"><a href="#ses-downloadurl-url" class="header-anchor">#</a> <code>ses.downloadURL(url)</code></h4> <ul><li><code>url</code> String</li></ul> <p>Initiates a download of the resource at <code>url</code>. The API will generate a <a href="/《Electron中文文档》/api/download-item.html">DownloadItem</a> that can be accessed with the <a href="#event-will-download">will-download</a> event.</p> <p><strong>Note:</strong> This does not perform any security checks that relate to a page's origin, unlike <a href="/《Electron中文文档》/api/web-contents.html#contentsdownloadurlurl"><code>webContents.downloadURL</code></a>.</p> <h4 id="ses-createinterrupteddownload-options"><a href="#ses-createinterrupteddownload-options" class="header-anchor">#</a> <code>ses.createInterruptedDownload(options)</code></h4> <ul><li><code>选项</code> 对象
<ul><li><code>path</code> String - 下载的绝对路径.</li> <li><code>urlChain</code> String[] - 完整的 url 下载地址.</li> <li><code>mimeType</code> String (可选)</li> <li><code>offset</code> Integer - 下载的开始范围.</li> <li><code>length</code> Integer - 下载的总长度。</li> <li><code>lastModified</code> String (optional) - Last-Modified header value.</li> <li><code>eTag</code> String (optional) - ETag header value.</li> <li><code>startTime</code> Double (optional) - 下载的时间是从 UNIX 时代以来的秒数开始的。</li></ul></li></ul> <p>允许从上一个 <code>Session</code> 恢复 <code>cancelled</code> 或 <code>interrupted</code> 下载。 该 API 将生成一个 <a href="/《Electron中文文档》/api/download-item.html"> DownloadItem </a>, 可使用 <a href="#event-will-download"> will-download </a> 事件进行访问。 <a href="/《Electron中文文档》/api/download-item.html"> DownloadItem </a> 将不具有与之关联的任何 <code>WebContents</code>, 并且初始状态将为 <code>interrupted</code>。 只有在 <a href="/《Electron中文文档》/api/download-item.html"> DownloadItem </a> 上调用 <code>resume</code> API 时, 才会启动下载。</p> <h4 id="ses-clearauthcache"><a href="#ses-clearauthcache" class="header-anchor">#</a> <code>ses.clearAuthCache()</code></h4> <p>Returns <code>Promise&lt;void&gt;</code> - resolves when the session’s HTTP authentication cache has been cleared.</p> <h4 id="ses-setpreloads-preloads"><a href="#ses-setpreloads-preloads" class="header-anchor">#</a> <code>ses.setPreloads(preloads)</code></h4> <ul><li><code>preloads</code> String[] - 数组，该数组由所有需要进行预加载的脚本的绝对路径组成。</li></ul> <p>Adds scripts that will be executed on ALL web contents that are associated with this session just before normal <code>preload</code> scripts run.</p> <h4 id="ses-getpreloads"><a href="#ses-getpreloads" class="header-anchor">#</a> <code>ses.getPreloads()</code></h4> <p>返回 <code>String[]</code> 返回一个数组，这个数组由已经注册过的预加载脚本的路径组成。</p> <h4 id="ses-setspellcheckerenabled-enable"><a href="#ses-setspellcheckerenabled-enable" class="header-anchor">#</a> <code>ses.setSpellCheckerEnabled(enable)</code></h4> <ul><li><code>enable</code> Boolean</li></ul> <p>Sets whether to enable the builtin spell checker.</p> <h4 id="ses-isspellcheckerenabled"><a href="#ses-isspellcheckerenabled" class="header-anchor">#</a> <code>ses.isSpellCheckerEnabled()</code></h4> <p>Returns <code>Boolean</code> - Whether the builtin spell checker is enabled.</p> <h4 id="ses-setspellcheckerlanguages-languages"><a href="#ses-setspellcheckerlanguages-languages" class="header-anchor">#</a> <code>ses.setSpellCheckerLanguages(languages)</code></h4> <ul><li><code>languages</code> String[] - An array of language codes to enable the spellchecker for.</li></ul> <p>The built in spellchecker does not automatically detect what language a user is typing in.  In order for the spell checker to correctly check their words you must call this API with an array of language codes.  You can get the list of supported language codes with the <code>ses.availableSpellCheckerLanguages</code> property.</p> <p><strong>Note:</strong> On macOS the OS spellchecker is used and will detect your language automatically.  This API is a no-op on macOS.</p> <h4 id="ses-getspellcheckerlanguages"><a href="#ses-getspellcheckerlanguages" class="header-anchor">#</a> <code>ses.getSpellCheckerLanguages()</code></h4> <p>Returns <code>String[]</code> - An array of language codes the spellchecker is enabled for.  If this list is empty the spellchecker will fallback to using <code>en-US</code>.  By default on launch if this setting is an empty list Electron will try to populate this setting with the current OS locale.  This setting is persisted across restarts.</p> <p><strong>Note:</strong> On macOS the OS spellchecker is used and has its own list of languages.  This API is a no-op on macOS.</p> <h4 id="ses-setspellcheckerdictionarydownloadurl-url"><a href="#ses-setspellcheckerdictionarydownloadurl-url" class="header-anchor">#</a> <code>ses.setSpellCheckerDictionaryDownloadURL(url)</code></h4> <ul><li><code>url</code> String - A base URL for Electron to download hunspell dictionaries from.</li></ul> <p>By default Electron will download hunspell dictionaries from the Chromium CDN.  If you want to override this behavior you can use this API to point the dictionary downloader at your own hosted version of the hunspell dictionaries.  We publish a <code>hunspell_dictionaries.zip</code> file with each release which contains the files you need to host here, the file server must be <strong>case insensitive</strong> you must upload each file twice, once with the case it has in the ZIP file and once with the filename as all lower case.</p> <p>If the files present in <code>hunspell_dictionaries.zip</code> are available at <code>https://example.com/dictionaries/language-code.bdic</code> then you should call this api with <code>ses.setSpellCheckerDictionaryDownloadURL('https://example.com/dictionaries/')</code>.  Please note the trailing slash.  The URL to the dictionaries is formed as <code>${url}${filename}</code>.</p> <p><strong>Note:</strong> On macOS the OS spellchecker is used and therefore we do not download any dictionary files.  This API is a no-op on macOS.</p> <h4 id="ses-listwordsinspellcheckerdictionary"><a href="#ses-listwordsinspellcheckerdictionary" class="header-anchor">#</a> <code>ses.listWordsInSpellCheckerDictionary()</code></h4> <p>Returns <code>Promise&lt;String[]&gt;</code> - An array of all words in app's custom dictionary. Resolves when the full dictionary is loaded from disk.</p> <h4 id="ses-addwordtospellcheckerdictionary-word"><a href="#ses-addwordtospellcheckerdictionary-word" class="header-anchor">#</a> <code>ses.addWordToSpellCheckerDictionary(word)</code></h4> <ul><li><code>word</code> String - The word you want to add to the dictionary</li></ul> <p>Returns <code>Boolean</code> - Whether the word was successfully written to the custom dictionary. This API will not work on non-persistent (in-memory) sessions.</p> <p><strong>Note:</strong> On macOS and Windows 10 this word will be written to the OS custom dictionary as well</p> <h4 id="ses-removewordfromspellcheckerdictionary-word"><a href="#ses-removewordfromspellcheckerdictionary-word" class="header-anchor">#</a> <code>ses.removeWordFromSpellCheckerDictionary(word)</code></h4> <ul><li><code>word</code> String - The word you want to remove from the dictionary</li></ul> <p>Returns <code>Boolean</code> - Whether the word was successfully removed from the custom dictionary. This API will not work on non-persistent (in-memory) sessions.</p> <p><strong>Note:</strong> On macOS and Windows 10 this word will be removed from the OS custom dictionary as well</p> <h4 id="ses-loadextension-path-options"><a href="#ses-loadextension-path-options" class="header-anchor">#</a> <code>ses.loadExtension(path[, options])</code></h4> <ul><li><code>path</code> String - Path to a directory containing an unpacked Chrome extension</li> <li><code>options</code> Object (可选)
<ul><li><code>allowFileAccess</code> Boolean - Whether to allow the extension to read local files over <code>file://</code> protocol and inject content scripts into <code>file://</code> pages. This is required e.g. for loading devtools extensions on <code>file://</code> URLs. 默认值为 false.</li></ul></li></ul> <p>Returns <code>Promise&lt;Extension&gt;</code> - resolves when the extension is loaded.</p> <p>This method will raise an exception if the extension could not be loaded. If there are warnings when installing the extension (e.g. if the extension requests an API that Electron does not support) then they will be logged to the console.</p> <p>Note that Electron does not support the full range of Chrome extensions APIs. See <a href="/《Electron中文文档》/api/extensions.html#supported-extensions-apis">Supported Extensions APIs</a> for more details on what is supported.</p> <p>Note that in previous versions of Electron, extensions that were loaded would be remembered for future runs of the application. This is no longer the case: <code>loadExtension</code> must be called on every boot of your app if you want the extension to be loaded.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> session<span class="token punctuation">.</span>defaultSession<span class="token punctuation">.</span><span class="token function">loadExtension</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'react-devtools'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// allowFileAccess is required to load the devtools extension on file:// URLs.</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">allowFileAccess</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token comment">// Note that in order to use the React DevTools extension, you'll need to</span>
  <span class="token comment">// download and unzip a copy of the extension.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>This API does not support loading packed (.crx) extensions.</p> <p><strong>注意:</strong> 该 API 不能在 <code>app</code> 模块的 <code>ready</code> 事件之前调用.</p> <p><strong>Note:</strong> Loading extensions into in-memory (non-persistent) sessions is not supported and will throw an error.</p> <h4 id="ses-removeextension-extensionid"><a href="#ses-removeextension-extensionid" class="header-anchor">#</a> <code>ses.removeExtension(extensionId)</code></h4> <ul><li><code>extensionId</code> String - ID of extension to remove</li></ul> <p>Unloads an extension.</p> <p><strong>注意:</strong> 该 API 不能在 <code>app</code> 模块的 <code>ready</code> 事件之前调用.</p> <h4 id="ses-getextension-extensionid"><a href="#ses-getextension-extensionid" class="header-anchor">#</a> <code>ses.getExtension(extensionId)</code></h4> <ul><li><code>extensionId</code> String - ID of extension to query</li></ul> <p>Returns <code>Extension</code> | <code>null</code> - The loaded extension with the given ID.</p> <p><strong>注意:</strong> 该 API 不能在 <code>app</code> 模块的 <code>ready</code> 事件之前调用.</p> <h4 id="ses-getallextensions"><a href="#ses-getallextensions" class="header-anchor">#</a> <code>ses.getAllExtensions()</code></h4> <p>Returns <code>Extension[]</code> - A list of all loaded extensions.</p> <p><strong>注意:</strong> 该 API 不能在 <code>app</code> 模块的 <code>ready</code> 事件之前调用.</p> <h4 id="ses-getstoragepath"><a href="#ses-getstoragepath" class="header-anchor">#</a> <code>ses.getStoragePath()</code></h4> <p>A <code>String | null</code> indicating the absolute file system path where data for this session is persisted on disk.  For in memory sessions this returns <code>null</code>.</p> <h3 id="实例属性"><a href="#实例属性" class="header-anchor">#</a> 实例属性</h3> <p>以下属性在<code>Session</code>实例上可用：</p> <h4 id="ses-availablespellcheckerlanguages-只读"><a href="#ses-availablespellcheckerlanguages-只读" class="header-anchor">#</a> <code>ses.availableSpellCheckerLanguages</code> <em>只读</em></h4> <p>A <code>String[]</code> array which consists of all the known available spell checker languages.  Providing a language code to the <code>setSpellCheckerLanguages</code> API that isn't in this array will result in an error.</p> <h4 id="ses-spellcheckerenabled"><a href="#ses-spellcheckerenabled" class="header-anchor">#</a> <code>ses.spellCheckerEnabled</code></h4> <p>A <code>Boolean</code> indicating whether builtin spell checker is enabled.</p> <h4 id="ses-storagepath-只读"><a href="#ses-storagepath-只读" class="header-anchor">#</a> <code>ses.storagePath</code> <em>只读</em></h4> <p>A <code>String | null</code> indicating the absolute file system path where data for this session is persisted on disk.  For in memory sessions this returns <code>null</code>.</p> <h4 id="ses-cookies-只读"><a href="#ses-cookies-只读" class="header-anchor">#</a> <code>ses.cookies</code> <em>只读</em></h4> <p>A <a href="/《Electron中文文档》/api/cookies.html"><code>Cookies</code></a> object for this session.</p> <h4 id="ses-serviceworkers-只读"><a href="#ses-serviceworkers-只读" class="header-anchor">#</a> <code>ses.serviceWorkers</code> <em>只读</em></h4> <p>A <a href="/《Electron中文文档》/api/service-workers.html"><code>ServiceWorkers</code></a> object for this session.</p> <h4 id="ses-webrequest-只读"><a href="#ses-webrequest-只读" class="header-anchor">#</a> <code>ses.webRequest</code> <em>只读</em></h4> <p>A <a href="/《Electron中文文档》/api/web-request.html"><code>WebRequest</code></a> object for this session.</p> <h4 id="ses-protocol-只读"><a href="#ses-protocol-只读" class="header-anchor">#</a> <code>ses.protocol</code> <em>只读</em></h4> <p>Session中使用<a href="/《Electron中文文档》/api/protocol.html"><code>Protocol</code></a>对象</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> protocol <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">fromPartition</span><span class="token punctuation">(</span><span class="token string">'some-partition'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>protocol
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>protocol<span class="token punctuation">.</span><span class="token function">registerFileProtocol</span><span class="token punctuation">(</span><span class="token string">'atom'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Failed to register protocol'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="ses-netlog-只读"><a href="#ses-netlog-只读" class="header-anchor">#</a> <code>ses.netLog</code> <em>只读</em></h4> <p>A <a href="/《Electron中文文档》/api/net-log.html"><code>NetLog</code></a> object for this session.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> session <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> netLog <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">fromPartition</span><span class="token punctuation">(</span><span class="token string">'some-partition'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>netLog
  netLog<span class="token punctuation">.</span><span class="token function">startLogging</span><span class="token punctuation">(</span><span class="token string">'/path/to/net-log'</span><span class="token punctuation">)</span>
  <span class="token comment">// After some network events</span>
  <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">await</span> netLog<span class="token punctuation">.</span><span class="token function">stopLogging</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Net-logs written to'</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/wenxuli/vuepress-theme-vdoing/edit/master/docs/《Electron中文文档》/api/session.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c77e3b/"><div>
            JavaScript 中搜索数组元素
            <!----></div></a> <span class="date">04-15</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/170433/"><div>
            TypeScript 的基本使用
            <!----></div></a> <span class="date">04-15</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/8f7083/"><div>
            js读取文件
            <!----></div></a> <span class="date">04-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1031553051@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wenxuli2" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Xuli | <a href="#" target="_blank">MIT License</a> | <a href="https://beian.miit.gov.cn/#/Integrated/recordQuery">粤ICP备2022033241号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.ae1014d0.js" defer></script><script src="/assets/js/2.0929aa91.js" defer></script><script src="/assets/js/101.f7532c5e.js" defer></script>
  </body>
</html>
