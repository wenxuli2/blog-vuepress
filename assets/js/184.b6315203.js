(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{661:function(e,t,v){"use strict";v.r(t);var _=v(20),s=Object(_.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h2",{attrs:{id:"类-webrequest"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#类-webrequest"}},[e._v("#")]),e._v(" 类：WebRequest")]),e._v(" "),v("blockquote",[v("p",[e._v("在一个请求生命周期的不同阶段，截取和修改其内容。")])]),e._v(" "),v("p",[e._v("Process: "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/glossary.html#main-process"}},[e._v("Main")]),v("br"),e._v(" "),v("em",[e._v("This class is not exported from the "),v("code",[e._v("'electron'")]),e._v(" module. It is only available as a return value of other methods in the Electron API.")])],1),e._v(" "),v("p",[e._v("使用 "),v("code",[e._v("Session")]),e._v(" 的 "),v("code",[e._v("WebRequest")]),e._v(" 属性访问 "),v("code",[e._v("WebRequest")]),e._v(" 类的实例。")]),e._v(" "),v("p",[v("code",[e._v("WebRequest")]),e._v(" 下的所有方法接收 "),v("code",[e._v("filter")]),e._v(" 和 "),v("code",[e._v("listener")]),e._v(" 两个参数。 当 API 中有事件被触发时, "),v("code",[e._v("listener(details)")]),e._v(" 会被调用， "),v("code",[e._v("details")]),e._v(" 中包含了请求的详细信息。")]),e._v(" "),v("p",[e._v("⚠️ Only the last attached "),v("code",[e._v("listener")]),e._v(" will be used. Passing "),v("code",[e._v("null")]),e._v(" as "),v("code",[e._v("listener")]),e._v(" will unsubscribe from the event.")]),e._v(" "),v("p",[v("code",[e._v("filter")]),e._v(" 对象具有一个 "),v("code",[e._v("url")]),e._v(" 属性, 它是一个 url 模式数组, 用于筛选出与 url 模式不匹配的请求。 如果省略 "),v("code",[e._v("filter")]),e._v(", 则所有请求都将匹配。")]),e._v(" "),v("p",[e._v("对于某些事件, "),v("code",[e._v("listener")]),e._v(" 是通过 "),v("code",[e._v("callback")]),e._v(" 传递的, 当 "),v("code",[e._v("listener")]),e._v(" 完成其工作时, 应使用 "),v("code",[e._v("response")]),e._v(" 对象进行调用。")]),e._v(" "),v("p",[e._v("为 requests 添加 "),v("code",[e._v("User-Agent")]),e._v(" 头的示例：")]),e._v(" "),v("div",{staticClass:"language-javascript line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-javascript"}},[v("code",[v("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" session "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'electron'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Modify the user agent for all requests to the following urls.")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" filter "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),v("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("urls")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https://*.github.com/*'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'*://electron.github.io'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\nsession"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("defaultSession"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("webRequest"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("onBeforeSendHeaders")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("filter"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),v("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("details"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" callback")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  details"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("requestHeaders"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'User-Agent'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'MyAgent'")]),e._v("\n  "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("callback")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("requestHeaders")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" details"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("requestHeaders "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br"),v("span",{staticClass:"line-number"},[e._v("6")]),v("br"),v("span",{staticClass:"line-number"},[e._v("7")]),v("br"),v("span",{staticClass:"line-number"},[e._v("8")]),v("br"),v("span",{staticClass:"line-number"},[e._v("9")]),v("br"),v("span",{staticClass:"line-number"},[e._v("10")]),v("br"),v("span",{staticClass:"line-number"},[e._v("11")]),v("br")])]),v("h3",{attrs:{id:"实例方法"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#实例方法"}},[e._v("#")]),e._v(" 实例方法")]),e._v(" "),v("p",[e._v("以下事件会在"),v("code",[e._v("Session")]),e._v("实例触发。")]),e._v(" "),v("h4",{attrs:{id:"webrequest-onbeforerequest-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onbeforerequest-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onBeforeRequest([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("uploadData")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/upload-data.html"}},[e._v("UploadData[]")])],1)])]),e._v(" "),v("li",[v("code",[e._v("callback")]),e._v(" Function\n"),v("ul",[v("li",[v("code",[e._v("response")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("cancel")]),e._v(" Boolean (可选)")]),e._v(" "),v("li",[v("code",[e._v("redirectURL")]),e._v(" String (可选) - 原始请求被阻止发送或完成，而不是重定向到给定的URL。")])])])])])])])]),e._v(" "),v("p",[e._v("当请求即将发生时，调用"),v("code",[e._v("listener(details, callback)")]),e._v("。")]),e._v(" "),v("p",[v("code",[e._v("uploadData")]),e._v(" 是"),v("code",[e._v("UploadData")]),e._v("对象的一个数组。")]),e._v(" "),v("p",[e._v("必须使用 "),v("code",[e._v("response")]),e._v(" 对象调用"),v("code",[e._v("callback")]),e._v("。")]),e._v(" "),v("p",[e._v("Some examples of valid "),v("code",[e._v("urls")]),e._v(":")]),e._v(" "),v("div",{staticClass:"language-js line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://foo:1234/'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://foo.com/'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://foo:1234/bar'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'*://*/*'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'*://example.com/*'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'*://example.com/foo/*'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://*.foo:1234/'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'file://foo:1234/bar'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://foo:*/'")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'*://www.foo.com/'")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br"),v("span",{staticClass:"line-number"},[e._v("6")]),v("br"),v("span",{staticClass:"line-number"},[e._v("7")]),v("br"),v("span",{staticClass:"line-number"},[e._v("8")]),v("br"),v("span",{staticClass:"line-number"},[e._v("9")]),v("br"),v("span",{staticClass:"line-number"},[e._v("10")]),v("br")])]),v("h4",{attrs:{id:"webrequest-onbeforesendheaders-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onbeforesendheaders-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onBeforeSendHeaders([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("requestHeaders")]),e._v(" Record<string, string>")])])]),e._v(" "),v("li",[v("code",[e._v("callback")]),e._v(" Function\n"),v("ul",[v("li",[v("code",[e._v("beforeSendResponse")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("cancel")]),e._v(" Boolean (可选)")]),e._v(" "),v("li",[v("code",[e._v("requestHeaders")]),e._v(" Record<string, string | string[]> (optional) - When provided, request will be made with these headers.")])])])])])])])]),e._v(" "),v("p",[e._v("一旦请求头可用，在发送 HTTP 请求之前，"),v("code",[e._v("listener")]),e._v(" 将以 "),v("code",[e._v("listener(details, callback)")]),e._v(" 的形式被调用。 这可能发生在对服务器进行 TCP 连接之后，但在发送任何HTTP数据之前。")]),e._v(" "),v("p",[e._v("The "),v("code",[e._v("callback")]),e._v(" has to be called with a "),v("code",[e._v("response")]),e._v(" object.")]),e._v(" "),v("h4",{attrs:{id:"webrequest-onsendheaders-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onsendheaders-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onSendHeaders([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("requestHeaders")]),e._v(" Record<string, string>")])])])])])]),e._v(" "),v("p",[e._v("在请求发送到服务器之前，"),v("code",[e._v("listener")]),e._v("将以"),v("code",[e._v("listener(details)")]),e._v("的形式被调用，在该侦听器被出发前，上一个对 "),v("code",[e._v("onBeforeSendHeaders")]),e._v(" 响应的修改是可见的。")]),e._v(" "),v("h4",{attrs:{id:"webrequest-onheadersreceived-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onheadersreceived-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onHeadersReceived([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("statusLine")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("statusCode")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("responseHeaders")]),e._v(" Record<string, string[]> (optional)")])])]),e._v(" "),v("li",[v("code",[e._v("callback")]),e._v(" Function\n"),v("ul",[v("li",[v("code",[e._v("headersReceivedResponse")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("cancel")]),e._v(" Boolean (可选)")]),e._v(" "),v("li",[v("code",[e._v("responseHeaders")]),e._v(" Record<string, string | string[]> (optional) - When provided, the server is assumed to have responded with these headers.")]),e._v(" "),v("li",[v("code",[e._v("statusLine")]),e._v(" String (optional) - Should be provided when overriding "),v("code",[e._v("responseHeaders")]),e._v(" to change header status otherwise original response header's status will be used.")])])])])])])])]),e._v(" "),v("p",[e._v("当HTTP请求接收到报头后，会通过调用 "),v("code",[e._v("listener(details, callback)")]),e._v("方法来触发"),v("code",[e._v("listener")]),e._v("。")]),e._v(" "),v("p",[e._v("The "),v("code",[e._v("callback")]),e._v(" has to be called with a "),v("code",[e._v("response")]),e._v(" object.")]),e._v(" "),v("h4",{attrs:{id:"webrequest-onresponsestarted-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onresponsestarted-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onResponseStarted([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("responseHeaders")]),e._v(" Record<string, string[]> (optional)")]),e._v(" "),v("li",[v("code",[e._v("fromCache")]),e._v(" Boolean - 表明响应是取自硬盘缓存。")]),e._v(" "),v("li",[v("code",[e._v("statusCode")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("statusLine")]),e._v(" String")])])])])])]),e._v(" "),v("p",[e._v("当收到响应体的第一个字节时， 将以 "),v("code",[e._v("listener(details)")]),e._v(" 的形式来调用 "),v("code",[e._v("listener")]),e._v("。 对于 HTTP 请求而言，这意味着此时 HTTP 状态行和回应头已经可以读取了。")]),e._v(" "),v("h4",{attrs:{id:"webrequest-onbeforeredirect-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onbeforeredirect-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onBeforeRedirect([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("redirectURL")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("statusCode")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("statusLine")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("ip")]),e._v(" String (可选) - 请求实际发送到的服务器 IP 地址。")]),e._v(" "),v("li",[v("code",[e._v("fromCache")]),e._v(" Boolean")]),e._v(" "),v("li",[v("code",[e._v("responseHeaders")]),e._v(" Record<string, string[]> (optional)")])])])])])]),e._v(" "),v("p",[e._v("当服务器的初始重定向即将发生时，将以 "),v("code",[e._v("listener(details)")]),e._v("的方式调用"),v("code",[e._v("listener")]),e._v("。")]),e._v(" "),v("h4",{attrs:{id:"webrequest-oncompleted-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-oncompleted-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onCompleted([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("responseHeaders")]),e._v(" Record<string, string[]> (optional)")]),e._v(" "),v("li",[v("code",[e._v("fromCache")]),e._v(" Boolean")]),e._v(" "),v("li",[v("code",[e._v("statusCode")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("statusLine")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("error")]),e._v(" String")])])])])])]),e._v(" "),v("p",[e._v("当请求完成时，将以 "),v("code",[e._v("listener(details)")]),e._v("的方式调用"),v("code",[e._v("listener")]),e._v("。")]),e._v(" "),v("h4",{attrs:{id:"webrequest-onerroroccurred-filter-listener"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webrequest-onerroroccurred-filter-listener"}},[e._v("#")]),e._v(" "),v("code",[e._v("webRequest.onErrorOccurred([filter, ]listener)")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("filter")]),e._v(" "),v("RouterLink",{attrs:{to:"/《Electron中文文档》/api/structures/web-request-filter.html"}},[e._v("WebRequestFilter")]),e._v(" (optional)")],1),e._v(" "),v("li",[v("code",[e._v("listener")]),e._v(" Function | null\n"),v("ul",[v("li",[v("code",[e._v("details")]),e._v(" Object\n"),v("ul",[v("li",[v("code",[e._v("id")]),e._v(" Integer")]),e._v(" "),v("li",[v("code",[e._v("url")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("method")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("webContentsId")]),e._v(" Integer (可选)")]),e._v(" "),v("li",[v("code",[e._v("webContents")]),e._v(" WebContents (optional)")]),e._v(" "),v("li",[v("code",[e._v("frame")]),e._v(" WebFrameMain (optional)")]),e._v(" "),v("li",[v("code",[e._v("resourceType")]),e._v(" String - Can be "),v("code",[e._v("mainFrame")]),e._v(", "),v("code",[e._v("subFrame")]),e._v(", "),v("code",[e._v("stylesheet")]),e._v(", "),v("code",[e._v("script")]),e._v(", "),v("code",[e._v("image")]),e._v(", "),v("code",[e._v("font")]),e._v(", "),v("code",[e._v("object")]),e._v(", "),v("code",[e._v("xhr")]),e._v(", "),v("code",[e._v("ping")]),e._v(", "),v("code",[e._v("cspReport")]),e._v(", "),v("code",[e._v("media")]),e._v(", "),v("code",[e._v("webSocket")]),e._v(" or "),v("code",[e._v("other")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("referrer")]),e._v(" String")]),e._v(" "),v("li",[v("code",[e._v("timestamp")]),e._v(" Double")]),e._v(" "),v("li",[v("code",[e._v("fromCache")]),e._v(" Boolean")]),e._v(" "),v("li",[v("code",[e._v("error")]),e._v(" String - 错误描述.")])])])])])]),e._v(" "),v("p",[e._v("当发生错误时，将以 "),v("code",[e._v("listener(details)")]),e._v("的方式调用"),v("code",[e._v("listener")]),e._v("。")])])}),[],!1,null,null,null);t.default=s.exports}}]);