(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{684:function(e,t,a){"use strict";a.r(t);var s=a(20),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"合并请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合并请求"}},[e._v("#")]),e._v(" 合并请求")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#setting-up-your-local-environment"}},[e._v("设置您的本地环境")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#step-1-fork"}},[e._v("步骤1: 复制")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-2-build"}},[e._v("步骤2: 构建")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-3-branch"}},[e._v("步骤3: 分支")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#making-changes"}},[e._v("进行更改")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#step-4-code"}},[e._v("步骤4: 编写代码")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-5-commit"}},[e._v("步骤5: 提交更改")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#commit-message-guidelines"}},[e._v("提交代码说明的指导")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-6-rebase"}},[e._v("步骤6：变基")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-7-test"}},[e._v("步骤7: 测试")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-8-push"}},[e._v("步骤8: 推送代码")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-9-opening-the-pull-request"}},[e._v("步骤9: 新建一个合并代码请求")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-10-discuss-and-update"}},[e._v("步骤10: 讨论和更新")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#approval-and-request-changes-workflow"}},[e._v("批准和请求更改工作流程")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#step-11-landing"}},[e._v("步骤11: 执行合并")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#continuous-integration-testing"}},[e._v("持续集成测试")])])])])]),e._v(" "),a("h2",{attrs:{id:"设置您的本地环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置您的本地环境"}},[e._v("#")]),e._v(" 设置您的本地环境")]),e._v(" "),a("h3",{attrs:{id:"步骤1-复制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-复制"}},[e._v("#")]),e._v(" 步骤1: 复制")]),e._v(" "),a("p",[e._v("在 "),a("a",{attrs:{href:"https://github.com/electron/electron",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub"),a("OutboundLink")],1),e._v(" 上复制项目到你的账号并把项目克隆到本地。")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone git@github.com:username/electron.git\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" electron\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" upstream https://github.com/electron/electron.git\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" fetch upstream\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"步骤2-构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-构建"}},[e._v("#")]),e._v(" 步骤2: 构建")]),e._v(" "),a("p",[e._v("根据您的操作系统, 项目构建步骤和依赖项稍有不同。 请参阅这些关于构建 Electron 项目的详细指南:")]),e._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/《Electron中文文档》/development/build-instructions-macos.html"}},[e._v("在 macOS 上构建")])],1),e._v(" "),a("li",[a("RouterLink",{attrs:{to:"/《Electron中文文档》/development/build-instructions-linux.html"}},[e._v("在 Linux 上构建")])],1),e._v(" "),a("li",[a("RouterLink",{attrs:{to:"/《Electron中文文档》/development/build-instructions-windows.html"}},[e._v("在 Windows 上构建")])],1)]),e._v(" "),a("p",[e._v("一旦您在本地构建了项目, 就可以开始进行更改了!")]),e._v(" "),a("h3",{attrs:{id:"步骤3-分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-分支"}},[e._v("#")]),e._v(" 步骤3: 分支")]),e._v(" "),a("p",[e._v("为了保持您的开发环境的组织, 创建本地分支来保存您的工作。 These should be branched directly off of the "),a("code",[e._v("main")]),e._v(" branch.")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout -b my-branch -t upstream/main\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"进行更改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进行更改"}},[e._v("#")]),e._v(" 进行更改")]),e._v(" "),a("h3",{attrs:{id:"步骤4-编写代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤4-编写代码"}},[e._v("#")]),e._v(" 步骤4: 编写代码")]),e._v(" "),a("p",[e._v("Most pull requests opened against the "),a("code",[e._v("electron/electron")]),e._v(" repository include changes to either the C/C++ code in the "),a("code",[e._v("shell/")]),e._v(" folder, the JavaScript code in the "),a("code",[e._v("lib/")]),e._v(" folder, the documentation in "),a("code",[e._v("docs/api/")]),e._v(" or tests in the "),a("code",[e._v("spec/")]),e._v(" folder.")]),e._v(" "),a("p",[e._v("请确保都运行 "),a("code",[e._v("npm run lint")]),e._v(" 在任何代码更改后, 以确保它们遵循项目的代码样式。")]),e._v(" "),a("p",[e._v("在项目的不同部分修改代码时, 有关最佳实践的更多信息, 请参见 "),a("RouterLink",{attrs:{to:"/《Electron中文文档》/development/coding-style.html"}},[e._v(" 编码样式 ")]),e._v("。")],1),e._v(" "),a("h3",{attrs:{id:"步骤5-提交更改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤5-提交更改"}},[e._v("#")]),e._v(" 步骤5: 提交更改")]),e._v(" "),a("p",[e._v("建议将更改按逻辑分组在每个独立提交中。 其他贡献者可以从拆分多个提交中更容易的检查代码的改变。 合并请求没有限制提交的数量。")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" my/changed/files\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" commit\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("请注意, 在最后执行合并代码时多个提交通常会被合并。")]),e._v(" "),a("h4",{attrs:{id:"提交代码说明的指导"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交代码说明的指导"}},[e._v("#")]),e._v(" 提交代码说明的指导")]),e._v(" "),a("p",[e._v("好的提交说明应描述更改的内容和原因。 Electron项目使用"),a("a",{attrs:{href:"https://conventionalcommits.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("语义化提交信息"),a("OutboundLink")],1),e._v("以精简发布过程。")]),e._v(" "),a("p",[e._v("Before a pull request can be merged, it "),a("strong",[e._v("must")]),e._v(" have a pull request title with a semantic prefix.")]),e._v(" "),a("p",[e._v("带有语义化前缀的提交信息的样例：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("fix: don't overwrite prevent_default if default wasn't prevented")])]),e._v(" "),a("li",[a("code",[e._v("feat: add app.isPackaged() method")])]),e._v(" "),a("li",[a("code",[e._v("docs: app.isDefaultProtocolClient 现在在Linux可用")])])]),e._v(" "),a("p",[e._v("常见前缀：")]),e._v(" "),a("ul",[a("li",[e._v("fix: A bug fix")]),e._v(" "),a("li",[e._v("feat: A new feature")]),e._v(" "),a("li",[e._v("docs: Documentation changes")]),e._v(" "),a("li",[e._v("测试：添加缺失测试或纠正现有测试")]),e._v(" "),a("li",[e._v("build: Changes that affect the build system")]),e._v(" "),a("li",[e._v("ci: Changes to our CI configuration files and scripts")]),e._v(" "),a("li",[e._v("perf: A code change that improves performance")]),e._v(" "),a("li",[e._v("refactor: A code change that neither fixes a bug nor adds a feature")]),e._v(" "),a("li",[e._v("style: Changes that do not affect the meaning of the code (linting)")])]),e._v(" "),a("p",[e._v("其他在写提交信息时需要留意的事情：")]),e._v(" "),a("ol",[a("li",[e._v("第一行应该:\n"),a("ul",[a("li",[e._v("contain a short description of the change (preferably 50 characters or less, and no more than 72 characters)")]),e._v(" "),a("li",[e._v("完全使用小写, 除了适当的名词, 缩写, 和引用代码的单词, 如函数/变量名")])])]),e._v(" "),a("li",[e._v("将第二行留空。")]),e._v(" "),a("li",[e._v("每行文字在72列处换行。")])]),e._v(" "),a("h4",{attrs:{id:"重大更改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重大更改"}},[e._v("#")]),e._v(" 重大更改")]),e._v(" "),a("p",[e._v("A commit that has the text "),a("code",[e._v("BREAKING CHANGE:")]),e._v(" at the beginning of its optional body or footer section introduces a breaking API change (correlating with Major in semantic versioning). 一个重大更改可以是任何类型提交的一部分。 e.g., a "),a("code",[e._v("fix:")]),e._v(", "),a("code",[e._v("feat:")]),e._v(" & "),a("code",[e._v("chore:")]),e._v(" types would all be valid, in addition to any other type.")]),e._v(" "),a("p",[e._v("参阅 "),a("a",{attrs:{href:"https://conventionalcommits.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("conventionalcommits.org"),a("OutboundLink")],1),e._v(" 以获得更多细节。")]),e._v(" "),a("h3",{attrs:{id:"步骤6-变基"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤6-变基"}},[e._v("#")]),e._v(" 步骤6：变基")]),e._v(" "),a("p",[e._v("提交更改后, 最好使用 "),a("code",[e._v("git rebase")]),e._v(" (而不是 "),a("code",[e._v("git merge")]),e._v(") 将您的工作与主代码库同步。")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" fetch upstream\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" rebase upstream/main\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("This ensures that your working branch has the latest changes from "),a("code",[e._v("electron/electron")]),e._v(" main.")]),e._v(" "),a("h3",{attrs:{id:"步骤7-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤7-测试"}},[e._v("#")]),e._v(" 步骤7: 测试")]),e._v(" "),a("p",[e._v("Bug 修复和功能应始终与测试一起进行。 提供了 "),a("RouterLink",{attrs:{to:"/《Electron中文文档》/development/testing.html"}},[e._v(" 测试指南 ")]),e._v(" 使流程更容易。 看其他测试, 看看它们应该如何结构化也会有帮助。")],1),e._v(" "),a("p",[e._v("当提交您的改变到合并代码请求前, 请始终运行完整的测试套件。 运行测试:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("请确保 linter 不报告任何问题, 并且所有测试都通过。 请不要提交失败的修补程序或检查。")]),e._v(" "),a("p",[e._v("If you are updating tests and want to run a single spec to check it:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v(" -match"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("menu\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("上述操作只运行与 "),a("code",[e._v("menu")]),e._v(" 匹配的规范模块, 这对于那些在测试周期的末尾进行测试的任何人都很有用。")]),e._v(" "),a("h3",{attrs:{id:"步骤8-推送代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤8-推送代码"}},[e._v("#")]),e._v(" 步骤8: 推送代码")]),e._v(" "),a("p",[e._v("一旦您的提交准备就绪--通过测试和 linting--将您的工作分支推送到您在 GitHub 上复制的分支, 然后开始开启合并代码请求的过程。")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" push origin my-branch\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"步骤9-新建一个合并代码请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤9-新建一个合并代码请求"}},[e._v("#")]),e._v(" 步骤9: 新建一个合并代码请求")]),e._v(" "),a("p",[e._v("从 GitHub 中, 开启一个新的合并代码请求将为您呈现一个模板，这应填写如下:")]),e._v(" "),a("div",{staticClass:"language-markdown line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!--\nThank you for your pull request. Please provide a description above and review\nthe requirements below.\n\nBug fixes and new features should include tests and possibly benchmarks.\n\nContributors guide: https://github.com/electron/electron/blob/main/CONTRIBUTING.md\n--\x3e")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("h3",{attrs:{id:"步骤10-讨论和更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤10-讨论和更新"}},[e._v("#")]),e._v(" 步骤10: 讨论和更新")]),e._v(" "),a("p",[e._v("您可能会得到反馈或请求更改您的请求。 这是提交过程的重要部分, 所以不要气馁! 有些贡献者可能会立刻签署请求。 其他人可能有详细的评论或反馈。 这是过程的必要部分, 以便评估更改是否正确和必要。")]),e._v(" "),a("p",[e._v("要更改现有的请求, 请对本地分支进行更改, 添加新的提交, 并将这些更改推送到您的分支。 GitHub 将自动更新请求。")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" my/changed/files\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" commit\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" push origin my-branch\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("一些更高级的方法比如使用 "),a("code",[e._v("git rebase")]),e._v(" 来管理提交是很有效的, 但这超出本指南的范围。")]),e._v(" "),a("p",[e._v("如果您正在等待某事的答案, 请随时添加评论 ping 向审阅者。 如果您遇到的单词或缩略词似乎不熟悉, 请参阅此 "),a("a",{attrs:{href:"https://sites.google.com/a/chromium.org/dev/glossary",target:"_blank",rel:"noopener noreferrer"}},[e._v(" 词汇表 "),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"批准和请求更改工作流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#批准和请求更改工作流程"}},[e._v("#")]),e._v(" 批准和请求更改工作流程")]),e._v(" "),a("p",[e._v("All pull requests require approval from a "),a("a",{attrs:{href:"https://github.com/electron/electron/blob/main/.github/CODEOWNERS",target:"_blank",rel:"noopener noreferrer"}},[e._v("Code Owner"),a("OutboundLink")],1),e._v(" of the area you modified in order to land. Whenever a maintainer reviews a pull request they may request changes. These may be small, such as fixing a typo, or may involve substantive changes. Such requests are intended to be helpful, but at times may come across as abrupt or unhelpful, especially if they do not include concrete suggestions on "),a("em",[e._v("how")]),e._v(" to change them.")]),e._v(" "),a("p",[e._v("尽量不要气馁。 如果你觉得审查是不公平的, 那么说或者寻求另一个项目参与者的投入。 通常, 这种评论是由于审阅者没有足够的时间来审查和无意的。 这样的困难往往可以用一点耐心来解决。 That said, reviewers should be expected to provide helpful feedback.")]),e._v(" "),a("h3",{attrs:{id:"步骤11-执行合并"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤11-执行合并"}},[e._v("#")]),e._v(" 步骤11: 执行合并")]),e._v(" "),a("p",[e._v("为了合并代码, 代码合并请求要求必须由至少一个 Electron 代码所有者审查和批准并且通过 CI。 之后, 如果没有其他参与者的异议, 请求可以合并。")]),e._v(" "),a("p",[e._v("恭喜您, 感谢您的贡献!")]),e._v(" "),a("h3",{attrs:{id:"持续集成测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持续集成测试"}},[e._v("#")]),e._v(" 持续集成测试")]),e._v(" "),a("p",[e._v("每个请求都在连续集成 (CI) 系统上进行测试, 以确认它在 Electron 支持的平台上工作。")]),e._v(" "),a("p",[e._v('理想情况下, 代码合并请求将在 CI 的所有平台上通过测试 ("变成绿色")。 这意味着所有测试都通过, 并且没有 linting 错误。 然而，CI 自身的基础设施在特定的平台上或者在"不可靠"的测试下会失败("变红") 的情况并不少见。 必须手动检查每个 CI 故障以确定原因。')]),e._v(" "),a("p",[e._v("CI starts automatically when you open a pull request, but only core maintainers can restart a CI run. If you believe CI is giving a false negative, ask a maintainer to restart the tests.")])])}),[],!1,null,null,null);t.default=r.exports}}]);