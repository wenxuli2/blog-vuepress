(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{667:function(s,t,e){"use strict";e.r(t);var a=e(20),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"æ„å»ºè¯´æ˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºè¯´æ˜"}},[s._v("#")]),s._v(" æ„å»ºè¯´æ˜")]),s._v(" "),e("p",[s._v("æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ„å»º "),e("strong",[s._v("Electron")]),s._v("ï¼Œæ¥ç”Ÿæˆè‡ªå®šä¹‰çš„ Electron äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¸ºäº†å°†æ‚¨çš„åº”ç”¨ä»£ç ä¸é¢„æ„å»ºçš„ Electron äºŒè¿›åˆ¶æ–‡ä»¶æ‰“åŒ…å¹¶å‘å¸ƒï¼Œè¯·å‚é˜… "),e("RouterLink",{attrs:{to:"/ã€ŠElectronä¸­æ–‡æ–‡æ¡£ã€‹/tutorial/application-distribution.html"}},[s._v("åº”ç”¨ç¨‹åºå‘å¸ƒ")]),s._v(" æŒ‡å—ã€‚")],1),s._v(" "),e("h2",{attrs:{id:"å¹³å°è¦æ±‚"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¹³å°è¦æ±‚"}},[s._v("#")]),s._v(" å¹³å°è¦æ±‚")]),s._v(" "),e("p",[s._v("å„ä¸ªå¹³å°æ‰€å¯¹åº”çš„æ„å»ºè¦æ±‚å¦‚ä¸‹ï¼š")]),s._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/ã€ŠElectronä¸­æ–‡æ–‡æ¡£ã€‹/development/build-instructions-macos.html#prerequisites"}},[s._v("macOS")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/ã€ŠElectronä¸­æ–‡æ–‡æ¡£ã€‹/development/build-instructions-linux.html#prerequisites"}},[s._v("Linux")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/ã€ŠElectronä¸­æ–‡æ–‡æ¡£ã€‹/development/build-instructions-windows.html#prerequisites"}},[s._v("Windows")])],1)]),s._v(" "),e("h2",{attrs:{id:"æ„å»ºå·¥å…·"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºå·¥å…·"}},[s._v("#")]),s._v(" æ„å»ºå·¥å…·")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/electron/build-tools",target:"_blank",rel:"noopener noreferrer"}},[s._v("Electronçš„æ„å»ºå·¥å…·"),e("OutboundLink")],1),s._v(" è‡ªåŠ¨åŒ–äº†å¾ˆå¤šé…ç½®ä¸åŒçš„ä»æºä»£ç ç¼–è¯‘Electronçš„è®¾ç½®å’Œæ„å»ºç›®æ ‡ã€‚ å¦‚æœæ‚¨å¸Œæœ›æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒï¼Œåˆ™è¯´æ˜å¦‚ä¸‹ã€‚")]),s._v(" "),e("h2",{attrs:{id:"å‰ç½®çŸ¥è¯†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç½®çŸ¥è¯†"}},[s._v("#")]),s._v(" å‰ç½®çŸ¥è¯†")]),s._v(" "),e("p",[s._v("æ­¤å¤–ï¼Œä½ è¿˜éœ€è¦å®‰è£…"),e("a",{attrs:{href:"https://commondatastorage.googleapis.com/chrome-infra-docs/flat/depot_tools/docs/html/depot_tools_tutorial.html#_setting_up",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("depot_tools")]),e("OutboundLink")],1),s._v("ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºè·å–Chromiumï¼ŒåŠå…¶ç›¸å…³ä¾èµ–å·¥å…·ã€‚")]),s._v(" "),e("p",[s._v("å¦å¤–ï¼Œå¦‚æœä½¿ç”¨Windowsç³»ç»Ÿ, ä½ éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡"),e("code",[s._v("DEPOT_TOOLS_WIN_TOOLCHAIN=0")]),s._v("ã€‚ ä¾æ¬¡æ‰“å¼€ "),e("code",[s._v("Control Panel")]),s._v(" â†’ "),e("code",[s._v("System and Security")]),s._v(" â†’ "),e("code",[s._v("System")]),s._v(" â†’ "),e("code",[s._v("Advanced system settings")]),s._v(" ï¼Œç„¶åæ·»åŠ ç³»ç»Ÿå˜é‡ "),e("code",[s._v("DEPOT_TOOLS_WIN_TOOLCHAIN")]),s._v(" ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ä¸º "),e("code",[s._v("0")]),s._v(".  è¿™å°†ä¿ƒä½¿"),e("code",[s._v("depot_tools")]),s._v(" ä½¿ç”¨æœ¬åœ°å·²å®‰è£…çš„Visual Studio(é»˜è®¤çŠ¶æ€ä¸‹ï¼Œ"),e("code",[s._v("depot_tools")]),s._v("å°†ä¼šä¸‹è½½ä¸€ä¸ªåªæœ‰è°·æ­Œå†…éƒ¨å‘˜å·¥æœ‰æƒé™ä½¿ç”¨çš„å†…éƒ¨ç‰ˆæœ¬)ã€‚")]),s._v(" "),e("h3",{attrs:{id:"è®¾ç½®-git-ç¼“å­˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®-git-ç¼“å­˜"}},[s._v("#")]),s._v(" è®¾ç½® git ç¼“å­˜")]),s._v(" "),e("p",[s._v("å¦‚æœæ‚¨æƒ³ checkout å¤šä»½ Electron æºç  (ä¾‹å¦‚å¤šä¸ªå¹¶è¡Œç›®å½• checkout åˆ°ä¸åŒçš„åˆ†æ”¯)ï¼Œ æ¨èä½¿ç”¨ git ç¼“å­˜æ¥åŠ é€Ÿåç»­å¯¹ "),e("code",[s._v("gclient")]),s._v("çš„è°ƒç”¨ã€‚ ä¸ºæ­¤ï¼Œè®¾ç½® "),e("code",[s._v("GIT_CACHE_PATH")]),s._v(" ç¯å¢ƒå˜é‡ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GIT_CACHE_PATH")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),s._v("}")]),s._v('/.git_cache"')]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${GIT_CACHE_PATH}")]),s._v('"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿™å°†ä½¿ç”¨å¤§çº¦16G")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"è·å–ä»£ç "}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è·å–ä»£ç "}},[s._v("#")]),s._v(" è·å–ä»£ç ")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" electron "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" electron\n$ gclient config --name "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/electron"')]),s._v(" --unmanaged https://github.com/electron/electron\n$ gclient "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" --with_branch_heads --with_tags\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿™å°†éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œå–æ¯å’–å•¡ä¼‘æ¯ä¸€ä¸‹ã€‚")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("blockquote",[e("p",[s._v("é™¤äº†ä½¿ç”¨ "),e("code",[s._v("https://github.com/electron/electron")]),s._v("ï¼Œ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ è‡ªå·±çš„ fork  (å½¢å¦‚ "),e("code",[s._v("https://github.com/<username>/electron")]),s._v(")ã€‚")])]),s._v(" "),e("h3",{attrs:{id:"æ‹‰-æ¨çš„æ³¨æ„äº‹é¡¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ‹‰-æ¨çš„æ³¨æ„äº‹é¡¹"}},[s._v("#")]),s._v(" æ‹‰/æ¨çš„æ³¨æ„äº‹é¡¹")]),s._v(" "),e("p",[s._v("å¦‚æœæ‚¨å°†æ¥æ‰“ç®—ä» "),e("code",[s._v("electron")]),s._v(" å®˜æ–¹åœ°å€è¿›è¡Œ "),e("code",[s._v("git pull")]),s._v(" æˆ– "),e("code",[s._v("git push")]),s._v("ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦æ›´æ–°ç›¸åº”æ–‡ä»¶å¤¹çš„æº URLã€‚")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" src/electron\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote remove origin\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin https://github.com/electron/electron\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout main\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --set-upstream-to"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("origin/main\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("ğŸ“ "),e("code",[s._v("gclient")]),s._v(" ä¼šæ£€æŸ¥ "),e("code",[s._v("src/electron")]),s._v(" ç›®å½•ä¸‹çš„ "),e("code",[s._v("DEPS")]),s._v(" æ–‡ä»¶ï¼Œä»ä¸­è·å–ä¾èµ–ä¿¡æ¯ (å°±åƒ Chromium æˆ– Node.js é‚£æ ·)ã€‚ è¿è¡Œ "),e("code",[s._v("gclient sync -f")]),s._v(" ç¡®ä¿æ‰€æœ‰ç”¨æ¥æ„å»º Electron çš„ä¾èµ–éƒ½ç¬¦åˆè¯¥æ–‡ä»¶çš„æè¿°ã€‚")]),s._v(" "),e("p",[s._v("å› æ­¤ï¼Œä¸ºäº†æ‹‰å–ï¼Œæ‚¨å°†è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" src/electron\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n$ gclient "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" -f\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"æ„å»º"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»º"}},[s._v("#")]),s._v(" æ„å»º")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" src\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CHROMIUM_BUILDTOOLS_PATH")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("/buildtools\n$ gn gen out/Testing --args"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"import('),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("//electron/build/args/testing.gn"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(") "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GN_EXTRA_ARGS")]),s._v('"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("è‹¥åœ¨ Windows ä¸Š (æ²¡æœ‰å¯é€‰å‚æ•°)ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" src\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CHROMIUM_BUILDTOOLS_PATH")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("%cd%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("buildtools\n$ gn out/testing --args"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v('"import'),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('"//electron/build/args/testing.gn'),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('"'),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("è¿™å°†åœ¨"),e("code",[s._v("src/")]),s._v("ä¸‹çš„"),e("code",[s._v("out/Testing")]),s._v("å†…ç”Ÿæˆä¸€ä¸ªæœ‰æµ‹è¯•ç”Ÿæˆé…ç½®çš„æ–‡ä»¶å¤¹ æ‚¨å¯ä»¥ç”¨å¦ä¸€ä¸ªåç§° æ›¿æ¢ "),e("code",[s._v("Testing")]),s._v(" ï¼Œä½†å®ƒåº”è¯¥æ˜¯ "),e("code",[s._v("out")]),s._v(" çš„å­ç›®å½•ã€‚ Also you shouldn't have to run "),e("code",[s._v("gn gen")]),s._v(" againâ€”if you want to change the build arguments, you can run "),e("code",[s._v("gn args out/Testing")]),s._v(" to bring up an editor.")]),s._v(" "),e("p",[s._v("è¦æŸ¥çœ‹å¯ç”¨çš„æ„å»ºé…ç½®é€‰é¡¹çš„åˆ—è¡¨ï¼Œè¿è¡Œ "),e("code",[s._v("gn args out/Testing--list")]),s._v("ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("ç”¨äºç”Ÿæˆæµ‹è¯•Electronçš„æ„å»ºé…ç½®ï¼š")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ gn gen out/Testing --args"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"import('),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("//electron/build/args/testing.gn"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(") "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GN_EXTRA_ARGS")]),s._v('"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v('For generating Release (aka "non-component" or "static") build config of Electron:')])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ gn gen out/Release --args"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"import('),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("//electron/build/args/release.gn"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(") "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GN_EXTRA_ARGS")]),s._v('"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("To build, run "),e("code",[s._v("ninja")]),s._v(" with the "),e("code",[s._v("electron")]),s._v(" target:")]),s._v(" Nota Bene: This will also take a while and probably heat up your lap.")]),s._v(" "),e("p",[s._v("æµ‹è¯•é…ç½®ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ ninja -C out/Testing electron\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("å‘å¸ƒé…ç½®ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ ninja -C out/Release electron\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("This will build all of what was previously 'libchromiumcontent' (i.e. the "),e("code",[s._v("content/")]),s._v(" directory of "),e("code",[s._v("chromium")]),s._v(" and its dependencies, incl. WebKit and V8), so it will take a while.")]),s._v(" "),e("p",[s._v("æ„å»ºéœ€è¦åœ¨"),e("code",[s._v("./out/Testing")]),s._v("æ–‡ä»¶ä¸‹æ‰§è¡Œï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ ./out/Testing/Electron.app/Contents/MacOS/Electron\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or, on Windows")]),s._v("\n$ ./out/Testing/electron.exe\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or, on Linux")]),s._v("\n$ ./out/Testing/electron\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"æ‰“åŒ…"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ‰“åŒ…"}},[s._v("#")]),s._v(" æ‰“åŒ…")]),s._v(" "),e("p",[s._v("On linux, first strip the debugging and symbol information:")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("electron/script/strip-binaries.py -d out/Release\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("To package the electron build as a distributable zip file:")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("ninja -C out/Release electron:electron_dist_zip\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"äº¤å‰ç¼–è¯‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#äº¤å‰ç¼–è¯‘"}},[s._v("#")]),s._v(" äº¤å‰ç¼–è¯‘")]),s._v(" "),e("p",[s._v("To compile for a platform that isn't the same as the one you're building on, set the "),e("code",[s._v("target_cpu")]),s._v(" and "),e("code",[s._v("target_os")]),s._v(" GN arguments. For example, to compile an x86 target from an x64 host, specify "),e("code",[s._v('target_cpu = "x86"')]),s._v(" in "),e("code",[s._v("gn args")]),s._v(".")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ gn gen out/Testing-x86 --args"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'... target_cpu = \"x86\"'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Not all combinations of source and target CPU/OS are supported by Chromium.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Host")]),s._v(" "),e("th",[s._v("ç›®æ ‡")]),s._v(" "),e("th",[s._v("çŠ¶æ€")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("Windows x64")]),s._v(" "),e("td",[s._v("Windows arm64")]),s._v(" "),e("td",[s._v("å®éªŒæ€§åŠŸèƒ½")])]),s._v(" "),e("tr",[e("td",[s._v("Windows x64")]),s._v(" "),e("td",[s._v("Windows x86")]),s._v(" "),e("td",[s._v("Automatically tested")])]),s._v(" "),e("tr",[e("td",[s._v("Linux x64")]),s._v(" "),e("td",[s._v("Linux x86")]),s._v(" "),e("td",[s._v("Automatically tested")])])])]),s._v(" "),e("p",[s._v("If you test other combinations and find them to work, please update this document ğŸ˜ƒ")]),s._v(" "),e("p",[s._v("æœ‰å…³ "),e("a",{attrs:{href:"https://gn.googlesource.com/gn/+/master/docs/reference.md#built_in-predefined-variables-target_os_the-desired-operating-system-for-the-build-possible-values",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("target_os")]),e("OutboundLink")],1),s._v(" å’Œ "),e("a",{attrs:{href:"https://gn.googlesource.com/gn/+/master/docs/reference.md#built_in-predefined-variables-target_cpu_the-desired-cpu-architecture-for-the-build-possible-values",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("target_cpu")]),e("OutboundLink")],1),s._v(" çš„æœ‰æ•ˆå€¼ï¼Œè¯·æŸ¥çœ‹å‚è€ƒ GNã€‚")]),s._v(" "),e("h4",{attrs:{id:"windows-on-arm-experimental"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows-on-arm-experimental"}},[s._v("#")]),s._v(" Windows on Arm (experimental)")]),s._v(" "),e("p",[s._v("To cross-compile for Windows on Arm, "),e("a",{attrs:{href:"https://chromium.googlesource.com/chromium/src/+/refs/heads/master/docs/windows_build_instructions.md#Visual-Studio",target:"_blank",rel:"noopener noreferrer"}},[s._v("follow Chromium's guide"),e("OutboundLink")],1),s._v(" to get the necessary dependencies, SDK and libraries, then build with "),e("code",[s._v("ELECTRON_BUILDING_WOA=1")]),s._v(" in your environment before running "),e("code",[s._v("gclient sync")]),s._v(".")]),s._v(" "),e("div",{staticClass:"language-bat line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("set ELECTRON_BUILDING_WOA=1\ngclient sync -f --with_branch_heads --with_tags\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("Or (if using PowerShell):")]),s._v(" "),e("div",{staticClass:"language-powershell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(":ELECTRON_BUILDING_WOA=1\ngclient sync "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("with_branch_heads "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("with_tags\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("Next, run "),e("code",[s._v("gn gen")]),s._v(" as above with "),e("code",[s._v('target_cpu="arm64"')]),s._v(".")]),s._v(" "),e("h2",{attrs:{id:"æµ‹è¯•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•"}},[s._v("#")]),s._v(" æµ‹è¯•")]),s._v(" "),e("p",[s._v("To run the tests, you'll first need to build the test modules against the same version of Node.js that was built as part of the build process. To generate build headers for the modules to compile against, run the following under "),e("code",[s._v("src/")]),s._v(" directory.")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ ninja -C out/Testing third_party/electron_node:headers\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("You can now "),e("RouterLink",{attrs:{to:"/ã€ŠElectronä¸­æ–‡æ–‡æ¡£ã€‹/development/testing.html#unit-tests"}},[s._v("run the tests")]),s._v(".")],1),s._v(" "),e("p",[s._v("å¯ä»¥é€šè¿‡å¢åŠ å…¶å®ƒæ ‡è®°æ¥è°ƒè¯•ç¨‹åºï¼Œä¾‹å¦‚ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -- "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --enable-logging -g "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BrowserWindow module'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"åœ¨å¤šä¸ªè®¡ç®—æœºä¹‹é—´å…±äº«-git-ç¼“å­˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨å¤šä¸ªè®¡ç®—æœºä¹‹é—´å…±äº«-git-ç¼“å­˜"}},[s._v("#")]),s._v(" åœ¨å¤šä¸ªè®¡ç®—æœºä¹‹é—´å…±äº« git ç¼“å­˜")]),s._v(" "),e("p",[s._v("å¯ä»¥å°†gclient git ç¼“å­˜ä¸å…¶ä»–æœºå™¨å…±äº«ï¼Œå¯¼å‡ºä¸º SMB åœ¨linuxä¸Šå…±äº«ã€‚ ä½†æ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹æˆ–æœºå™¨å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚ The locks created by git-cache script will try to prevent this, but it may not work perfectly in a network.")]),s._v(" "),e("p",[s._v("On Windows, SMBv2 has a directory cache that will cause problems with the git cache script, so it is necessary to disable it by setting the registry key")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("HKEY_LOCAL_MACHINE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("System"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("CurrentControlSet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Services"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Lanmanworkstation"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Parameters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DirectoryCacheLifetime\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("to 0. æ›´å¤šä¿¡æ¯ï¼šhttps://stackoverflow.com/a/9935126")]),s._v(" "),e("p",[s._v("This can be set quickly in powershell (ran as administrator):")]),s._v(" "),e("div",{staticClass:"language-powershell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("New-ItemProperty")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Path "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HKLM:\\System\\CurrentControlSet\\Services\\Lanmanworkstation\\Parameters"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Name DirectoryCacheLifetime "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Value 0 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("PropertyType DWORD "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Force\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"æ•…éšœæ’æŸ¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•…éšœæ’æŸ¥"}},[s._v("#")]),s._v(" æ•…éšœæ’æŸ¥")]),s._v(" "),e("h3",{attrs:{id:"gclient-sync-complains-about-rebase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gclient-sync-complains-about-rebase"}},[s._v("#")]),s._v(" gclient sync complains about rebase")]),s._v(" "),e("p",[s._v("If "),e("code",[s._v("gclient sync")]),s._v(" is interrupted the git tree may be left in a bad state, leading to a cryptic message when running "),e("code",[s._v("gclient sync")]),s._v(" in the future:")]),s._v(" "),e("div",{staticClass:"language-plaintext line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-plaintext"}},[e("code",[s._v("2> Conflict while rebasing this branch.\n2> Fix the conflict and run gclient again.\n2> See man git-rebase for details.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("If there are no git conflicts or rebases in "),e("code",[s._v("src/electron")]),s._v(", you may need to abort a "),e("code",[s._v("git am")]),s._v(" in "),e("code",[s._v("src")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" am --abort\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" electron\n$ gclient "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" -f\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"i-m-being-asked-for-a-username-password-for-chromium-internal-googlesource-com"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-m-being-asked-for-a-username-password-for-chromium-internal-googlesource-com"}},[s._v("#")]),s._v(" I'm being asked for a username/password for chromium-internal.googlesource.com")]),s._v(" "),e("p",[s._v("If you see a prompt for "),e("code",[s._v("Username for 'https://chrome-internal.googlesource.com':")]),s._v(" when running "),e("code",[s._v("gclient sync")]),s._v(" on Windows, it's probably because the "),e("code",[s._v("DEPOT_TOOLS_WIN_TOOLCHAIN")]),s._v(" environment variable is not set to 0. Open "),e("code",[s._v("Control Panel")]),s._v(" â†’ "),e("code",[s._v("System and Security")]),s._v(" â†’ "),e("code",[s._v("System")]),s._v(" â†’ "),e("code",[s._v("Advanced system settings")]),s._v(" and add a system variable "),e("code",[s._v("DEPOT_TOOLS_WIN_TOOLCHAIN")]),s._v(" with value "),e("code",[s._v("0")]),s._v(".  è¿™å°†ä¿ƒä½¿"),e("code",[s._v("depot_tools")]),s._v(" ä½¿ç”¨æœ¬åœ°å·²å®‰è£…çš„Visual Studio(é»˜è®¤çŠ¶æ€ä¸‹ï¼Œ"),e("code",[s._v("depot_tools")]),s._v("å°†ä¼šä¸‹è½½ä¸€ä¸ªåªæœ‰è°·æ­Œå†…éƒ¨å‘˜å·¥æœ‰æƒé™ä½¿ç”¨çš„å†…éƒ¨ç‰ˆæœ¬)ã€‚")])])}),[],!1,null,null,null);t.default=n.exports}}]);