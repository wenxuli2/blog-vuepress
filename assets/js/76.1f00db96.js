(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{552:function(e,t,s){"use strict";s.r(t);var a=s(20),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[e._v("#")]),e._v(" 环境变量")]),e._v(" "),s("blockquote",[s("p",[e._v("在不更改代码的情况下控制应用程序配置和行为。")])]),e._v(" "),s("p",[e._v("Electron的某些行为受环境变量的控制, 因为它们比命令行标志和应用程序的代码更早初始化。")]),e._v(" "),s("p",[e._v("POSIX shell示例:")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ELECTRON_ENABLE_LOGGING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\n$ electron\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("Windows 控制台示例:")]),e._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[e._v("> "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("set")]),e._v(" ELECTRON_ENABLE_LOGGING=true\n> electron\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("h2",{attrs:{id:"生产环境相关变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生产环境相关变量"}},[e._v("#")]),e._v(" 生产环境相关变量")]),e._v(" "),s("p",[e._v("以下环境变量主要用于在打包后的Electron应用运行时使用。")]),e._v(" "),s("h3",{attrs:{id:"node-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-options"}},[e._v("#")]),e._v(" "),s("code",[e._v("NODE_OPTIONS")])]),e._v(" "),s("p",[e._v("Electron 包括对 Node 的 "),s("a",{attrs:{href:"https://nodejs.org/api/cli.html#cli_node_options_options",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("NODE_OPTIONS")]),s("OutboundLink")],1),e._v(" 的子集的支持。 除与 Chromium 使用 BoringSSL 相抵触的情况外，大多数都得到了支持。")]),e._v(" "),s("p",[e._v("示例：")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NODE_OPTIONS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"--no-warnings --max-old-space-size=2048"')]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("不支持的选项是：")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("--use-bundled-ca\n--force-fips\n--enable-fips\n--openssl-config\n--use-openssl-ca\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[s("code",[e._v("NODE_OPTIONS")]),e._v(" 在打包应用程序中明确禁止使用，以下情况除外:")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("--max-http-header-size\n--http-parser\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("h3",{attrs:{id:"google-api-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#google-api-key"}},[e._v("#")]),e._v(" "),s("code",[e._v("GOOGLE_API_KEY")])]),e._v(" "),s("p",[e._v("Electron中的地理定位支持需要使用Google云平台的地理定位网络服务。 为了启用此功能，需获取一个 "),s("a",{attrs:{href:"https://developers.google.com/maps/documentation/geolocation/get-api-key",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google API 密钥"),s("OutboundLink")],1),e._v(" 并将以下代码放入你的主进程文件， 在打开任何 浏览器窗口之前将生成地理位置请求：")]),e._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[e._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[e._v("GOOGLE_API_KEY")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'YOUR_KEY_HERE'")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("默认情况下, 可能不允许新生成的 Google API key进行地理编码请求。 要为你的项目启用地理定位网络服务，请通过 "),s("a",{attrs:{href:"https://console.cloud.google.com/apis/library",target:"_blank",rel:"noopener noreferrer"}},[e._v("API 库"),s("OutboundLink")],1),e._v(" 启用它。")]),e._v(" "),s("p",[e._v("注： 你需要在与 API 密钥相关的项目中添加一个"),s("a",{attrs:{href:"https://cloud.google.com/billing/docs/how-to/payment-methods#add_a_payment_method",target:"_blank",rel:"noopener noreferrer"}},[e._v("计费帐户"),s("OutboundLink")],1),e._v("，以便地理定位网络服务工作。")]),e._v(" "),s("h3",{attrs:{id:"electron-no-asar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-no-asar"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_NO_ASAR")])]),e._v(" "),s("p",[e._v("禁用 ASAR 支持。 该变量只在设置 "),s("code",[e._v("ELECTRON_RUN_AS_NODE")]),e._v(" 的派生子进程和衍生子进程中受支持。")]),e._v(" "),s("h3",{attrs:{id:"electron-run-as-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-run-as-node"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_RUN_AS_NODE")])]),e._v(" "),s("p",[e._v("当做普通Node.js进程启动。")]),e._v(" "),s("p",[e._v("在当前模式下，当运行普通可执行Node.js文件时，你可以将 "),s("a",{attrs:{href:"https://nodejs.org/api/cli.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("cli 选项"),s("OutboundLink")],1),e._v(" 传递给Node.js，但下列标志除外：")]),e._v(" "),s("ul",[s("li",[e._v('"--openssl-config"')]),e._v(" "),s("li",[e._v('"--use-bundled-ca"')]),e._v(" "),s("li",[e._v('"--use-openssl-ca",')]),e._v(" "),s("li",[e._v('"--force-fips"')]),e._v(" "),s("li",[e._v('"--enable-fips"')])]),e._v(" "),s("p",[e._v("由于Electron 在构建 Node.js 的 "),s("code",[e._v("crypto")]),e._v(" 模块时使用 BoringSSL 而不是 OpenSSL，因此这些标志被禁用。所以不会像设计的那样工作。")]),e._v(" "),s("h3",{attrs:{id:"electron-no-attach-console-windows"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-no-attach-console-windows"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_NO_ATTACH_CONSOLE")]),e._v(" "),s("em",[e._v("Windows")])]),e._v(" "),s("p",[e._v("不附加到当前控制台会话。")]),e._v(" "),s("h3",{attrs:{id:"electron-force-window-menu-bar-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-force-window-menu-bar-linux"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_FORCE_WINDOW_MENU_BAR")]),e._v("_ Linux _")]),e._v(" "),s("p",[e._v("不使用 Linux 的全局菜单栏。")]),e._v(" "),s("h3",{attrs:{id:"electron-trash-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-trash-linux"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_TRASH")]),e._v(" "),s("em",[e._v("Linux")])]),e._v(" "),s("p",[e._v("在 Linux 上设置垃圾回收实现。 默认值为 "),s("code",[e._v("gio")]),e._v(".")]),e._v(" "),s("p",[e._v("选项:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("gvfs-trash")])]),e._v(" "),s("li",[s("code",[e._v("trash-cli")])]),e._v(" "),s("li",[s("code",[e._v("kioclient5")])]),e._v(" "),s("li",[s("code",[e._v("kioclient")])])]),e._v(" "),s("h2",{attrs:{id:"开发环境相关变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发环境相关变量"}},[e._v("#")]),e._v(" 开发环境相关变量")]),e._v(" "),s("p",[e._v("以下环境变量主要用于开发和调试目的。")]),e._v(" "),s("h3",{attrs:{id:"electron-enable-logging"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-enable-logging"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_ENABLE_LOGGING")])]),e._v(" "),s("p",[e._v("Prints Chromium's internal logging to the console.")]),e._v(" "),s("p",[e._v("Setting this variable is the same as passing "),s("code",[e._v("--enable-logging")]),e._v(" on the command line. For more info, see "),s("code",[e._v("--enable-logging")]),e._v(" in "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/command-line-switches.html#enable-loggingfile"}},[e._v("command-line switches")]),e._v(".")],1),e._v(" "),s("h3",{attrs:{id:"electron-log-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-log-file"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_LOG_FILE")])]),e._v(" "),s("p",[e._v("Sets the file destination for Chromium's internal logging.")]),e._v(" "),s("p",[e._v("Setting this variable is the same as passing "),s("code",[e._v("--log-file")]),e._v(" on the command line. For more info, see "),s("code",[e._v("--log-file")]),e._v(" in "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/command-line-switches.html#log-filepath"}},[e._v("command-line switches")]),e._v(".")],1),e._v(" "),s("h3",{attrs:{id:"electron-debug-drag-regions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-debug-drag-regions"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_DEBUG_DRAG_REGIONS")])]),e._v(" "),s("p",[e._v("在 macOS 的 "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/browser-view.html"}},[s("code",[e._v("BrowserView")])]),e._v("上添加可拖动区域的颜色 - 可拖动区域将着绿色， 不可拖动区域将着红色以帮助调试。")],1),e._v(" "),s("h3",{attrs:{id:"electron-debug-notifications"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-debug-notifications"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_DEBUG_NOTIFICATIONS")])]),e._v(" "),s("p",[e._v("在 macOS 上添加额外日志到 "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/notification.html"}},[s("code",[e._v("通知")])]),e._v(" 生命周期以帮助调试。 当创建或激活新通知时，将显示额外日志。 They will also be displayed when common a tions are taken: a notification is shown, dismissed, its button is clicked, or it is replied to.")],1),e._v(" "),s("p",[e._v("示例输出：")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("Notification created "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("com.github.Electron:notification:EAF7B87C-A113-43D7-8E76-F88EC9D73D44"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nNotification displayed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("com.github.Electron:notification:EAF7B87C-A113-43D7-8E76-F88EC9D73D44"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nNotification activated "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("com.github.Electron:notification:EAF7B87C-A113-43D7-8E76-F88EC9D73D44"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nNotification replied to "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("com.github.Electron:notification:EAF7B87C-A113-43D7-8E76-F88EC9D73D44"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("h3",{attrs:{id:"electron-log-asar-reads"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-log-asar-reads"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_LOG_ASAR_READS")])]),e._v(" "),s("p",[e._v("当 Electron 从 ASAR 文件读取时，记录读取 offset 偏移和文件路径到系统 "),s("code",[e._v("tmpdir")]),e._v(" 临时目录。 生成的文件可以提供给ASAR 模块以优化文件排序。")]),e._v(" "),s("h3",{attrs:{id:"electron-enable-stack-dumping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-enable-stack-dumping"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_ENABLE_STACK_DUMPING")])]),e._v(" "),s("p",[e._v("当Electron崩溃时, 将跟踪堆栈输出到控制台。")]),e._v(" "),s("p",[e._v("如果 "),s("code",[e._v("crashReporter")]),e._v("已经启动了, 则此环境变量将不起作用。")]),e._v(" "),s("h3",{attrs:{id:"electron-default-error-mode-windows"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-default-error-mode-windows"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_DEFAULT_ERROR_MODE")]),e._v("_ Windows _")]),e._v(" "),s("p",[e._v("当Electron崩溃时显示 Windows 的崩溃对话框。")]),e._v(" "),s("p",[e._v("如果 "),s("code",[e._v("crashReporter")]),e._v("已经启动了, 则此环境变量将不起作用。")]),e._v(" "),s("h3",{attrs:{id:"electron-override-dist-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#electron-override-dist-path"}},[e._v("#")]),e._v(" "),s("code",[e._v("ELECTRON_OVERRIDE_DIST_PATH")])]),e._v(" "),s("p",[e._v("当 "),s("code",[e._v("electron")]),e._v(" 包运行时，该变量告知 "),s("code",[e._v("electron")]),e._v(" 命令使用指定Electron的构建代替由 "),s("code",[e._v("npm install")]),e._v(" 下载的构建。 用法：")]),e._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ELECTRON_OVERRIDE_DIST_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/Users/username/projects/electron/out/Testing\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h2",{attrs:{id:"通过-electron-设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-electron-设置"}},[e._v("#")]),e._v(" 通过 Electron 设置")]),e._v(" "),s("p",[e._v("在Electron运行时设置一些环境变量")]),e._v(" "),s("h3",{attrs:{id:"original-xdg-current-desktop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#original-xdg-current-desktop"}},[e._v("#")]),e._v(" "),s("code",[e._v("ORIGINAL_XDG_CURRENT_DESKTOP")])]),e._v(" "),s("p",[e._v("此变量设置为你的应用程序最初启动的 "),s("code",[e._v("XDG_CURRENT_DESKTOP")]),e._v(" 值。  Electron 有时修改 "),s("code",[e._v("XDG_CURRENT_DESKTOP")]),e._v(" 的值以影响Chromium 中的其他逻辑，所以如果您想访问 "),s("em",[e._v("原始的")]),e._v(" 值 您应该重新查看此环境变量。")])])}),[],!1,null,null,null);t.default=n.exports}}]);