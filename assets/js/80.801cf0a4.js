(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{557:function(t,a,s){"use strict";s.r(a);var n=s(20),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"globalshortcut"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globalshortcut"}},[t._v("#")]),t._v(" globalShortcut")]),t._v(" "),s("blockquote",[s("p",[t._v("在应用程序没有键盘焦点时，监听键盘事件。")])]),t._v(" "),s("p",[t._v("进程："),s("RouterLink",{attrs:{to:"/《Electron中文文档》/glossary.html#main-process"}},[t._v("主进程")])],1),t._v(" "),s("p",[s("code",[t._v("globalShortcut")]),t._v(" 模块可以在操作系统中注册/注销全局快捷键, 以便可以为操作定制各种快捷键。")]),t._v(" "),s("p",[t._v("** 注意: **快捷方式是全局的; 即使应用程序没有键盘焦点, 它也仍然在持续监听键盘事件。 在 app 模块的 "),s("code",[t._v("ready")]),t._v(" 事件就绪之前，这个模块不能使用。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" globalShortcut "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'electron'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("whenReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Register a 'CommandOrControl+X' shortcut listener.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" globalShortcut"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+X'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+X is pressed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'registration failed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查快捷键是否注册成功")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalShortcut"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRegistered")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+X'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'will-quit'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注销快捷键")]),t._v("\n  globalShortcut"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unregister")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+X'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注销所有快捷键")]),t._v("\n  globalShortcut"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unregisterAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h2",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("p",[s("code",[t._v("globalShortcut")]),t._v(" 模块具有以下方法:")]),t._v(" "),s("h3",{attrs:{id:"globalshortcut-register-accelerator-callback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globalshortcut-register-accelerator-callback"}},[t._v("#")]),t._v(" "),s("code",[t._v("globalShortcut.register(accelerator, callback)")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("accelerator")]),t._v(" "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/accelerator.html"}},[t._v("Accelerator")])],1),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" Function")])]),t._v(" "),s("p",[t._v("返回"),s("code",[t._v("Boolean")]),t._v(" - 快捷键注册是否成功")]),t._v(" "),s("p",[t._v("注册 "),s("code",[t._v("accelerator")]),t._v(" 的全局快捷键。 当用户按下注册快捷键时， "),s("code",[t._v("callback")]),t._v(" 会被调用。")]),t._v(" "),s("p",[t._v("如果指定的快捷键已经被其他应用程序注册掉, 调用会默默失败。 该特性由操作系统定义，因为操作系统不希望多个程序的全局快捷键互相冲突。")]),t._v(" "),s("p",[t._v("在 macOS 10.14 Mojave 下面，如果 app 没有被授权为"),s("a",{attrs:{href:"https://developer.apple.com/library/archive/documentation/Accessibility/Conceptual/AccessibilityMacOSX/OSXAXTestingApps.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("可信任使用的客户端"),s("OutboundLink")],1),t._v("，那么下列快捷键会注册失败：")]),t._v(" "),s("ul",[s("li",[t._v('"Media Play/Pause"')]),t._v(" "),s("li",[t._v('"Media Next Track"')]),t._v(" "),s("li",[t._v('"Media Previous Track"')]),t._v(" "),s("li",[t._v('"Media Stop"')])]),t._v(" "),s("h3",{attrs:{id:"globalshortcut-registerall-accelerators-callback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globalshortcut-registerall-accelerators-callback"}},[t._v("#")]),t._v(" "),s("code",[t._v("globalShortcut.registerAll(accelerators, callback)")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("accelerators")]),t._v(" String[] - an array of "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/accelerator.html"}},[t._v("Accelerator")]),t._v("s.")],1),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" Function")])]),t._v(" "),s("p",[t._v("Registers a global shortcut of all "),s("code",[t._v("accelerator")]),t._v(" items in "),s("code",[t._v("accelerators")]),t._v(". 当用户按下注册快捷键时， "),s("code",[t._v("callback")]),t._v(" 会被调用。")]),t._v(" "),s("p",[t._v("如果定义的快捷键已经被其他应用占用，这个调用会失效。 该特性由操作系统定义，因为操作系统不希望多个程序的全局快捷键互相冲突。")]),t._v(" "),s("p",[t._v("在 macOS 10.14 Mojave 下面，如果 app 没有被授权为"),s("a",{attrs:{href:"https://developer.apple.com/library/archive/documentation/Accessibility/Conceptual/AccessibilityMacOSX/OSXAXTestingApps.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("可信任使用的客户端"),s("OutboundLink")],1),t._v("，那么下列快捷键会注册失败：")]),t._v(" "),s("ul",[s("li",[t._v('"Media Play/Pause"')]),t._v(" "),s("li",[t._v('"Media Next Track"')]),t._v(" "),s("li",[t._v('"Media Previous Track"')]),t._v(" "),s("li",[t._v('"Media Stop"')])]),t._v(" "),s("h3",{attrs:{id:"globalshortcut-isregistered-accelerator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globalshortcut-isregistered-accelerator"}},[t._v("#")]),t._v(" "),s("code",[t._v("globalShortcut.isRegistered(accelerator)")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("accelerator")]),t._v(" "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/accelerator.html"}},[t._v("Accelerator")])],1)]),t._v(" "),s("p",[t._v("返回 "),s("code",[t._v("Boolean")]),t._v(" - 表示 "),s("code",[t._v("accelerator")]),t._v(" 全局快捷键是否注册成功")]),t._v(" "),s("p",[t._v("当快捷键已经被其他应用程序注册时, 此调用依然将返回 "),s("code",[t._v("false")]),t._v("。 该特性由操作系统定义，因为操作系统不希望多个程序的全局快捷键互相冲突。")]),t._v(" "),s("h3",{attrs:{id:"globalshortcut-unregister-accelerator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globalshortcut-unregister-accelerator"}},[t._v("#")]),t._v(" "),s("code",[t._v("globalShortcut.unregister(accelerator)")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("accelerator")]),t._v(" "),s("RouterLink",{attrs:{to:"/《Electron中文文档》/api/accelerator.html"}},[t._v("Accelerator")])],1)]),t._v(" "),s("p",[t._v("注销 "),s("code",[t._v("accelerator")]),t._v(" 的全局快捷键。")]),t._v(" "),s("h3",{attrs:{id:"globalshortcut-unregisterall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globalshortcut-unregisterall"}},[t._v("#")]),t._v(" "),s("code",[t._v("globalShortcut.unregisterAll()")])]),t._v(" "),s("p",[t._v("注销所有的全局快捷键（清空该应用程序的所有全局快捷键）。")])])}),[],!1,null,null,null);a.default=e.exports}}]);