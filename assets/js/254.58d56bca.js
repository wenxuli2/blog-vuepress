(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{732:function(s,a,t){"use strict";t.r(a);var n=t(20),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"snapcraft-guide-linux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#snapcraft-guide-linux"}},[s._v("#")]),s._v(" Snapcraft Guide (Linux)")]),s._v(" "),t("p",[s._v("本指南提供了有关如何包装你的 Electron 应用程序的任何 Snapcraft 环境, 包括 Ubuntu 软件中心的信息。")]),s._v(" "),t("h2",{attrs:{id:"背景和要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景和要求"}},[s._v("#")]),s._v(" 背景和要求")]),s._v(" "),t("p",[s._v("与更广泛的 Linux 社区一起, 规范旨在解决 "),t("a",{attrs:{href:"https://snapcraft.io/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("snapcraft")]),t("OutboundLink")],1),s._v(" 项目中的许多常见的软件安装问题。 Snaps 是容器化的软件包, 包括所需的依赖项、自动更新和对所有主要 Linux 发行版的工作, 而无需进行系统修改。")]),s._v(" "),t("p",[s._v("创建 "),t("code",[s._v(".snap")]),s._v(" 文件有三种方法:")]),s._v(" "),t("ol",[t("li",[s._v("使用 "),t("a",{attrs:{href:"https://github.com/electron-userland/electron-forge",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("electron-forge")]),t("OutboundLink")],1),s._v(" 或 "),t("a",{attrs:{href:"https://github.com/electron-userland/electron-builder",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("electron-builder")]),t("OutboundLink")],1),s._v(", 与 "),t("code",[s._v("snap")]),s._v(" 支持的两个工具都不在该框中。 这是最简单的选择。 2) 使用 "),t("code",[s._v("electron-installer-snap")]),s._v(", 它采用 "),t("code",[s._v("electron-packager")]),s._v(" 的输出。 3) 使用已经创建的 "),t("code",[s._v(".deb")]),s._v(" 包。")])]),s._v(" "),t("p",[s._v("在某些情况下，您需要安装 "),t("code",[s._v("snapcraft")]),s._v(" 工具。 安装特定发行版的 "),t("code",[s._v("snapcraft")]),s._v(" 的指南"),t("a",{attrs:{href:"https://snapcraft.io/docs/installing-snapcraft",target:"_blank",rel:"noopener noreferrer"}},[s._v("在这里"),t("OutboundLink")],1),s._v("能看到。")]),s._v(" "),t("h2",{attrs:{id:"使用-electron-installer-snap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-electron-installer-snap"}},[s._v("#")]),s._v(" 使用 "),t("code",[s._v("electron-installer-snap")])]),s._v(" "),t("p",[s._v("该模块的工作原理与"),t("a",{attrs:{href:"https://github.com/electron/windows-installer",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("electron-winstaller")]),t("OutboundLink")],1),s._v("类似 因为它的范围仅限于构建捕捉包。 你可以这样安装:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev electron-installer-snap\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"步骤-1-打包你的-electron-应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-1-打包你的-electron-应用程序"}},[s._v("#")]),s._v(" 步骤 1: 打包你的 Electron 应用程序")]),s._v(" "),t("p",[s._v("打包应用程序使用 "),t("a",{attrs:{href:"https://github.com/electron/electron-packager",target:"_blank",rel:"noopener noreferrer"}},[s._v("electron-packager"),t("OutboundLink")],1),s._v(" (或类似工具)。 Make sure to remove "),t("code",[s._v("node_modules")]),s._v(" that you don't need in your final application, since any module you don't actually need will increase your application's size.")]),s._v(" "),t("p",[s._v("结构输出应该看起来大致像这样:")]),s._v(" "),t("div",{staticClass:"language-plaintext line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-plaintext"}},[t("code",[s._v(".\n└── dist\n    └── app-linux-x64\n        ├── LICENSE\n        ├── LICENSES.chromium.html\n        ├── content_shell.pak\n        ├── app\n        ├── icudtl.dat\n        ├── libgcrypt.so.11\n        ├── libnode.so\n        ├── locales\n        ├── resources\n        ├── v8_context_snapshot.bin\n        └── version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"步骤-2-运行-electron-installer-snap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-2-运行-electron-installer-snap"}},[s._v("#")]),s._v(" 步骤 2: 运行 "),t("code",[s._v("electron-installer-snap")])]),s._v(" "),t("p",[s._v("From a terminal that has "),t("code",[s._v("snapcraft")]),s._v(" in its "),t("code",[s._v("PATH")]),s._v(", run "),t("code",[s._v("electron-installer-snap")]),s._v(" with the only required parameter "),t("code",[s._v("--src")]),s._v(", which is the location of your packaged Electron application created in the first step.")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("npx electron-installer-snap --src"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("out/myappname-linux-x64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("If you have an existing build pipeline, you can use "),t("code",[s._v("electron-installer-snap")]),s._v(" programmatically. For more information, see the "),t("a",{attrs:{href:"https://docs.snapcraft.io/build-snaps/syntax",target:"_blank",rel:"noopener noreferrer"}},[s._v("Snapcraft API docs"),t("OutboundLink")],1),s._v(".")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" snap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'electron-installer-snap'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("snap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("snapPath")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("Created snap at ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("snapPath"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"using-snapcraft-with-electron-packager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-snapcraft-with-electron-packager"}},[s._v("#")]),s._v(" Using "),t("code",[s._v("snapcraft")]),s._v(" with "),t("code",[s._v("electron-packager")])]),s._v(" "),t("h3",{attrs:{id:"第-1-步-创建示例-snapcraft-项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第-1-步-创建示例-snapcraft-项目"}},[s._v("#")]),s._v(" 第 1 步：创建示例 Snapcraft 项目")]),s._v(" "),t("p",[s._v("创建你的项目目录并将以下内容添加到 "),t("code",[s._v("snap/snapcraft.yaml")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" electron"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("packager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("world\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.1'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("summary")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Hello World Electron app\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n  Simple Hello World Electron app as an example")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("base")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" core18\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("confinement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" strict\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("grade")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" stable\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("electron-packager-hello-world")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" electron"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("quick"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("start/electron"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("quick"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("start "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("no"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sandbox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("extensions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("gnome"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("plugs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" browser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("support\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" network\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" network"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("bind\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Correct the TMPDIR path for Chromium Framework/Electron to ensure")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# libappindicator has readable resources.")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("TMPDIR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $XDG_RUNTIME_DIR\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("parts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("electron-quick-start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nil\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//github.com/electron/electron"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("quick"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("start.git\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("override-build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n        npm install electron electron-packager\n        npx electron-packager . --overwrite --platform=linux --output=release-build --prune=true\n        cp -rv ./electron-quick-start-linux-* $SNAPCRAFT_PART_INSTALL/electron-quick-start")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build-snaps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" node/14/stable\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build-packages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" unzip\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage-packages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libnss3\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libnspr4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("p",[s._v("如果要将此示例应用于现有项目：")]),s._v(" "),t("ul",[t("li",[s._v("替代 "),t("code",[s._v("source: https://github.com/electron/electron-quick-start.git</0 > 为 <code>source: ..")]),s._v(".")]),s._v(" "),t("li",[s._v("替代所有的 "),t("code",[s._v("electron-quick-start")]),s._v(" 为你的项目名称。")])]),s._v(" "),t("h3",{attrs:{id:"第-2-步-构建-snap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第-2-步-构建-snap"}},[s._v("#")]),s._v(" 第 2 步：构建 snap")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ snapcraft\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("output snipped"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nSnapped electron-packager-hello-world_0.1_amd64.snap\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"第-3-步-安装-snap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第-3-步-安装-snap"}},[s._v("#")]),s._v(" 第 3 步：安装 snap")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" snap "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" electron-packager-hello-world_0.1_amd64.snap --dangerous\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"第-4-步-运行-snap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第-4-步-运行-snap"}},[s._v("#")]),s._v(" 第 4 步：运行 snap")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("electron-packager-hello-world\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"使用一个现有的-debian-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用一个现有的-debian-包"}},[s._v("#")]),s._v(" 使用一个现有的 Debian 包")]),s._v(" "),t("p",[s._v("Snapcraft is capable of taking an existing "),t("code",[s._v(".deb")]),s._v(" file and turning it into a "),t("code",[s._v(".snap")]),s._v(" file. The creation of a snap is configured using a "),t("code",[s._v("snapcraft.yaml")]),s._v(" file that describes the sources, dependencies, description, and other core building blocks.")]),s._v(" "),t("h3",{attrs:{id:"步骤-1-创建一个-debian-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-1-创建一个-debian-包"}},[s._v("#")]),s._v(" 步骤 1: 创建一个 Debian 包")]),s._v(" "),t("p",[s._v("If you do not already have a "),t("code",[s._v(".deb")]),s._v(" package, using "),t("code",[s._v("electron-installer-snap")]),s._v(" might be an easier path to create snap packages. However, multiple solutions for creating Debian packages exist, including "),t("a",{attrs:{href:"https://github.com/electron-userland/electron-forge",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("electron-forge")]),t("OutboundLink")],1),s._v(", "),t("a",{attrs:{href:"https://github.com/electron-userland/electron-builder",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("electron-builder")]),t("OutboundLink")],1),s._v(" or "),t("a",{attrs:{href:"https://github.com/unindented/electron-installer-debian",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("electron-installer-debian")]),t("OutboundLink")],1),s._v(".")]),s._v(" "),t("h3",{attrs:{id:"步骤-2-创建一个-snapcraft-yaml"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-2-创建一个-snapcraft-yaml"}},[s._v("#")]),s._v(" 步骤 2: 创建一个 snapcraft.yaml")]),s._v(" "),t("p",[s._v("For more information on the available configuration options, see the "),t("a",{attrs:{href:"https://docs.snapcraft.io/build-snaps/syntax",target:"_blank",rel:"noopener noreferrer"}},[s._v("documentation on the snapcraft syntax"),t("OutboundLink")],1),s._v(". Let's look at an example:")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myApp\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2.0.0'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("summary")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" A little description for the app.\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n You know what? This app is amazing! It does all the things\n for you. Some say it keeps you young, maybe even happy.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("grade")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" stable\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("confinement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" classic\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("parts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("slack")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dump\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deb.deb\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("source-type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" deb\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("after")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" desktop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gtk3\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage-packages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libasound2\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libnotify4\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libnspr4\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libnss3\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libpcre3\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libpulse0\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libxss1\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" libxtst6\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("electron-launch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dump\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" files/\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("prepare")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n      chmod +x bin/electron-launch")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("myApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" bin/electron"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("launch $SNAP/usr/lib/myApp/myApp\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desktop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" usr/share/applications/myApp.desktop\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Correct the TMPDIR path for Chromium Framework/Electron to ensure")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# libappindicator has readable resources.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("TMPDIR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $XDG_RUNTIME_DIR\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br")])]),t("p",[s._v("As you can see, the "),t("code",[s._v("snapcraft.yaml")]),s._v(" instructs the system to launch a file called "),t("code",[s._v("electron-launch")]),s._v(". In this example, it passes information on to the app's binary:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v('"')]),s._v(" --executed-from"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" --pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$$")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("Alternatively, if you're building your "),t("code",[s._v("snap")]),s._v(" with "),t("code",[s._v("strict")]),s._v(" confinement, you can use the "),t("code",[s._v("desktop-launch")]),s._v(" command:")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("myApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Correct the TMPDIR path for Chromium Framework/Electron to ensure")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# libappindicator has readable resources.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" env TMPDIR=$XDG_RUNTIME_DIR PATH=/usr/local/bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("PATH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SNAP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/bin/desktop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("launch $SNAP/myApp/desktop\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desktop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" usr/share/applications/desktop.desktop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);