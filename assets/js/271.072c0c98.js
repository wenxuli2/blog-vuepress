(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{747:function(s,n,e){"use strict";e.r(n);var a=e(20),r=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"核心库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心库"}},[s._v("#")]),s._v(" 核心库")]),s._v(" "),e("h3",{attrs:{id:"操作文件流-fs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作文件流-fs"}},[s._v("#")]),s._v(" 操作文件流——fs")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("/* \n1. fs.stat  检测是文件还是目录(目录 文件是否存在) \n1.1 fs.existsSync 检测文件是否存在\n1. fs.mkdir  创建目录 （创建之前先判断是否存在）\n2. 2.1 递归创建目录 \n3. fs.writeFile  写入文件(文件不存在就创建,但不能创建目录) \n4. fs.appendFile 写入追加文件 \n5.fs.readFile 读取文件 \n6.fs.readdir 读取目录 \n7.fs.rename 重命名 \n1. fs.rmdir  删除目录 \n2. fs.unlink 删除文件 \n*/\nconst fs = require('fs');//fs是node.js的核心模块，不用下载安装，可以直接引入  \n//1. fs.stat  检测是文件还是目录  fs.statSync()同步获取stats对象,通过返回值接收。\nfs.stat('html',function(error,stats){\n    if(error){\n        console.log(error);\n        return false;\n    }\n    console.log('文件：'+stats.isFile());\n    console.log('目录：'+stats.isDirectory());\n})\n1.1 fs.existsSync 检测文件是否存在\n")])])]),e("p",[s._v("​"),e("br"),s._v("\n​    //2. fs.mkdir  创建目录"),e("br"),s._v("\n​    fs.mkdir('css',function(error){\n​        if(error){\n​            console.log(error);\n​            return false;\n​        }\n​        console.log('创建目录成功');\n​    })\n​"),e("br"),s._v("\n​    //2.1 递归创建目录\n​    const path = require('path');\n​    const fs = require('fs');\n​    function myMkdirSync(dirname) {\n​    if (fs.existsSync(dirname)) {\n​        return true;\n​    } else {\n​        //如果父级目录已经创建，然后才能创建子级目录\n​        if (myMkdirSync(path.dirname(dirname))) {\n​        fs.mkdirSync(dirname);\n​        return true;\n​        }\n​    }\n​    }")]),s._v(" "),e("p",[s._v("​")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" //3. fs.writeFile  写入文件（会覆盖之前的内容）（文件不存在就创建）  utf8参数可以省略  \n    fs.writeFile('123.txt','你好nodejs 覆盖','utf8',function(error){\n        if(error){\n            console.log(error);\n            return false;\n        }\n        console.log('写入成功');\n    })\n\n\n    \n    //4. fs.appendFile 追加文件  \n    fs.appendFile('123.txt','这是写入的内容\\n',function(error){\n        if(error){\n            console.log(error);\n            return false;\n        }\n        console.log('写入成功');\n    })\n\n\n​    \n​    //5.fs.readFile 读取文件  \n​    fs.readFile('123.txt',function(error,data){\n​        if(error){\n​            console.log(error);\n​            return false;\n​        }\n​        //console.log(data);  //data是读取的十六进制的数据。  也可以在参数中加入编码格式\"utf8\"来解决十六进制的问题;\n​        console.log(data.toString());  //读取出所有行的信息  \n​    })\n\n\n​    \n​    //6.fs.readdir 读取目录下第一级内容  把目录下面的文件和文件夹都获取到。  \n​    fs.readdir('html',function(error,data){\n​        if(error){\n​            console.log(error);\n​            return false;\n​        }\n​        console.log(data);  //data是数组类型，包含文件夹以及文件的名字(只有第一级目录内容)。拿到一个文件夹下面的所有目录  \n​    })\n\n\n​    \n​    //7.fs.rename 重命名  1.改名  2.剪切文件(移动)  \n​    fs.rename('html/index.html','html/news.html',function(error){\n​        if(error){\n​            console.log(error);\n​            return false;\n​        }\n​        console.log('修改名字成功');\n​    })\n\n\n​    \n​    //8. fs.rmdir  删除目录   rmdir 这个方法只能删除目录，不能删除文件  \n​    fs.rmdir('abc目录',function(error){\n​        if(error){\n​            console.log(error);\n​            return false;\n​        }\n​        console.log('删除目录成功');\n​    })\n\n\n​    \n​    //9. fs.unlink删除文件  \n​    fs.unlink('index.txt',function(error){\n​        if(error){\n​            console.log(error);\n​            return false;\n​        }\n​        console.log('删除文件成功');\n​    })\n\n\n​    \n​    //10. fs.createReadStream  从文件流中读取数据，读取的文件比较大时建议用流的方式读取，文件比较大会多次读取。  \n​    var fileReadStream = fs.createReadStream( 'data1.json');\n​    var str = '';\n​    fileReadStream.on('data', (data) => {\n​        console.log(\"接收到\" + data.length);   //文件比较大时，会多次读取，多次执行该回调函数  \n​    str += data;\n​    })\n​    fileReadStream.on('end', () => {\n​        console.log(\" --- 结束 ---\");\n​    console.log( str );\n​    })\n​    fileReadStream.on('error', (error) => {\n​        console.log(error)\n​    })\n\n\n​    \n​    //11. fs.createWriteStream  写入文件流  \n​    var fs = require(\"fs\");\n​    var data  = \"我是从数据库获取的数据，我要保存起来\";\n​    var writerStream = fs.createWriteStream('output.txt');\n​    writerStream.write( data , 'UTF8' );\n​    writerStream.end();  //标记文件末尾  结束写入流，释放资源  \n​    writerStream.on( 'finish',  function() {\n​        console.log(\"写入完成。\");\n​    });\n​    writerStream.on( 'error',  function(error){\n​        console.log(error.stack);\n​    });\n​    console.log(\"程序执行完毕\");\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br"),e("span",{staticClass:"line-number"},[s._v("80")]),e("br"),e("span",{staticClass:"line-number"},[s._v("81")]),e("br"),e("span",{staticClass:"line-number"},[s._v("82")]),e("br"),e("span",{staticClass:"line-number"},[s._v("83")]),e("br"),e("span",{staticClass:"line-number"},[s._v("84")]),e("br"),e("span",{staticClass:"line-number"},[s._v("85")]),e("br"),e("span",{staticClass:"line-number"},[s._v("86")]),e("br"),e("span",{staticClass:"line-number"},[s._v("87")]),e("br"),e("span",{staticClass:"line-number"},[s._v("88")]),e("br"),e("span",{staticClass:"line-number"},[s._v("89")]),e("br"),e("span",{staticClass:"line-number"},[s._v("90")]),e("br"),e("span",{staticClass:"line-number"},[s._v("91")]),e("br"),e("span",{staticClass:"line-number"},[s._v("92")]),e("br"),e("span",{staticClass:"line-number"},[s._v("93")]),e("br"),e("span",{staticClass:"line-number"},[s._v("94")]),e("br"),e("span",{staticClass:"line-number"},[s._v("95")]),e("br"),e("span",{staticClass:"line-number"},[s._v("96")]),e("br"),e("span",{staticClass:"line-number"},[s._v("97")]),e("br"),e("span",{staticClass:"line-number"},[s._v("98")]),e("br"),e("span",{staticClass:"line-number"},[s._v("99")]),e("br"),e("span",{staticClass:"line-number"},[s._v("100")]),e("br"),e("span",{staticClass:"line-number"},[s._v("101")]),e("br"),e("span",{staticClass:"line-number"},[s._v("102")]),e("br"),e("span",{staticClass:"line-number"},[s._v("103")]),e("br"),e("span",{staticClass:"line-number"},[s._v("104")]),e("br"),e("span",{staticClass:"line-number"},[s._v("105")]),e("br"),e("span",{staticClass:"line-number"},[s._v("106")]),e("br"),e("span",{staticClass:"line-number"},[s._v("107")]),e("br"),e("span",{staticClass:"line-number"},[s._v("108")]),e("br")])]),e("ol",{attrs:{start:"12"}},[e("li",[s._v("pipe 管道流")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const fs = require(\"fs\"); \nconst readerStream = fs.createReadStream( 'input.txt'); \nconst writerStream = fs.createWriteStream( 'output.txt'); \nreaderStream.pipe( writerStream ); \nconsole.log(\"程序执行完毕\");\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ol",{attrs:{start:"13"}},[e("li",[s._v("fs.access 判断目录、文件是否存在(读写权限)")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const  fs = require('fs');\nfs.access('package.json',(err)=>{\nconsole.log(err ?  '目录/文件不存在': '文件存在,可以进行读写');\n});\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"nodejs异步读取文件的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nodejs异步读取文件的"}},[s._v("#")]),s._v(" NodeJS异步读取文件的")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//引入fs模块\nconst { writeFile, readFile } = require('fs');\n//引入path模块\nconst { resolve } = require('path');\nmodule.exports = {\n    writeFileAsync (data, fileName) {\n        //将对象转化json字符串\n        data = JSON.stringify(data);\n        const filePath = resolve(__dirname, fileName);\n        return new Promise((resolve, reject) => {\n            writeFile(filePath, data, err => {\n                if (!err) {\n                    console.log('文件保存成功~');\n                    resolve();\n                } else {\n                    reject('writeFileAsync方法出了问题：' + err);\n                }\n            })\n        })\n    },\n    readFileAsync (fileName) {\n        const filePath = resolve(__dirname, fileName);\n        return new Promise((resolve, reject) => {\n            readFile(filePath, (err, data) => {\n                if (!err) {\n                    console.log('文件读取成功~');\n                    //将json字符串转化js对象\n                    data = JSON.parse(data);\n                    resolve(data);\n                } else {\n                    reject('readFileAsync方法出了问题：' + err);\n                }\n            })\n        })\n\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br")])]),e("h4",{attrs:{id:"将base64转为图片、图片转base64"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将base64转为图片、图片转base64"}},[s._v("#")]),s._v(" 将base64转为图片、图片转base64")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("// 参考\n    [js怎么把base64的数据转换成图片？ 在网上找了好久只会把图片转成base64~~？](https://www.zhihu.com/question/60593079/answer/247418738)\n    [请使用 Buffer.from()/Buffer.alloc()](https://nodejs.org/zh-cn/docs/guides/buffer-constructor-deprecation/)\n    [理解一下Buffer.from(), Buffer.alloc()](https://www.cnblogs.com/onesea/p/15268029.html)\n    [使用Node.js实现base64和png文件相互转换的方法](https://www.jb51.net/article/182413.htm)\n    [浅入深出，原生API实现SVG 转 BASE64](https://juejin.cn/post/6844903802202832903)\n//将base64转为图片\n    const fs = require(\"fs\");  // 引入fs模块\n    const base_64_url = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAAA4CAMAAACFSOnnAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAALrUExURQAAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wlL9MAAAAD4dFJOUwABYP4wwPAgcJCg/QIHA9AIGPr7UAWwMRIeeBBLs8gcRRFU6yTL/MQUFQrfhFyIJrLuZ3QtCbz5PMeq8QSFoeO2eg6+TD0p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\"\n    const path = 'favicon.ico'\n    const base64 = base_64_url.replace(/^data:image\\/\\w+;base64,/, \"\"); //去掉图片base64码前面部分data:image/png;base64\n    // Buffer 已弃用用Buffer.from和Buffer.alloc代替.\n    // Buffer.from(), Buffer.alloc() 都是创建一个buffer， Buffer.from()从字符串或者数组创建一个buffer, Buffer.alloc()是创建一个指定大小的buffer。\n    const dataBuffer = new Buffer.from(base64, 'base64'); //把base64码转成buffer对象，\n    console.log('dataBuffer是否是Buffer对象：' + Buffer.isBuffer(dataBuffer)); // 输出是否是buffer对象\n    fs.writeFile(path, dataBuffer, function (err) {//用fs写入文件\n        if (err) {\n            console.log(err);\n        } else {\n            console.log('写入成功！');\n        }\n    });\n\n//NodeJs将任意文件转换为base64格式\n    const path = require('path');\n    const mineType = require('mime-types');\n    function img_to_base64(filePath){\n        let data = fs.readFileSync(filePath);\n        data = new Buffer.from(data).toString('base64');\n        let base64 = 'data:' + mineType.lookup(filePath) + ';base64,' + data;\n        return base64.length>30?base64:''\n    }\n    console.log(img_to_base64('favicon.svg'))\n    \n//将图片文件转换成base64\n    const fs = require(\"fs\");\n    const util = require(\"util\");\n    const imageData = await util.promisify(fs.readFileSync(fileUrl)); // 例：xxx/xx/xx.png\n    const imageBase64 = imageData.toString(\"base64\");\n    const imagePrefix = \"data:image/png;base64,\";\n    console.log(imagePrefix + imageBase64);\n")])])]),e("h3",{attrs:{id:"path"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#path"}},[s._v("#")]),s._v(" path")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("/*\npath.dirname \npath.resolve\n*/\nconst path = require('path');\npath.dirname(dirname)\n")])])]),e("h2",{attrs:{id:"第三方库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三方库"}},[s._v("#")]),s._v(" 第三方库")]),s._v(" "),e("h3",{attrs:{id:"request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[s._v("#")]),s._v(" request")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("/*\n1.下载图片\n*/\n[github-request](https://github.com/request/request)\n")])])]),e("h4",{attrs:{id:"request使用代理下载图片"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request使用代理下载图片"}},[s._v("#")]),s._v(" request使用代理下载图片")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("const request = require('request');//也是请求网址模块，只不过下载图片的函数比较简单，所以用这个\nconst fs = require('fs');//用于操作文件流\nconst path = require('path');\nconst console = require('console');\n\nconst img_url = \"https://www.baidu.com/favicon.ico\"\n// const img_url = \"https://www.google.com/favicon.ico\"\nconst proxy = \"http://127.0.0.1:7890/\"\nconst { host } = new URL(\"\", img_url);\nconst img_path = `images/${host}/favicon.ico`\n\n//2. fs.mkdir  创建目录  \n// fs.mkdir(img_path,error=>{})\nmyMkdirSync(path.dirname(img_path));\nconsole.log(fs.existsSync(path.dirname(img_path)))\ndownload_img(img_url, img_path, proxy)\n\n// 异步执行函数，用于下载图片，接收图片地址，文件名、代理节点。\nasync function download_img(img_url, img_path, proxy = '') {\nawait request({\n    url: img_url,\n    proxy: proxy,\n}).pipe(fs.createWriteStream(img_path)).on('close', function () {\n    console.log('pic saved!')\n})\n}\n\n//递归创建目录\nfunction myMkdirSync(dirname) {\nif (fs.existsSync(dirname)) {\n    return true;\n} else {\n    //如果父级目录已经创建，然后才能创建子级目录\n    if (myMkdirSync(path.dirname(dirname))) {\n    fs.mkdirSync(dirname);\n    return true;\n    }\n}\n}\n")])])]),e("h3",{attrs:{id:"request-promise-native"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-promise-native"}},[s._v("#")]),s._v(" request-promise-native")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("const rpn = require('request-promise-native');\nconst url = \"https://www.baidu.com/\";\nasync function useRequestPromiseNative(){\nlet options = {\nmethod: 'POST',\nuri: url,\nbody: { // 这里定义你的body参数\n},\njson: true, // 这个看你的参数而定\n};\n\nawait rpn(image_url, function (error, response, body) {\n    console.log(response && response.statusCode && response.statusCode === 200)\n    return response && response.statusCode && response.statusCode === 200\n})\n//  let rpnbody = await rpn(options);  \n//  console.log(\"rpnbody\" , rpnbody );\n\n}\nuseRequestPromiseNative();")])])])])}),[],!1,null,null,null);n.default=r.exports}}]);